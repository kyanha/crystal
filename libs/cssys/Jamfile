SubDir TOP libs cssys ;

switch $(TARGET.OS)
{
case WIN32 :
  SearchSubdir win32 ;
  SearchSubdir general ; 
  SYSFILES = [ Wildcard win32 : *.cpp *.h ] 
		findlib.cpp getopt.cpp printf.cpp runloop.cpp 
		csprocessorcap.cpp pluginpaths.cpp ;
case MACOS_X :
  SearchSubdir macosx ;
  SearchSubdir general ;
  SYSFILES = [ Wildcard macosx : *.cpp *.m *.mm *.h ] 
		findlib.cpp getopt.cpp printf.cpp sysroot.cpp cspthrd.cpp 
		cspthrd.h scanplugins.cpp csprocessorcap.cpp syspath.cpp 
		pluginpaths.cpp ;
  InstallConfig macosx.cfg ;
case * :		# posix/unix/linux mode
  SearchSubdir unix ;
  SearchSubdir general ;
  SYSFILES = [ Wildcard unix : *.cpp *.h ]
		sysroot.cpp findlib.cpp getopt.cpp printf.cpp runloop.cpp 
		sysinit.cpp cspthrd.cpp cspthrd.h platformconfig.cpp 
		scanplugins.cpp csprocessorcap.cpp syspath.cpp 
		pluginpaths.cpp ;
}

Library cssys :
	[ Wildcard *.cpp *.h ]
	$(SYSFILES)
;
CFlags cssys : -DCS_CONFIGDIR='\"$(INSTALLDIR.CONFIG)\"' -DCS_PLUGINDIR='\"$(INSTALLDIR.PLUGIN)\"' ;

LibDepends cssys : csutil ;
Help cssys : "Crystal Space system library" ;

