SubDir TOP libs cssys ;

CSSYS_SRC = [ Wildcard *.cpp *.h ] ;

switch $(TARGET.OS)
{
case WIN32 :					# Windows
  SearchSubdir win32 ;
  SearchSubdir general ; 
  CSSYS_SRC += [ Wildcard win32 : *.cpp *.h ] 
		csprocessorcap.cpp
		findlib.cpp
		getopt.cpp
		pluginpaths.cpp
		resdir.cpp
		runloop.cpp ;
case MACOS_X :					# MacOS/X
  SearchSubdir macosx ;
  SearchSubdir general ;
  CSSYS_SRC += [ Wildcard macosx : *.cpp *.m *.mm *.h ] 
		apppath.cpp
		csprocessorcap.cpp
		cspthrd.cpp 
		cspthrd.h
		findlib.cpp
		getopt.cpp
		pathutil.cpp 
		pluginpaths.cpp
		printf.cpp
		scanplugins.cpp
		sysroot.cpp ;
  InstallConfig macosx.cfg ;
case * :					# Posix, Unix, Linux, etc.
  SearchSubdir unix ;
  SearchSubdir general ;
  CSSYS_SRC += [ Filter [ Wildcard unix : *.cpp *.h ] : bfdplugins.cpp ]
		appdir.cpp
		apppath.cpp
		csprocessorcap.cpp
		cspthrd.cpp
		cspthrd.h
		findlib.cpp
		getopt.cpp
		pathutil.cpp
		platformconfig.cpp 
		pluginpaths.cpp
		printf.cpp
		resdir.cpp
		runloop.cpp 
		sysroot.cpp ;
  if $(EMBED_META) = "yes" && $(LIBBFD.AVAILABLE) = "yes"
  {
    CSSYS_SRC += bfdplugins.cpp ;
  }
  else
  {
    CSSYS_SRC += scanplugins.cpp ;
  }
}

CSSYS_OBJ = [ CompileObjects [ DoSourceGrist $(CSSYS_SRC) ] ] ;
