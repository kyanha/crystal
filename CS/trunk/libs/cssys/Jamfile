SubDir TOP libs cssys ;

CSSYS_SRC = ;

switch $(TARGET.OS)
{
case WIN32 :					# Windows 
  CSSYS_SRC += [ Wildcard win32 : *.cpp *.h ] 
		general/csprocessorcap.cpp
		general/findlib.cpp
		general/getopt.cpp
		general/pluginpaths.cpp
		general/resdir.cpp
		general/runloop.cpp ;
case MACOS_X :					# MacOS/X
  CSSYS_SRC += [ Wildcard macosx : *.cpp *.m *.mm *.h ] 
		general/apppath.cpp
		general/csprocessorcap.cpp
		general/cspthrd.cpp 
		general/cspthrd.h
		general/findlib.cpp
		general/getopt.cpp
		general/pathutil.cpp 
		general/pluginpaths.cpp
		general/printf.cpp
		general/scanplugins.cpp
		general/sysroot.cpp ;
  InstallConfig macosx.cfg ;
case * :					# Posix, Unix, Linux, etc.
  CSSYS_SRC += [ Filter [ Wildcard unix : *.cpp *.h ] : unix/bfdplugins.cpp ]
		general/appdir.cpp
		general/apppath.cpp
		general/csprocessorcap.cpp
		general/cspthrd.cpp
		general/cspthrd.h
		general/findlib.cpp
		general/getopt.cpp
		general/pathutil.cpp
		general/platformconfig.cpp 
		general/pluginpaths.cpp
		general/printf.cpp
		general/resdir.cpp
		general/runloop.cpp 
		general/sysroot.cpp ;
  if $(EMBED_META) = "yes" && $(LIBBFD.AVAILABLE) = "yes"
  {
    CSSYS_SRC += unix/bfdplugins.cpp ;
  }
  else
  {
    CSSYS_SRC += general/scanplugins.cpp ;
  }
}

