/*
    Copyright (C) 1998 by Jorrit Tyberghein    

    This library is free software; you can redistribute it and/or
    modify it under the terms of the GNU Library 8gf thigned char sysdeft[1] ned char *butily Gv  modt[1] ned char *butilyutilt[1] ned char *beneral/%mm4on/sndberat[1] ned char *beneral/wavLicen[1]
triMicroThis Wav ree dload %%trieither
  85 = m16Incrs PCM (RIFF)

		movb _WAVchknt[1]<< 16chunk[4  vFrar *src = bitm;
  d}twavchk;

		movb _WAVhdrnt[1]<< 16cl	e i[4  vFrar *src = bitmf_;
  dvF<< 16cmt[8  vFrar *src = bitmfmt_;
  dvFrac = dv sFrac fmt_tag dvFrac = dv sFrac << nn
7 vFrar *src = bitmsarares_per_sec vFrar *src = bitmavg_bytes_per_sec vFrar *src =sFrac blk_al*sr vFrar *src =sFrac bcrs_per_sarare d}twavhdr;%en <= 0)
   Stream(x) {if(x>size) {gopyrexit_read;} 
7:e {iusex=x;}}en <= 0)
s dAddStream(x) {if((iusex+x)>size) gopyrexit_read;}en <= 0)
addStream(x) {if((iusex+x)>size) {gopyrexit_read;} 
7:e {iusex+=x;}}en <= 0)
Streamenef[iusex]

bool Rdx, %%eWAV (Int[1]
  uFraWAVLoad % load %egisbitmapac,  TybLoad %::Rdx, %%e (&load %is frec,  TybDera*aWAVLoad %::loads Tyb(UByte*enef; yLile.size)nt[1]w) +iusex=0 vvFra,  TybDera *sb= NULL vFrac = v era=NULL vFrUByte	vptr vFrUByte	vptr_end;

  mem   (&wavhdr,	#,msizeof(wavhdr));e4	wf(size<sizeof(wavhdr)) gopyrexit_read;
 


og2wf(memxpy(&wavhdr,	&Streamlisizeof(wavhdr))==NULL)
 libgopyrexit_read;
 
s dAddStream(sizeof(wavhdr));e4	addStream(sizeof(wavhdr));eog2wf(memx",(wavhdr.cl	e i, "RIFF li4)6) << gopyrexit_read;
og2wf(memx",(wavhdr.cmi, "WAVEcmi  li8)6) << gopyrexit_read;
 
og2w)
{
PORT_BYTESEX_BIG_ENDIAN" (lavhdr.c_;
 	%5ByteSwap32bcr((lavhdr.c_;
 	);e4	wavhdr.cmi_;
 	%5ByteSwap32bcr((lavhdr.cmi_;
 	);e4	wavhdr.cmi_t					ByteSwap16bcr((lavhdr.cmi_t			);e4	wavhdr.<< nn
7			ByteSwap16bcr((lavhdr.<< nn
7	);e4	wavhdr.sarares_per_sec	%5ByteSwap32bcr((lavhdr.sarares_per_sec	);e4	wavhdr.avg_bytes_per_sec	%5ByteSwap32bcr((lavhdr.avg_bytes_per_sec	);e4	wavhdr.blk_al*sr			ByteSwap16bcr((lavhdr.blk_al*sr	);e4	wavhdr.bcrs_per_sarare			ByteSwap16bcr((lavhdr.bcrs_per_sarare	);en redistriPORT_BYTESEX_BIG_ENDIAN"og2wf(!((wavhdr.<< nn
7		= 1) ||	(wavhdr.<< nn
7		= 2))6) << gopyrexit_read;
 
o
 
ptr=&Stream;
 
ptr_end=ptr+size vFrlong (ptr<ptr_end6) <{) << memxpy(&wavchk,
ptrlisizeof(wavchk));eg2w)
{
PORT_BYTESEX_BIG_ENDIAN" ( twavchk.;
 	%5ByteSwap32bcr((lavchk.;
 	);en redistriPORT_BYTESEX_BIG_ENDIAN"og2 
ptr+=sizeof(wavchk); Z-mawf(memx",(lavchk.chunk, " era li4)==16) << Genreak;og2 
ptr+=lavchk.;
 ;%4	}



ryvHK ( era%(ew << 1[lavchk.;
 ]);e4	wf( era==NULL)
 libgopyrexit_read;
 
og2wf(memxpy( era,
ptrlilavchk.;
 )==NULL)
 libgopyrexit_read; 
o
g2w)
{
PORT_BYTESEX_BIG_ENDIAN" ( = ((lavhdr.bcrs_per_sarare==16I)<{) << ByteSwap16bcrB %%dl( uar *src =sFrac = deralilavchk.;
  /RPO);%4	}
n redistriPORT_BYTESEX_BIG_ENDIAN"og2vHK (sb	%5(ew <,  TybDera(lavhdr.sarares_per_secary Ge(lavhdr.bcrs_per_sarare==16)?true:fa7:eary Ge(wavhdr.<< nn
7==2)?true:fa7:eary Ge(lavhdr.bcrs_per_sarare==16)?true:fa7:eary Ge(wavhdr.bcrs_per_sarare==16)?(lavchk.;
 /2)-1:lavchk.;
 -1ary Ge era));
og2wf(sb==NULL) gopyrexit_read;

  gopyrexit_ok;
exit_read:
  wf( era) delete []e era;

exit_ok:gisbitmapasbs fr
    modifmk/systeme terms of the GNU Limk/systemePublic
os2gcc.makas 22ublished by tos2gcc.makware Foundation;6681
################################################################################
#                         detaisrightmakeree dcl	 OS2/EMX
#                       *** (t///
d
buffecpp
upgcc-1.0) ***
################################################################################
 pixelsssssssssssssssssssssssssssssssssssssssssssssss
# NOTE: OS/2tmakeree ,gcl	g=rwjpeg,g=rwpitma= mz=rw = zane GNf Tybave brary Geys
os2x, %d    modi pixelsssssssssssssssssssssssssssssssssssssssssssssss
 = Fri reffenam ,gcl	gbuildcommenvirondest
DESCRIPTION.os2gcc	%5OS/2tcpp
uGCC/EMX

	%5(oo:e lonch dricensary iwa) +pyrbuild/rac,DRIVERS+=\vFra,2dy Gdice *bitmap, int  \
#  csnetdrv/null csnetdrv/sock    csnetman/null csnetman/sirare	\
#  cssndbrv/null cssndral/null cssndral/ap, int  \
 pixelsssssssssssssssssssssssssssssssssssssssssssssss- ms o <= 0)s &  <= 0)s ss-#
ifneq (,$(= 0dary 8g  <= 0)s,$(MAKESECTION))6)
.SUFFIXES: .exe .dll .bra .r)s .rc are MMXpap
ucl	gsystem-nds nfFra (dests
vpap
u%nse  brary Geys
os2 areProstssl	gtype. Most5OS/2tsystems rar 
bu Intel's, I'm99
/turee IBMaref the4 = zressu   mrightPowerPCCULAR PUR... :-(
PROC=INTEL areOpera	cmplsystemeOS=OS2

	%5ompee r
COMP=GCC

SYSMODIFIERS=USE_OMF=$(USE_OMF) USE_CRTDLL=$(USE_CRTDLL) are MMX%mm4		#. Sin1]), "marget
UPD=cmd /c bcn\\os2n1].cmd $@ DEST

eredis# ifneq (,$(= 0dary 8g  <= 0)s,$(MAKESECTION))6)
pixelsssssssssssssssssssssssssssssssssssssssssssssss-sssssssssssss-  <= 0)s ss-#
ifeq ($(MAKESECTION), <= 0)s) are ypicahe4xtenR PURcl	gexecutabe ,gonu=rw,gsystem (e.g. EXE=.exe)
EXE=.exe are ypicahe4xtenR PURcl	gdynamFra=rw,o=i ,gonu=rw,gsystem.
DLL=.dll are ypicahepr<= xgcl	g=rwaifffree nam ,
LIB_PREFIX= areExtraa=rw,o=i ,gneed
d
buu=rw,gsystem (beside dricens)
LIBS.EXE= areWher)
s drightZbra =rwaifff GNf Tybabuu=rw,gsystem?
Z_LIBS=-lz areWher)
s drightPNG =rwaifff GNf Tybabuu=rw,gsystem?
PNG_LIBS=-lpitdll areWher)
s drightJPG =r