<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: Threads in CS</TITLE>

<META NAME="description" CONTENT="Crystal Space: Threads in CS">
<META NAME="keywords" CONTENT="Crystal Space: Threads in CS">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC807"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_267.html#SEC806"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_269.html#SEC810"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_263.html#SEC802"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_262.html#SEC801"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_269.html#SEC810"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC962">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H2> 8.2 Threads in Crystal Space </H2>
<!--docid::SEC807::-->
<P>

<EM>Written by Jorrit Tyberghein.</EM>
</P><P>

The Crystal Space project as such is not thread-safe. So when using
threads in combination with Crystal Space you have to be careful. However,
several parts of Crystal Space are thread-safe to some degree. This is
documented in this section. However, by default you must assume that some
Crystal Space plugin or module is not thread-safe unless it is mentioned here.
</P><P>

<A NAME="SEC808"></A>
<H4> Threadsafe parts of Crystal Space </H4>
<!--docid::SEC808::-->
<P>

<UL>
<LI>
SCF (see section <A HREF="cs_139.html#SEC359">6.2 Shared Class Facility (SCF)</A>) class loading/unloading is safe. This means that
<CODE>SCF_CREATE_INSTANCE()</CODE> and all the routines in `<SAMP>iSCF</SAMP>' that have
to do with loaded classes are safe.
<P>

<LI>
The plugin manager is safe, thus macros such as <CODE>CS_LOAD_PLUGIN()</CODE>,
<CODE>CS_LOAD_PLUGIN_ALWAYS()</CODE>, and <CODE>CS_QUERY_PLUGIN_CLASS()</CODE> are safe.
<P>

<LI>
The object registry is safe, thus macros like <CODE>CS_QUERY_REGISTRY()</CODE>
are safe. The <CODE>iObjectRegistryIterator</CODE> takes a copy of the data
over which it iterates so it will not even lock.
<P>

<LI>
VFS (see section <A HREF="cs_159.html#SEC393">7.2 Virtual File System (VFS)</A>) is thread-safe for most operations.  But do not work on
the same `<SAMP>iFile</SAMP>' from different threads!  That is not thread-safe.  Also
the concept of the current directory is not really valid with threads.
<P>

<LI>
The TinyXML, XMLRead, and BinaryXML parsers are thread safe in the sense
that it is okay to create and work on separate documents in separate threads.
However it is <EM>not</EM> okay to work on the same document in different
threads.
<P>

<LI>
The syntax services plugin is safe for the basic parsing tools (vectors,
matrices, reporting errors, etc.). For polygons and thing related objects
this has not yet been checked for safety.
<P>

<LI>
The `<SAMP>simpcon</SAMP>' and `<SAMP>csconout</SAMP>' output consoles are thread-safe provided
auto-updating is disabled which you can set like this:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csRef&#60;iConsoleOutput&#62; con = ...;
con-&#62;AutoUpdate(false);
</pre></td></tr></table></P><P>

Note that by default auto-updating is enabled!
</P><P>

<LI>
The reporter plugin is fully thread-safe.
<P>

<LI>
The standard reporter listener plugin is thread-safe for basic operations
but not for initialization. That should be done from the main thread.
Also note that thread-safety of the standard reporter listener depends
on thread-safety of the output console that is being used.
<P>

<LI>
The following mesh object and factory loaders are thread-safe provided that the
implementation of `<SAMP>iLoaderContext</SAMP>' is thread-safe.  Please note that the
default <CODE>iLoaderContext</CODE> is <EM>not</EM> thread-safe which makes all loader
plugins unsafe by default.
<P>

<UL>
<LI>
<EM>Genmesh loader</EM>: Aside from a small design mistake with streams in
case the new renderer is used, the genmesh loader plugin is perfectly
thread-safe.
</UL>
<P>

</UL>
<P>

<A NAME="SEC809"></A>
<H4> Threaded Loading </H4>
<!--docid::SEC809::-->
<P>

One important threaded section of Crystal Space is the threaded loader.  In
order to ensure that the threaded loader works correctly you must make sure
that you use thread-safe versions of the following modules in Crystal Space:
</P><P>

<UL>
<LI>
<CODE>iReporter</CODE> (the standard reporter is okay).
<LI>
<CODE>iReporterListener</CODE> (the standard reporter listener is okay).
<LI>
<CODE>iConsoleOutput</CODE> (`<TT>simpcon</TT>' and `<TT>csconout</TT>' are okay provided
auto-updating is disabled).
<LI>
<CODE>iLoaderContext</CODE> (the threaded loader provides a thread-safe version
of this one).
<LI>
<CODE>iDocumentSystem</CODE> (TinyXML, XMLRead, and BinaryXML are all okay).
</UL>
<A NAME="Contributing"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_267.html#SEC806"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_269.html#SEC810"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_263.html#SEC802"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_262.html#SEC801"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_269.html#SEC810"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC962">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
