<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: Cygwin</TITLE>

<META NAME="description" CONTENT="Crystal Space: Cygwin">
<META NAME="keywords" CONTENT="Crystal Space: Cygwin">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC2.4.4"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.3.html#SEC2.4.3"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.5.html#SEC2.4.5"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.3.html#SEC2.3"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.html#SEC2.4"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.5.html#SEC2.5"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs__1.html#SEC_1">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H3> 2.4.4 Windows using Cygwin </H3>
<!--docid::SEC2.4.4::-->
<P>

<EM>Philip Wyett <A HREF="mailto:philipwyett@dsl.pipex.com">philipwyett@dsl.pipex.com</A>.</EM>
<EM>Last updated 13 Dec 2004.</EM>
</P><P>

These instructions are for building Crystal Space with Cygwin a GNU
compiler for Windows created by Red Hat Inc. and other third party
contributors.
</P><P>

<A NAME="SEC_1"></A>
<H4> A Warning About Cygwin </H4>
<!--docid::SEC_1::-->
<P>

A full or extensive Cygwin installation can take up alot of hard disk space.
Please be careful if installing on low free space disks.  A typical install can
be around 400MB and large above 700MB.  Note, however, that a full
installation of Cygwin is not required for building Crystal Space.  It is
possible to get by with a fairly minimal installation consisting of the
GCC compiler and linker suite and related tools, and several support
libraries as discussed below.
</P><P>

<A NAME="SEC_2"></A>
<H4> Obtaining Cygwin </H4>
<!--docid::SEC_2::-->
<P>

Cygwin uses a custom setup application for installation of Cygwin which can be
obtained from their official website.
</P><P>

<A HREF="http://www.cygwin.com/">http://www.cygwin.com/</A>
</P><P>

The installation program `<TT>setup.exe</TT>' must be downloaded to your computer.
</P><P>

<A HREF="http://www.cygwin.com/setup.exe">http://www.cygwin.com/setup.exe</A>
</P><P>

<A NAME="SEC_3"></A>
<H4> Installing Cygwin </H4>
<!--docid::SEC_3::-->
<P>

First, go to the location where you downloaded the Cygwin `<TT>setup.exe</TT>'.  It
is suggested that you download it into a directory of its own since it will
place additional files in that directory later on when it downloads the actual
Cygwin packages.
</P><P>

<CENTER><IMG SRC="build/platform/win32/cygwin/cygshot1.jpg" ALT="build/platform/win32/cygwin/cygshot1"></CENTER>
</P><P>

Launch `<TT>setup.exe</TT>' to begin the installation process.
</P><P>

You will first be prompted with a Cygwin welcome dialog.  It provides basic
information about the setup program, such as its version number.
</P><P>

<CENTER><IMG SRC="build/platform/win32/cygwin/cygshot2.jpg" ALT="build/platform/win32/cygwin/cygshot2"></CENTER>
</P><P>

Click on the <EM>Next</EM> button to continue.
</P><P>

The next dialog you will see is the <EM>Choose a Download Source</EM> dialog.
Here you need to choose if you wish to download and install directly from the
internet or download to your system so you can install it later.  Cygwin
can install, uninstall, and update using this program.  So, the decision
is whether or not you want to download and keep the downloaded files around in
order to avoid a large download at a later date if you re-install.  If you have
a fast Internet connection, then you can download and install directly without
saving the packages to your disk drive.  This is a matter of personal
preference.
</P><P>

<CENTER><IMG SRC="build/platform/win32/cygwin/cygshot3.jpg" ALT="build/platform/win32/cygwin/cygshot3"></CENTER>
</P><P>

After deciding, click on the <EM>Next</EM> button to continue.
</P><P>

Note: For the purposes of this discussion, it is assumed that you are
installing directly from the Internet.
</P><P>

The next dialog you will see is the <EM>Select Root Install Directory</EM>
dialog.  The first thing to choose is the location of where Cygwin should be
installed.  It is suggested that you install in a directory named `<TT>cygwin</TT>'
at the location of your choice.  Point the installer at that directory.
</P><P>

The next thing to decide, if you are a system administrator, is if you want any
other users of that computer to have access to Cygwin.  Also you are asked if
you wish to use DOS text file line-ending format (CR/LF) or Unix
format (LF).  This is all a matter of preference for the user.  If you are
a pure Windows users it is suggested that you choose the DOS option.
However, if you might move files to a Unix machine, for instance, it could be
favorable to use the Unix option.
</P><P>

<CENTER><IMG SRC="build/platform/win32/cygwin/cygshot4.jpg" ALT="build/platform/win32/cygwin/cygshot4"></CENTER>
</P><P>

After deciding upon a root install location and other options, click on the
<EM>Next</EM> button to continue.
</P><P>

The next dialog you will see is the <EM>Select Local Package Directory</EM>
dialog.  This directory is corresponds to the location where you placed the
Cygwin `<TT>setup.exe</TT>' program.
</P><P>

<CENTER><IMG SRC="build/platform/win32/cygwin/cygshot5.jpg" ALT="build/platform/win32/cygwin/cygshot5"></CENTER>
</P><P>

If they correspond, click on the <EM>Next</EM> button to continue.
</P><P>

The next dialog is the <EM>Select Your Internet Connection</EM>
dialog.  This lets you specify the type of connection you have.  Most of the
time it will be a <EM>Direct Connection</EM>.  However, if you access
the Internet via proxy server, then select that option and enter the necessary
information.
</P><P>

<CENTER><IMG SRC="build/platform/win32/cygwin/cygshot6.jpg" ALT="build/platform/win32/cygwin/cygshot6"></CENTER>
</P><P>

After choosing your internet connection type, click on the <EM>Next</EM> button
to continue.
</P><P>

The next dialog you will see is the <EM>Choose A Download Site</EM> dialog.
Choose a download location in or as close to your own geographical location as
possible.
</P><P>

<CENTER><IMG SRC="build/platform/win32/cygwin/cygshot7.jpg" ALT="build/platform/win32/cygwin/cygshot7"></CENTER>
</P><P>

After choosing the closest download site, click on the <EM>Next</EM> button
to continue.
</P><P>

The next dialog is the <EM>Select Packages To Install</EM> dialog.
This shows a tree with selectable packages in the branches.  If you have
sufficient disk space and a high-speed Internet connection, you may wish to
install the majority of the tools.  On the other hand, if you want to install
only a minimum set of tools, choose the packages in the <EM>Devel</EM> branch
and, at a minimum, <EM>jpeg</EM>, <EM>libpng</EM>, <EM>opengl</EM>, <EM>python</EM>,
<EM>w32api</EM>, and <EM>zlib</EM> from the <EM>Libs</EM> branch.
</P><P>

<CENTER><IMG SRC="build/platform/win32/cygwin/cygshot8.jpg" ALT="build/platform/win32/cygwin/cygshot8"></CENTER>
</P><P>

Note: You do not need to install the <EM>Apache server</EM>, <EM>XFree</EM> or
<EM>Games</EM> packages.  Also if you miss anything first time round you can
simply repeat the install process and install the package(s) you missed.
</P><P>

Important: The above <EM>Select Packages To Install</EM> section is subject to
change as Cygwin makes additional packages available.
</P><P>

After choosing the packages for installing, click on the <EM>Next</EM> button to
continue.
</P><P>

At this point the installer will download and install the selected packages and
perform post build steps, such as the generation of documentation, etc.
</P><P>

The next dialog is the <EM>Create Icons</EM> dialog.  If you are
performing a fresh install and want these icons, then check the boxes.  If you
are updating you need not check the boxes if you already have the icons.
</P><P>

<CENTER><IMG SRC="build/platform/win32/cygwin/cygshot9.jpg" ALT="build/platform/win32/cygwin/cygshot9"></CENTER>
</P><P>

After making your selection, click on the <EM>Finish</EM> button to continue.
</P><P>

After all this, you will be prompted with a dialog to tell you that the
installation is complete.  Click on the <EM>Ok</EM> button to finish the
installation process.
</P><P>

<A NAME="SEC_4"></A>
<H4> Using "cs-win32libs" </H4>
<!--docid::SEC_4::-->
<P>

You can use the "cs-win32libs" package to obtain the third-party libraries
to build Crystal Space.  See  <A HREF="cs_2.3.html#cs-win32libs">cs-win32libs</A>.
</P><P>

You may want to select "Cygwin typical" in the "Select Components" screen
when installing `<TT>cs-win32libs</TT>'.  You can further adjust the selection of
installed components depending upon your actual set up (e.g. install
MinGW-related components if you plan to also use CrystalSpace with MinGW/MSYS).
</P><P>

After the installation, if you opted to set up support for the Cygwin
development environment, the Cygwin shell startup file will be augmented so a
helper script named `<TT>cslibs-config</TT>' can be found when configuring Crystal
Space.  The Crystal Space configure script queries `<TT>cslibs-config</TT>' to
determine where the `<TT>cs-win32libs</TT>' resources are located.
</P><P>

Alternatively, you can use the <CODE>zlib</CODE>, <CODE>libpng</CODE> and <CODE>libjpg</CODE>
libraries which ship with Cygwin and compile the remaining third-party
libraries yourself.  In this case, follow the instructions in the following
sections; otherwise, you can skip to the section
 <A HREF="cs_2.4.4.html#Cygwin: Building Crystal Space">Cygwin: Building Crystal Space</A>.
</P><P>

<A NAME="SEC_5"></A>
<H4> Installing DirectX 8 SDK for Cygwin </H4>
<!--docid::SEC_5::-->
<P>

The Microsoft DirectX 8 SDK which the Cygwin port uses is one created
especially for it.  You can download it via the following link.
</P><P>

<A HREF="ftp://sunsite.dk/projects/crystal/support/cygwin/DXforCygwin.zip">ftp://sunsite.dk/projects/crystal/support/cygwin/DXforCygwin.zip</A>
</P><P>

To install, extract the archive to a location of your choice.  Open a Cygwin
Bash prompt and navigate to where you extracted the files (that is, the
directory which contains the `<TT>Makefile</TT>').  Next, at the command prompt
type `<SAMP>make install</SAMP>'.
</P><P>

<A NAME="SEC_6"></A>
<H4> Open Dynamics Engine (required for physics plugin) </H4>
<!--docid::SEC_6::-->
<P>

The Open Dynamics Engine library is required for successful compilation of the
Crystal Space ODE physics plugin.  You can obtain the latest source
archive at:
</P><P>

<A HREF="http://opende.sourceforge.net/">http://opende.sourceforge.net/</A>
</P><P>

In order to successfully build it, you will need to perform a couple additional
tasks.  Open a Cygwin Bash prompt and navigate to where you extracted the files
(that is, the directory which contains the `<TT>Makefile</TT>').
</P><P>

Sadly, though the `<TT>lib</TT>' directory will be created during configuration on
all other platforms, this will not happen on Cygwin, so you must do it
yourself.  At the command prompt enter the following command and hit return.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>mkdir lib
</pre></td></tr></table></P><P>

Next, it is necessary to update the configuration for the Cygwin platform.
Open the file `<TT>config/user-settings</TT>' in your favorite editor and change
the following line from:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>PLATFORM=unix-gcc
</pre></td></tr></table></P><P>

to:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>PLATFORM=cygwin
</pre></td></tr></table></P><P>

Make sure you are back in the directory containing the `<TT>Makefile</TT>' before
continuing. From the Bash prompt issue the following command and then hit
return.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make configure
</pre></td></tr></table></P><P>

Once configuration is complete and you have been returned to the Bash prompt,
enter the following command and hit return inorder to compile the ODE
library.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make ode-lib
</pre></td></tr></table></P><P>

Again at the Bash prompt, you can proceed and install
ODE into Cygwin.  The easiest way to install ODE is as follows.  Copy
the `<TT>lib</TT>' and `<TT>include</TT>' directories and paste them into your Cygwin
<EM>/usr</EM> directory.  You will be prompted about overwriting files, and
you should just answer `<TT>Yes to All</TT>'.
</P><P>

<A NAME="SEC_7"></A>
<H4> Installing the MNG Library (optional) </H4>
<!--docid::SEC_7::-->
<P>

In order to successfully build the optional Crystal Space <EM>jng</EM> plugin,
you must have libmng installed on your system.  You can download it via the
following link.
</P><P>

<A HREF="ftp://sunsite.dk/projects/crystal/support/general/libmng-1.0.4.tar.gz">ftp://sunsite.dk/projects/crystal/support/general/libmng-1.0.4.tar.gz</A>
</P><P>

To install, extract the archive to a location of your choice.  Open a Cygwin
Bash prompt and navigate to where you extracted the files (that is, the
directory which contains the `<TT>install-sh</TT>').  Next, at the command prompt
type `<SAMP>make install</SAMP>'.
</P><P>

<A NAME="SEC_8"></A>
<H4> Building Crystal Space  </H4>
<!--docid::SEC_8::-->
<A NAME="Cygwin: Building Crystal Space"></A>
<P>

Crystal Space can be built with either `<TT>make</TT>' or Jam (see  <A HREF="cs_2.2.html#GettingJam">GettingJam</A>).
Both tools work equally well.  The `<TT>cs-win32libs</TT>' package contains a
pre-built version of Jam which you can invoke simply by typing `<SAMP>jam</SAMP>' at
the Cygwin Bash prompt.  In the examples below, wherever `<SAMP>make -k</SAMP>'
is used, you can instead substitute `<TT>jam</TT>' if you so desire.
</P><P>

Open a Cygwin Bash prompt via the desktop shortcut or the via item in the
Programs menu.  Navigate to the `<TT>CS/</TT>' directory and issue the following
commands:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>./configure
make -k all
</pre></td></tr></table></P><P>

The `<SAMP>-k</SAMP>' option used in the `<SAMP>make -k all</SAMP>' command instructs the
project builder to ignore errors and continue compiling regardless.  This can
be useful in cases when localized errors appear in the project since often they
affect only a single module.
</P><P>

Alternately, if you wish to use Jam to build the project:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>./configure
jam all
</pre></td></tr></table></P><P>

If you prefer to build a <EM>debug</EM> version of Crystal Space, substitute
the following commands for those shown above:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>./configure --enable-debug
make -k all
</pre></td></tr></table></P><P>

If the Crystal Space source directory is read-only, if it is shared between
several developers, or if you simply dislike building a project within its
source tree, you can instead configure and build from a different directory.
For instance:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>mkdir $HOME/builddir
cd $HOME/builddir
/path/to/CS/configure --enable-debug
make -k all
</pre></td></tr></table></P><P>

Finally, if you want to utilize Crystal Space as a software development kit
(SDK), you can install it and then clean up the detritus of the build
process:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make install
make distclean
</pre></td></tr></table></P><P>

<A NAME="SEC_9"></A>
<H4> Additional Build Options  </H4>
<!--docid::SEC_9::-->
<P>

Sometimes it is a good idea to remove all of the built programs and executable
files and start from scratch.  You can do this with the following commands:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make clean
make -k all
</pre></td></tr></table></P><P>

Once in a while it is even a good idea to completely clean and re-configure the
project.  This may be required if you are using the bleeding-edge version of
Crystal Space from the CVS repository after some radical change.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make distclean
./configure
make -k all
</pre></td></tr></table></P><P>

<A NAME="MacOS/X"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.3.html#SEC2.4.3"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.5.html#SEC2.4.5"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.3.html#SEC2.3"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.html#SEC2.4"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.5.html#SEC2.5"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs__1.html#SEC_1">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
