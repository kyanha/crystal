<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: SCF Client</TITLE>

<META NAME="description" CONTENT="Crystal Space: SCF Client">
<META NAME="keywords" CONTENT="Crystal Space: SCF Client">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC366"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_143.html#SEC365"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_145.html#SEC367"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_136.html#SEC356"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_139.html#SEC359"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_150.html#SEC375"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC956">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H3> 6.2.5 Client Side </H3>
<!--docid::SEC366::-->
<P>

Now let's explain how to use all this mess from client side.  First, we should
be able to create objects that implement the interfaces we want.  For this, you
should use the <CODE>SCF_CREATE_INSTANCE()</CODE> macro.  It receives two arguments:
the name of external class, and the name of the interface it implements.  So,
if we know class `<SAMP>MyGraphics3D</SAMP>' implements the `<SAMP>iGraphics3D</SAMP>'
interface, we can write:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csRef&#60;iGraphics3D&#62; G3D =
  SCF_CREATE_INSTANCE("MyGraphics3D", iGraphics3D);
if (!G3D)
{
  fprintf(stderr,
    "Failed to create an instance of iGraphics3D!\n");
  abort();
}
</pre></td></tr></table></P><P>

Now you can use the object any way you like, just like standard C++:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>G3D-&#62;BeginDraw();
G3D-&#62;DrawLine(<small>...</small>);
G3D-&#62;DrawPolygon(<small>...</small>);
G3D-&#62;EndDraw();
</pre></td></tr></table></P><P>

When you are done using the `<SAMP>G3D</SAMP>' pointer (say, when program exits), the
reference you own for the object should be released.  This happens
automatically when the <CODE>csRef&#60;&#62;</CODE> goes out of scope.  If you are not using
<CODE>csRef&#60;&#62;</CODE>, but are instead using a plain pointer, `<SAMP>iGraphics3D*</SAMP>',
then you must manually release the reference when you are done with it by
calling <CODE>G3D-&#62;DecRef()</CODE>.  After this you can not use `<SAMP>G3D</SAMP>' anymore;
you should create another instance of `<SAMP>iGraphics3D</SAMP>' if needed.
</P><P>

To query an object to see if it implements an interface, you should use the
<CODE>SCF_QUERY_INTERFACE()</CODE> macro. It also receives two arguments, first being
the object you are querying for the embedded interface, and second being the
name of the interface you desire. Example:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csRef&#60;iHalo&#62; halo = SCF_QUERY_INTERFACE(G3D, iHalo);
if (!halo)
{
  fprintf(stderr,
    "3D graphic driver doesn't support halos!\n");
  return;
}
</pre></td></tr></table></P><P>

<A NAME="SCF Meta Info"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_143.html#SEC365"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_145.html#SEC367"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_136.html#SEC356"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_139.html#SEC359"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_150.html#SEC375"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC956">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
