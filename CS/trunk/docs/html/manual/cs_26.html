<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: MinGW</TITLE>

<META NAME="description" CONTENT="Crystal Space: MinGW">
<META NAME="keywords" CONTENT="Crystal Space: MinGW">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC77"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_25.html#SEC62"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_27.html#SEC85"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_23.html#SEC44"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_20.html#SEC35"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_33.html#SEC101"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC946">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H3> 2.4.3 Windows using MinGW </H3>
<!--docid::SEC77::-->
<P>

<EM>Written by Eric Sunshine, <A HREF="mailto:sunshine@sunshineco.com">sunshine@sunshineco.com</A>.  Originally
written by Philip Wyett, <A HREF="mailto:philipwyett@dsl.pipex.com">philipwyett@dsl.pipex.com</A>.  Last updated 3
May 2004.</EM>
</P><P>

These instructions are for building Crystal Space with MinGW, the
<EM>Minimalist GNU compiler for Windows</EM>.
</P><P>

<A HREF="http://www.mingw.org/">http://www.mingw.org/</A>
</P><P>

<A NAME="SEC78"></A>
<H4> Necessary Resources </H4>
<!--docid::SEC78::-->
<P>

Download the following packages:
</P><P>

<UL>
<LI>
The most recent version of the MinGW compiler and related tools.  This package
is typically named `<TT>MinGW-3.?.?-?.exe</TT>', where the question marks stand for
the actual version number.
<P>

<A HREF="http://www.mingw.org/">http://www.mingw.org/</A>
</P><P>

<LI>
The most recent version of MSYS.  This is an adjunct package for MinGW
which provides additional useful utilities as well as a convenient shell
environment.  MSYS provides a more reliable and robust environment for the
configuration and build phases of Crystal Space.  It is available from the
MinGW web site.  This package is typically named `<TT>MSYS-1.?.?.exe</TT>', where
the question marks stand for the actual version number.
<P>

<A HREF="http://www.mingw.org/">http://www.mingw.org/</A>
</P><P>

<LI>
The most recent Crystal Space Win32 Libs package.  This package provides a set
of additional required and optional resources used when building Crystal Space,
such as zlib, libpng, libjpeg, ODE, NASM ( the Netwide Assembler),
etc.  See  <A HREF="cs_19.html#cs-win32libs">cs-win32libs</A>.
</UL>
<P>

<A NAME="SEC79"></A>
<H4> Installation </H4>
<!--docid::SEC79::-->
<P>

Follow these instructions to install the packages which you downloaded.
Be sure to install them in the order shown.
</P><P>

<UL>
<LI>
Install the MinGW compiler.  The is a self-extracting executable.  The
following instructions assume you will install the MinGW package at
`<TT>C:\mingw32</TT>', though you are free to install it wherever you like.
<P>

<LI>
Install MSYS.  This is a self-extracting executable.  During the
installation, you will be asked for the location of the MinGW installation.
This allows MSYS to correctly locate the MinGW tools later on when
building Crystal Space.  Be sure to enter the correct path (`<TT>C:/mingw32</TT>',
in our example) when prompted.
<P>

<LI>
Install the `<TT>cs-win32libs</TT>' package.  This is a self-extracting executable.
After the installation, you should opt to also install support for the
MSYS development environment.  This will augment the MSYS shell
startup file so a helper script named `<TT>cslibs-config</TT>' can be found when
configuring Crystal Space.  This script is used by the Crystal Space configure
script to determine where the rest of the `<TT>cs-win32libs</TT>' resources are
located.
<P>

You may want to select "MSYS/MinGW typical" in the "Select Components" 
screen. You can further adjust the selection of installed components depending 
on your actual set up (e.g. install VisualC-related components if you plan to 
also use CrystalSpace with VisualC++).
</UL>
<P>

<EM>Note</EM>: If you ever install a new version of MSYS, then you should 
also re-install the `<TT>cs-win32libs</TT>' package.
</P><P>

<A NAME="SEC80"></A>
<H4> Selecting the Renderer Architecture    </H4>
<!--docid::SEC80::-->
<P>

At this moment we have two completely different renderer architectures
in Crystal Space. The old renderer (which is still default) and the new
renderer. The new renderer hasn't been made default yet because it is still
considered to be experimental and some features haven't been ported yet
(like software renderer which works only partially and fog). On the other
hand the new renderer supports shaders, stencil shadows, and other advanced
OpenGL stuff and for most people it seems to work very well. So we personally
recommend trying out the new renderer first. If it doesn't work right for
you then you should send us a report and go back to old renderer then.
To use the new renderer you should add the `<SAMP>--enable-new-renderer</SAMP>'
option to configure below.
</P><P>

<A NAME="SEC81"></A>
<H4> Building Crystal Space </H4>
<!--docid::SEC81::-->
<P>

You must configure and build Crystal Space from within the MSYS shell
environment.  To launch this environment, click on the MSYS icon which the
installation procedure placed upon your desktop, or choose the MSYS item
from the <EM>Programs</EM> menu.  This will launch a Unix-like shell window into
which you type commands.
</P><P>

Crystal Space can be built with either `<TT>make</TT>' or Jam (see  <A HREF="cs_18.html#GettingJam">GettingJam</A>).
Both tools work equally well.  The `<TT>cs-win32libs</TT>' package contains a
pre-built version of Jam which you can invoke simply by typing `<SAMP>jam</SAMP>' at
the MSYS command prompt.  In the examples below, wherever `<SAMP>make -k</SAMP>'
is used, you can instead substitute `<TT>jam</TT>' if you so desire.
</P><P>

At the shell prompt, go to your `<TT>CS</TT>' directory with the `<SAMP>cd</SAMP>' command.
For example, if Crystal Space resides at `<TT>C:\work\CS</TT>', invoke the command
`<SAMP>cd /c/work/CS</SAMP>'.  Next, configure and build the project with the following
sequence of commands:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>./configure
make -k all
</pre></td></tr></table></P><P>

The `<SAMP>-k</SAMP>' option used in `<SAMP>make -k all</SAMP>' instructs the `<TT>make</TT>'
utility to ignore errors and continue building the project.  This may be
necessary if you are using the bleeding-edge version of Crystal Space from the
CVS repository and some module fails to build correctly.
</P><P>

If you prefer to build a <EM>debug</EM> version of Crystal Space, substitute
the following commands for those shown above:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>./configure --enable-debug
make -k all
</pre></td></tr></table></P><P>

If you wish to build with debugging information and for the new renderer
architecture you can do:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>./configure --enable-debug --enable-new-renderer
make -k all
</pre></td></tr></table></P><P>

If the Crystal Space source directory is read-only, if it is shared between
several developers, or if you simply dislike building a project within its
source tree, you can instead configure and build from a different directory.
For instance:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>mkdir $HOME/builddir
cd $HOME/builddir
/c/work/CS/configure --enable-debug
make -k all
</pre></td></tr></table></P><P>

Finally, if you want to utilize Crystal Space as a software development kit
(SDK), you can install it and then clean up the detritus of the build
process:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make install
make distclean
</pre></td></tr></table></P><P>

<A NAME="SEC82"></A>
<H4> Additional Build Options </H4>
<!--docid::SEC82::-->
<P>

Sometimes it is a good idea to remove all of the built programs and executable
files and start from scratch.  You can do this with the following commands:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make clean
make -k all
</pre></td></tr></table></P><P>

Once in a while it is even a good idea to completely clean and re-configure the
project.  This may be required if you are using the bleeding-edge version of
Crystal Space from the CVS repository after some radical change.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>make distclean
./configure
make -k all
</pre></td></tr></table></P><P>

<A NAME="SEC83"></A>
<H4> Troubleshooting </H4>
<!--docid::SEC83::-->
<P>

If you successfully built Crystal Space, yet find that you can not run the
applications from the `<TT>CS\</TT>' root directory, a possible cause might be that
the pathname leading up to the `<TT>CS\</TT>' directory might have embedded
whitespace.  For instance, if you installed the project in `<TT>C:\my
stuff\CS</TT>', try renaming the path to `<TT>C:\my_stuff\CS</TT>' or
`<TT>C:\mystuff\CS</TT>'.
</P><P>

<A NAME="SEC84"></A>
<H3> Blasting the Past   </H3>
<!--docid::SEC84::-->
<P>

If you were previously using the older, deprecated `<TT>cs_mingw_0.??.exe</TT>'
package which contained the entire MinGW distribution along with other
unrelated tools and resources, or the `<TT>csmingwlibs</TT>' package, it is highly
recommended that you first remove the older package, as well as any residual
files and resources before installing the newer MinGW, MSYS, and
`<TT>cs-win32libs</TT>' packages.  For best results, it would probably be wise to
remove the entire old `<TT>MinGW</TT>' directory (though you may want to make a
backup copy of it just in case) and clean your environment variables of any
references to the old resource directories.
<A NAME="Cygwin"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_25.html#SEC62"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_27.html#SEC85"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_23.html#SEC44"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_20.html#SEC35"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_33.html#SEC101"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC946">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
