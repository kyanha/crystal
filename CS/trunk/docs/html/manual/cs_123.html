<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: HOWTO User Objects in Maps</TITLE>

<META NAME="description" CONTENT="Crystal Space: HOWTO User Objects in Maps">
<META NAME="keywords" CONTENT="Crystal Space: HOWTO User Objects in Maps">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC291"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_122.html#SEC284"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_124.html#SEC294"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_101.html#SEC205"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_109.html#SEC221"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_134.html#SEC350"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_292.html#SEC941">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H3> 5.8.14 Attaching User Objects to CS Objects in a map file </H3>
<!--docid::SEC291::-->
<P>

In the previous howto (see section <A HREF="cs_122.html#SEC284">5.8.13 Attaching User Objects to CS Objects</A>) you could see how
you can attach game data to Crystal Space objects at runtime (i.e. from
within code). It is also possible to attach game data to objects through
the map file. Here we explain how.
</P><P>

<A NAME="SEC292"></A>
<H4> Using Key/Value Pairs </H4>
<!--docid::SEC292::-->
<P>

Crystal Space doesn't do anything with the keys you specify in a map file.
The only thing it does is store them so you can use them later. Here is
how you would fetch all keys from a mesh object:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>void MyGame::ProcessKeys (iMeshWrapper* mesh)
{
  csRef&#60;iObjectIterator&#62; it = mesh-&#62;QueryObject ()-&#62;GetIterator ();
  while (it-&#62;HasNext ())
  {
    iObject* obj = it-&#62;Next ();
    csRef&#60;iKeyValuePair&#62; key = SCF_QUERY_INTERFACE (obj, iKeyValuePair);
    if (key)
    {
      if (!strcmp (key-&#62;GetKey (), "monsterAI"))
      {
        // Process key-&#62;GetValue ()
        <small>...</small>
      }
      else if (!strcmp (key-&#62;GetKey (), "monsterLive"))
      {
        // Process key-&#62;GetValue ()
        <small>...</small>
      }
    }
  }
}
</pre></td></tr></table></P><P>

This is only an example. You can call <CODE>QueryObject</CODE> on almost every
Crystal Space object and loop over all keys (or other <CODE>iObject</CODE>
implementing objects) with the code above.
</P><P>

To actually process the key you could check out the previous
tutorial (see section <A HREF="cs_122.html#SEC284">5.8.13 Attaching User Objects to CS Objects</A>) and make your own game data object
that contains all the collected values and attach that to the mesh too.
</P><P>

<A NAME="SEC293"></A>
<H4> Include Files            </H4>
<!--docid::SEC293::-->
<P>

The include files useful for this section are:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>  #include "iutil/object.h"
  #include "csutil/csobject.h"
  #include "cstool/keyval.h"
</pre></td></tr></table></P><P>

<A NAME="HOWTO CS Project"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_122.html#SEC284"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_124.html#SEC294"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_101.html#SEC205"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_109.html#SEC221"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_134.html#SEC350"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_292.html#SEC941">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
