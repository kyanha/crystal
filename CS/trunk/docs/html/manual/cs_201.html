<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: XML World Definition Section</TITLE>

<META NAME="description" CONTENT="Crystal Space: XML World Definition Section">
<META NAME="keywords" CONTENT="Crystal Space: XML World Definition Section">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC510"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_200.html#SEC507"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_202.html#SEC514"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_197.html#SEC492"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_198.html#SEC493"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_203.html#SEC516"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC946">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H4> 7.6.1.3 World Definition Section </H4>
<!--docid::SEC510::-->
<P>

This section describes the world definition section.
</P><P>

<A NAME="SEC511"></A>
<H4> Sector Section </H4>
<!--docid::SEC511::-->
<P>

A map file usually contains at least one sector. A sector is an infinite
area of space which you can populate with mesh objects and lights. Using
portals you can connect different sectors.
</P><P>

Note that while a sector is in fact infinite, in practice it is usually
bounded by some geometry. For an outside level there is usually
a sky box or sky dome which marks the outermost geometry. In case of indoor
type levels there are usually sector walls.
</P><P>

Here is an example sector:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#60;sector name="room"&#62;
  &#60;meshobj name="walls"&#62;
    &#60;plugin&#62;crystalspace.mesh.loader.thing&#60;/plugin&#62;
    &#60;zfill /&#62;
    &#60;params&#62;
      &#60;v x="-10" y="-1" z="10"/> &#60;v x="10" y="-1" z="10"/&#62;
      &#60;v x="-10" y="-1" z="-10"/> &#60;v x="10" y="-1" z="-10"/&#62;
      &#60;v x="-10" y="4" z="10"/> &#60;v x="10" y="4" z="10"/&#62;
      &#60;v x="-10" y="4" z="-10"/> &#60;v x="10" y="4" z="-10"/&#62;
      &#60;material&#62;wood&#60;/material&#62;
      &#60;texlen&#62;4&#60;/texlen&#62;
      &#60;p name="up"&#62;
        &#60;v&#62;6&#60;/v&#62; &#60;v&#62;7&#60;/v&#62; &#60;v&#62;5&#60;/v&#62; &#60;v&#62;4&#60;/v&#62;
      &#60;/p&#62;
      &#60;p name="down"&#62;
        &#60;v&#62;3&#60;/v&#62; &#60;v&#62;2&#60;/v&#62; &#60;v&#62;0&#60;/v&#62; &#60;v&#62;1&#60;/v&#62;
      &#60;/p&#62;
      &#60;p name="back"&#62;
        &#60;v&#62;7&#60;/v&#62; &#60;v&#62;6&#60;/v&#62; &#60;v&#62;2&#60;/v&#62; &#60;v&#62;3&#60;/v&#62;
      &#60;/p&#62;
      &#60;p name="front"&#62;
        &#60;v&#62;4&#60;/v&#62; &#60;v&#62;5&#60;/v&#62; &#60;v&#62;1&#60;/v&#62; &#60;v&#62;0&#60;/v&#62;
      &#60;/p&#62;
      &#60;p name="left"&#62;
        &#60;v&#62;6&#60;/v&#62; &#60;v&#62;4&#60;/v&#62; &#60;v&#62;0&#60;/v&#62; &#60;v&#62;2&#60;/v&#62;
      &#60;/p&#62;
      &#60;p name="right"&#62;
        &#60;v&#62;5&#60;/v&#62; &#60;v&#62;7&#60;/v&#62; &#60;v&#62;3&#60;/v&#62; &#60;v&#62;1&#60;/v&#62;
      &#60;/p&#62;
    &#60;/params&#62;
  &#60;/meshobj&#62;
  &#60;light&#62;
    &#60;center x="0" y="3" z="0"/&#62;
    &#60;radius&#62;40&#60;/radius&#62;
    &#60;color red="1" green="1" blue="1"/&#62;
  &#60;/light&#62;
&#60;/sector&#62;
</pre></td></tr></table></P><P>

In the above example we create a sector called `<SAMP>room</SAMP>' which contains
one mesh object (the outer walls of the sector) and one light. Any type
of mesh object can be placed in a sector. In this example we use the
`<SAMP>thing</SAMP>' mesh object.
</P><P>

There are some other things you can specify in a sector. By default a
sector will use the `<SAMP>frustvis</SAMP>' visibility culler. This visibility culler
will only do frustum culling. For small sectors (i.e. a small number of
objects) this is usually sufficient. If you have a large sector with lots
of objects then you should probably use `<SAMP>dynavis</SAMP>' instead. Like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#60;cullerp&#62;crystalspace.culling.dynavis&#60;/cullerp&#62;
</pre></td></tr></table></P><P>

In addition to using `<SAMP>meshobj</SAMP>' for specifying mesh objects in a sector
there are also some other techniques that you can use.
</P><P>

<UL>
<LI>
`<SAMP>meshref</SAMP>': with `<SAMP>meshref</SAMP>' you can directly create a mesh object
from a factory. This sounds similar to `<SAMP>meshobj</SAMP>' but the main difference
is that you can create hierarchical mesh objects from hierarchical mesh
factories with this. The disadvantage is that it is not possible to supply
mesh object specific parameters to the created mesh objects (i.e. you cannot
supply a `<SAMP>params</SAMP>' or `<SAMP>paramsfile</SAMP>' with `<SAMP>meshref</SAMP>').
<P>

<LI>
`<SAMP>meshlib:</SAMP>' normally a library contains mesh factories. But it is possible
to define mesh objects in libraries too. These mesh objects will be placed
in the engine but not in any sector. To actually link such an object to
a sector you have to use `<SAMP>meshlib</SAMP>' then. It is possible to supply
additional parameters using `<SAMP>params</SAMP>' or `<SAMP>paramsfile</SAMP>' with
`<SAMP>meshlib</SAMP>'. These will be used in addition to the parameters already
supplied to the mesh object as defined in the library. Note that once you
added an object to a sector using `<SAMP>meshlib</SAMP>' you cannot add it to other
sectors. This technique is not an alternative for using mesh factories.
</UL>
<P>

A sector can also contain fog like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#60;fog red=".5" green=".5" blue=".5" density=".01" /&#62;
</pre></td></tr></table></P><P>

Finally a sector can contain nodes. A node represents something that has
a position. In addition a node can contain keys and addons. Crystal Space
itself doesn't use nodes but an application using Crystal Space can use
them for whatever purpose it needs. Here is an example:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#60;node name="monster"&#62;
    &#60;position x="10" y="3" z="12" /&#62;
    &#60;key name="spawn" value="100" /&#62;
&#60;/node&#62;
</pre></td></tr></table></P><P>

Sectors can contain keys and addons.
</P><P>

<A NAME="SEC512"></A>
<H4> Region Specification </H4>
<!--docid::SEC512::-->
<P>

With regions it is possible to group related objects (like textures,
materials, mesh objects, mesh factories, sectors, sequences, triggers,
shared variables, <small>...</small>).
Regions are not a geometrical concept. It is possible to define a region which
contains all wall geometry and a region which contains all moving geometry.
Usually though, regions represent some area in the world. You can use
regions to dynamically load/unload parts of the world. This is useful
if you have really big worlds that don't fit in memory at once.
</P><P>

<A NAME="SEC513"></A>
<H4> Collection Specification </H4>
<!--docid::SEC513::-->
<P>

A collection is similar to a region in some respects but the purpose
is different. Basically a collection is a collection of some other
objects which you want to tie together for some reason (other than
dynamic loading). For example, using them in a scripting setup.
</P><P>

Here is an example collection:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#60;collection name="carCol"&#62;
    &#60;meshobj&#62;car&#60;/meshobj&#62;
    &#60;meshobj&#62;tire1&#60;/meshobj&#62;
    &#60;meshobj&#62;tire2&#60;/meshobj&#62;
    &#60;meshobj&#62;tire3&#60;/meshobj&#62;
    &#60;meshobj&#62;tire4&#60;/meshobj&#62;
    &#60;light&#62;lightname&#60;/light&#62;
&#60;/collection&#62;
</pre></td></tr></table></P><P>

Collections can also contain keys.
</P><P>

<A NAME="XML Action Section"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_200.html#SEC507"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_202.html#SEC514"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_197.html#SEC492"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_198.html#SEC493"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_203.html#SEC516"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC946">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
