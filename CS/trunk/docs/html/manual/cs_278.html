<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: Release Notes 100</TITLE>

<META NAME="description" CONTENT="Crystal Space: Release Notes 100">
<META NAME="keywords" CONTENT="Crystal Space: Release Notes 100">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC823"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_277.html#SEC822"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_279.html#SEC834"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_277.html#SEC822"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_277.html#SEC822"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC957"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC957">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H2> C.1 Release Notes from 0.98 to 1.00 </H2>
<!--docid::SEC823::-->
<P>

This section documents the major changes between versions 0.98 and 1.00 of
Crystal Space.
</P><P>

<A NAME="SEC824"></A>
<H3> <CODE>csArray&#60;&#62;</CODE> Index and Size Type Change </H3>
<!--docid::SEC824::-->
<P>

<CODE>csArray&#60;&#62;</CODE> has been changed to use the <CODE>size_t</CODE> instead of
`<SAMP>int</SAMP>' for array sizes and indices.  Probably, the most significant
semantic difference of this change is that `<SAMP>size_t</SAMP>' is usually
<EM>unsigned</EM> as opposed to `<SAMP>int</SAMP>' which is <EM>signed</EM>.
</P><P>

<STRONG>Read this paragraph carefully.</STRONG> In actual code, this change may result
in nothing more than simple-looking compiler warnings. However, it may have
caused <EM>semantics</EM> to change subtly.
</P><P>

This has the greatest impact in the following areas discussed below.
</P><P>

<A NAME="SEC825"></A>
<H4> Iterating Over <CODE>csArray&#60;&#62;</CODE> Contents </H4>
<!--docid::SEC825::-->
<P>

For this purpose, usually, `<SAMP>int</SAMP>' typed variables were used for keeping
track of the index of the current item of an array iteration.  Fixing forward
iteration over a <CODE>csArray&#60;&#62;</CODE> to instead use `<SAMP>size_t</SAMP>' is simple:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csArray&#60;<small>...</small>&#62; a;
for (int i = 0, n = a.Length(); i &#60; n; i++)
{
  <small>...</small>
}
</pre></td></tr></table></P><P>

Is changed to:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre><small>...</small>
for (size_t i = 0, n = a.Length(); i &#60; n; i++)
<small>...</small>
</pre></td></tr></table></P><P>

Backward iteration is a bit more problematic. As mentioned before, 
`<SAMP>size_t</SAMP>' is unsigned, so you do not have negative values. This can be a
problem in constructs like:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csArray&#60;<small>...</small>&#62; a;
for (int i = a.Length() - 1; i &#62;= 0; i--)
{
  <small>...</small>
}
</pre></td></tr></table></P><P>

If the `<SAMP>int</SAMP>' is changed simply to a `<SAMP>size_t</SAMP>', this 
<CODE>for</CODE>-loop misbehaves unexpectedly. When `<SAMP>i</SAMP>' becomes 0, the body 
of the loop is executed correctly. However, decrementing `<SAMP>i</SAMP>' will 
<STRONG>not</STRONG> cause `<SAMP>i</SAMP>' to have a negative value--after all, `<SAMP>size_t</SAMP>'
is unsigned. Instead, decrementing will make `<SAMP>i</SAMP>' wrap around from 0 to
0xffffffff (on 32-bit machines). Clearly, this is greater
than 0, effectively causing an infinite loop. The same thing also happens when
`<SAMP>a</SAMP>' has no items (i.e. `<SAMP>a.Length() == 0</SAMP>'). Here the
-1 in the initialization of `<SAMP>i</SAMP>' causes wrap-around.
</P><P>

Possible solutions include:
</P><P>

<UL>
<LI>
Use an <CODE>int</CODE>-typed counter variable and cast the array length to
`<SAMP>int</SAMP>'.  This is not entirely elegant, but it does the job in most cases.
<P>

<LI>
Re-write the loop to deal properly with the unsigned nature of `<SAMP>size_t</SAMP>':
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csArray&#60;<small>...</small>&#62; a;
for (size_t i = a.Length(); i-- &#62; 0;)
{
  <small>...</small>
}
</pre></td></tr></table></P><P>

This code does the same as the `<SAMP>int</SAMP>' version above, iterating from 
`<SAMP>a.Length() - 1</SAMP>' to 0, inclusively. It also correctly works
in the case `<SAMP>a.Length() == 0</SAMP>'. The "trick" is to place the 
modification of `<SAMP>i</SAMP>' as a post-decrement in the loop condition. This 
way, as soon as `<SAMP>i</SAMP>' becomes 0, the loop is terminated. The 
post-decrement ensures that `<SAMP>i</SAMP>' has the expected value in the loop body.
</P><P>

</UL>
<P>

<A NAME="SEC826"></A>
<H4> Searching </H4>
<!--docid::SEC826::-->
<P>

Functions like <CODE>csArray&#60;&#62;::FindSortedKey()</CODE> and <CODE>csArray&#60;&#62;::Find()</CODE>
used to return -1 to signify that an item was not found.  This is still the
case, but with a twist.  Now, `<SAMP>(size_t)-1</SAMP>' is returned.  For convenience,
a constant, `<SAMP>csArrayItemNotFound</SAMP>', has been added, which has this exact
value.  It can be used in comparions to make it clear what is actually being
checked.
</P><P>

Apropros comparisons: Recall that `<SAMP>size_t</SAMP>' is <EM>unsigned</EM>, so checking
whether an index returned by `<SAMP>FindSortedKey()</SAMP>' or `<SAMP>Find()</SAMP>' is 
actually a valid index by testing with `<SAMP>&#62;= 0</SAMP>' no longer works since
`<SAMP>(size_t)-1</SAMP>' is always <CODE>&#62;= 0</CODE>. Replace such checks with tests of
equality against `<SAMP>csArrayItemNotFound</SAMP>':
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csArray&#60;<small>...</small>&#62; a;
int index = a.Find (<small>...</small>);
if (index &#62;= 0)
{
  /* Item found */
  <small>...</small>
}
else
{
  /* Item not found */
  <small>...</small>
}
</pre></td></tr></table></P><P>

Must be replaced with:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csArray&#60;<small>...</small>&#62; a;
size_t index = a.Find (<small>...</small>);
if (index != csArrayItemNotFound)
{
  /* Item found */
  <small>...</small>
}
else
{
  /* Item not found */
  <small>...</small>
}
</pre></td></tr></table></P><P>

<A NAME="SEC827"></A>
<H3> Texture and Material Preparation </H3>
<!--docid::SEC827::-->
<P>

Texture and material preparation is now fully automatic. It is no longer
necessary to <EM>prepare</EM> a texture or a material before you can use it. It is
sufficient simply to register the texture or material. This means that the
following functions have been removed (and you can just remove invocations of
them from your applications if you used them):
</P><P>

<UL>
<LI>
<CODE>iMaterialHandle::Prepare()</CODE>
<LI>
<CODE>iTextureHandle::Prepare()</CODE>
<LI>
<CODE>iTextureManager::PrepareMaterials()</CODE>
<LI>
<CODE>iTextureManager::PrepareTextures()</CODE>
</UL>
<P>

<A NAME="SEC828"></A>
<H3> Input Definitions </H3>
<!--docid::SEC828::-->
<P>

The file `<TT>csutil/inpnames.h</TT>' has been renamed to
`<TT>inputdef.h</TT>', and the following functions have been removed:
</P><P>

<UL>
<LI>
<CODE>csTypeOfInputDef()</CODE>
<LI>
<CODE>csParseKeyDef()</CODE>
<LI>
<CODE>csGetKeyDesc()</CODE>
<LI>
<CODE>csParseMouseDef()</CODE>
<LI>
<CODE>csGetMouseDesc()</CODE>
<LI>
<CODE>csParseJoystickDef()</CODE>
<LI>
<CODE>csGetJoystickDesc()</CODE>
</UL>
<P>

These functions allowed you to convert a string such as <KBD><KBD>Ctrl</KBD>+A</KBD>,
`<SAMP>JoystickX</SAMP>' or `<SAMP>Alt+Mouse1</SAMP>' into values describing input events
and vice versa.
</P><P>

The way to do this is now, however, is to use `<SAMP>csInputDefinition</SAMP>', which
resides in `<TT>csutil/inputdef.h</TT>'. The preferred way to convert a string to a
definition is to construct a `<SAMP>csInputDefinition</SAMP>' from a
`<SAMP>char const*</SAMP>'; and the preferred way to convert a definition back to a
string (perhaps constructed some other way) is via
<CODE>csInputDefinition::ToString()</CODE>.
</P><P>

There are also static helper methods in `<SAMP>csInputDefinition</SAMP>' which accept
arguments in a similar way to the old functions. These are convenience methods
which perform the work of instantiating the object for you:
</P><P>

<UL>
<LI>
<CODE>csInputDefinition::ParseKey()</CODE>
<LI>
<CODE>csInputDefinition::GetKeyString()</CODE>
<LI>
<CODE>csInputDefinition::ParseOther()</CODE>
<LI>
<CODE>csInputDefinition::GetOtherString()</CODE>
</UL>
<P>

<A NAME="SEC829"></A>
<H3> Pollution Reduction </H3>
<!--docid::SEC829::-->
<P>

In order to avoid polluting the top-level system include directory, the Crystal
Space header tree is now installed (via `<SAMP>make install</SAMP>' or
`<SAMP>jam install</SAMP>') in a subdirectory named `<TT>crystalspace</TT>', rather than
being installed directly in the top-level system directory. For example,
assuming the default installation location, the Crystal Space headers are now
installed in `<TT>/usr/local/include/crystalspace</TT>'. Previously, they would
have been installed directly into `<TT>/usr/local/include</TT>'. The
`<SAMP>cs-config</SAMP>' utility script properly returns the new header location in
response to the `<SAMP>--includedir</SAMP>', `<SAMP>--cflags</SAMP>', and `<SAMP>--cxxflags</SAMP>'
options, so this relocation should be mostly transparent to external projects.
</P><P>

The following global header files have been renamed in order to avoid possible
conflict with headers installed by other packages.
</P><P>

<UL>
<LI>
<CODE>platform.h</CODE> => <CODE>csplatform.h</CODE>
<LI>
<CODE>qint.h</CODE> => <CODE>csqint.h</CODE>
<LI>
<CODE>qsqrt.h</CODE> => <CODE>csqsqrt.h</CODE>
<LI>
<CODE>volatile.h</CODE> => <CODE>csconfig.h</CODE>
</UL>
<P>

The following symbols have been renamed in order to avoid pollution of the
global namespace.
</P><P>

<UL>
<LI>
<CODE>COMP_BC</CODE> => <CODE>CS_COMPILER_BCC</CODE>
<LI>
<CODE>COMP_GCC</CODE> => <CODE>CS_COMPILER_GCC</CODE>
<LI>
<CODE>COMP_VC</CODE> => <CODE>CS_COMPILER_MSVC</CODE>
<LI>
<CODE>CS_PROCSIZE</CODE> => <CODE>CS_PROCESSOR_SIZE</CODE>
<LI>
<CODE>DO_MMX</CODE> => <CODE>CS_USE_MMX</CODE>
<LI>
<CODE>DO_NASM</CODE> => <CODE>CS_USE_NASM</CODE>
<LI>
<CODE>MemoryMapFile()</CODE> => <CODE>csMemoryMapFile()</CODE>
<LI>
<CODE>MemoryMapWindow()</CODE> => <CODE>csMemoryMapWindow()</CODE>
<LI>
<CODE>MKDIR()</CODE> => <CODE>CS_MKDIR()</CODE>
<LI>
<CODE>mmioInfo</CODE> => <CODE>csMemMapInfo</CODE>
<LI>
<CODE>__NEED_GENERIC_ISDIR</CODE> => <CODE>CS_USE_CUSTOM_ISDIR</CODE>
<LI>
<CODE>__NEED_OPENDIR_PROTOTYPE</CODE> => <CODE>CS_WIN32_USE_CUSTOM_OPENDIR</CODE>
<LI>
<CODE>OS_DOS</CODE> => <CODE>CS_PLATFORM_DOS</CODE>
<LI>
<CODE>OS_MACOSX</CODE> => <CODE>CS_PLATFORM_MACOSX</CODE>
<LI>
<CODE>OS_UNIX</CODE> => <CODE>CS_PLATFORM_UNIX</CODE>
<LI>
<CODE>OS_WIN32</CODE> => <CODE>CS_PLATFORM_WIN32</CODE>
<LI>
<CODE>PATH_DELIMITER</CODE> => <CODE>CS_PATH_DELIMITER</CODE>
<LI>
<CODE>PATH_SEPARATOR</CODE> => <CODE>CS_PATH_SEPARATOR</CODE>
<LI>
<CODE>PROC_FOO</CODE> => <CODE>CS_PROCESSOR_FOO</CODE> (where `<SAMP>FOO</SAMP>' is
`<SAMP>X86</SAMP>', `<SAMP>M68K</SAMP>', etc.)
<LI>
<CODE>QInt()</CODE> => <CODE>csQint()</CODE>
<LI>
<CODE>QInt8()</CODE> => <CODE>csQint8()</CODE>
<LI>
<CODE>QInt16()</CODE> => <CODE>csQint16()</CODE>
<LI>
<CODE>QInt24()</CODE> => <CODE>csQint24()</CODE>
<LI>
<CODE>qisqrt()</CODE> => <CODE>csQisqrt()</CODE>
<LI>
<CODE>qsqrt()</CODE> => <CODE>csQsqrt()</CODE>
<LI>
<CODE>QRound()</CODE> => <CODE>csQround()</CODE>
<LI>
<CODE>TEMP_DIR</CODE> => <CODE>CS_TEMP_DIR</CODE>
<LI>
<CODE>TEMP_FILE</CODE> => <CODE>CS_TEMP_FILE</CODE>
<LI>
<CODE>UnMemoryMapFile()</CODE> => <CODE>csUnMemoryMapFile()</CODE>
<LI>
<CODE>WIN32_VOLATILE</CODE> => <CODE>CS_WIN32_CSCONFIG</CODE>
</UL>
<P>

<A NAME="SEC830"></A>
<H3> `<TT>cssysdef.h</TT>' Changes </H3>
<!--docid::SEC830::-->
<P>

The `<SAMP>CS_SYSDEF_PROVIDE_FACILITY</SAMP>' macros, which clients would
<CODE>#define</CODE> before including `<TT>cssysdef.h</TT>' in order to alter the
behavior of `<TT>cssysdef.h</TT>', have been removed. Retirement of these macros
eliminates the polymorphic behavior of `<TT>cssysdef.h</TT>', thus helping to pave
the way toward eventually pre-compiling Crystal Space's headers in order to
reduce overall compilation time.  In addition to removing these macros from
your code, the following table explains what else (if anything) needs to be
done to account for the removal.
</P><P>

<DL COMPACT>
<DT><CODE>CS_SYSDEF_PROVIDE_ACCESS</CODE>
<DD>No additional changes.
<DT><CODE>CS_SYSDEF_PROVIDE_ALLOCA</CODE>
<DD>Use the `<SAMP>CS_ALLOC_STACK_ARRAY()</SAMP>' macro, rather than <CODE>alloca()</CODE>.
<DT><CODE>CS_SYSDEF_PROVIDE_CASE</CODE>
<DD>No additional changes.
<DT><CODE>CS_SYSDEF_PROVIDE_DIR</CODE>
<DD>No additional changes.
<DT><CODE>CS_SYSDEF_PROVIDE_EXPAND_PATH</CODE>
<DD>No additional changes.
<DT><CODE>CS_SYSDEF_PROVIDE_GETCWD</CODE>
<DD>No additional changes.
<DT><CODE>CS_SYSDEF_PROVIDE_GETOPT</CODE>
<DD>Include `<TT>csutil/getopt.h</TT>'.
<DT><CODE>CS_SYSDEF_PROVIDE_MKDIR</CODE>
<DD>Use the `<SAMP>CS_MKDIR(path)</SAMP>' macro to create the directory, rather than the
obsolete `<SAMP>MKDIR()</SAMP>' macro.
<DT><CODE>CS_SYSDEF_PROVIDE_PATH</CODE>
<DD>No additional changes.
<DT><CODE>CS_SYSDEF_PROVIDE_SELECT</CODE>
<DD>No additional changes.
<DT><CODE>CS_SYSDEF_PROVIDE_SOCKETS</CODE>
<DD>Include `<TT>csutil/sockets.h</TT>'.
<DT><CODE>CS_SYSDEF_PROVIDE_SOFTWARE2D</CODE>
<DD>No additional changes.
<DT><CODE>CS_SYSDEF_PROVIDE_TEMP</CODE>
<DD>Use the `<SAMP>CS_TEMP_DIR</SAMP>' and `<SAMP>CS_TEMP_FILE</SAMP>' macros, rather than the
obsolete `<SAMP>TEMP_DIR</SAMP>' and `<SAMP>TEMP_FILE</SAMP>' macros.
<DT><CODE>CS_SYSDEF_PROVIDE_UNLINK</CODE>
<DD>No additional changes.
<DT><CODE>CS_SYSDEF_VFS_PROVIDE_CHECK_VAR</CODE>
<DD>No additional changes.
</DL>
<P>

The age-old restriction that `<TT>cssysdef.h</TT>' could be included only by source
files (`<TT>.cpp</TT>') has been lifted. This restriction was an unfortunate
side-effect of the polymorphic behavior of `<TT>cssysdef.h</TT>' in the presence
of various `<SAMP>CS_SYSDEF_PROVIDE_FACILITY</SAMP>' macros. It is now safe, even
recommended, to include `<TT>cssysdef.h</TT>' in header files (`<TT>.h</TT>'). Doing so
helps to make header files more self-contained, thus reducing the burden of
clients of those headers.
</P><P>

<A NAME="SEC831"></A>
<H3> Convenience Headers </H3>
<!--docid::SEC831::-->
<P>

For convenience, several top-level <EM>master header</EM> files have been added to
the project. These should simplify client usage by allowing users to choose the
level of granularity which suits them best.  The list of new header files
follows.
</P><P>

<DL COMPACT>
<DT><CODE>crystalspace.h</CODE>
<DD>Nearly all public headers in entire Crystal Space SDK.
<DT><CODE>csgeom.h</CODE>
<DD>Content of `<TT>CS/include/csgeom</TT>'.
<DT><CODE>csgfx.h</CODE>
<DD>Content of `<TT>CS/include/csgfx</TT>'.
<DT><CODE>cstool.h</CODE>
<DD>Content of `<TT>CS/include/cstool</TT>'.
<DT><CODE>csutil.h</CODE>
<DD>Content of `<TT>CS/include/csutil</TT>'.
<DT><CODE>csws.h</CODE>
<DD>Content of `<TT>CS/include/csws</TT>'.
<DT><CODE>iaws.h</CODE>
<DD>Content of `<TT>CS/include/iaws</TT>'.
<DT><CODE>iengine.h</CODE>
<DD>Content of `<TT>CS/include/iengine</TT>'.
<DT><CODE>igeom.h</CODE>
<DD>Content of `<TT>CS/include/igeom</TT>'.
<DT><CODE>igraphic.h</CODE>
<DD>Content of `<TT>CS/include/igraphic</TT>'.
<DT><CODE>imap.h</CODE>
<DD>Content of `<TT>CS/include/imap</TT>'.
<DT><CODE>imesh.h</CODE>
<DD>Content of `<TT>CS/include/imesh</TT>'.
<DT><CODE>inetwork.h</CODE>
<DD>Content of `<TT>CS/include/inetwork</TT>'.
<DT><CODE>isound.h</CODE>
<DD>Content of `<TT>CS/include/isound</TT>'.
<DT><CODE>itexture.h</CODE>
<DD>Content of `<TT>CS/include/itexture</TT>'.
<DT><CODE>iutil.h</CODE>
<DD>Content of `<TT>CS/include/iutil</TT>'.
<DT><CODE>ivaria.h</CODE>
<DD>Content of `<TT>CS/include/ivaria</TT>'.
<DT><CODE>ivideo.h</CODE>
<DD>Content of `<TT>CS/include/ivideo</TT>'.
</DL>
<P>

Users new to the SDK will probably want to include `<TT>crystalspace.h</TT>'
since it is simplest; whereas more advanced users may want to include
`<TT>csutil.h</TT>', `<TT>cstool.h</TT>', etc.; and power users can continue to include
only the individual headers required by a particular piece of code.
</P><P>

As a corollary, the old `<TT>CS/include/css.h</TT>' header, which included many,
though not all Crystal Space header files, has been removed. If you require
this type functionality from a header, then include the new
`<TT>crystalspace.h</TT>' instead.
</P><P>

Be aware that there is a very small set of public headers not included in any
of the master headers. These are omitted from the master headers because they
reference external resources which might not be known or available to all
clients of the master headers. Clients requiring these special-case headers
will need to include them manually, on an as-needed basis, and arrange that the
build system has sufficient knowledge about the external resources to satisfy
the dependencies at build time.  The list of headers which are excluded from
the master headers follows.
</P><P>

<DL COMPACT>
<DT><CODE>csutil/archive.h</CODE>
<DD>Requires zlib indirectly via `<TT>csutil/zip.h</TT>'.
<DT><CODE>csutil/zip.h</CODE>
<DD>Requires zlib; <A HREF="http://www.gzip.org/zlib/">http://www.gzip.org/zlib/</A>
<DT><CODE>inetwork/vosapi.h</CODE>
<DD>Requires VOS; <A HREF="http://www.interreality.org/">http://www.interreality.org/</A>
<DT><CODE>ivaria/ode.h</CODE>
<DD>Requires ODE; <A HREF="http://www.ode.org/">http://www.ode.org/</A>
<DT><CODE>ivideo/wxwin.h</CODE>
<DD>Requires wxWidgets; <A HREF="http://www.wxwidgets.org/">http://www.wxwidgets.org/</A>
</DL>
<P>

As an example, if you need access to the `<SAMP>iWxWindow</SAMP>' interface, then you
must include `<TT>ivideo/wxwin.h</TT>' manually; it will not be included as part of
`<TT>crystalspace.h</TT>' or `<TT>ivideo.h</TT>'. Furthermore, you will need
to let the build system know where it can find the wxWidgets resources (headers
and libraries). Typically, this is done by adding a wxWidgets check to your
project's `<TT>configure</TT>' script; emitting the results of the check to your
`<TT>Jamconfig</TT>' file with the <CODE>CS_EMIT_BUILD_RESULT()</CODE> Autoconf macro;
and finally utilizing the result of that check in your project's `<TT>Jamfile</TT>'
by invoking the Jam rule `<SAMP>ExternalLibs</SAMP>'. For MSVC project files, the
location of the wxWidgets resources will have to be added as <EM>additional
include directories</EM> and <EM>additional library directories</EM>, in the project
settings or globally, to ensure that MSVC will be able to find them.
</P><P>

<A NAME="SEC832"></A>
<H3> Procedural Texture Relocation </H3>
<!--docid::SEC832::-->
 
Implementations of the standard procedural textures (dots, fire, plasma, etc.)
now reside directly in the `<TT>stdpt</TT>' plugin
(`<TT>CS/plugins/proctex/standard</TT>'), rather than in the `<TT>cstool</TT>'
library. Consequently, the following previously public headers are no longer
available:
 
<UL>
<LI>
<CODE>cstool/prdots.h</CODE>
<LI>
<CODE>cstool/prfire.h</CODE>
<LI>
<CODE>cstool/prplasma.h</CODE>
<LI>
<CODE>cstool/prsky.h</CODE>
<LI>
<CODE>cstool/prwater.h</CODE>
</UL>
 
Likewise, procedural textures can no longer be created programmatically via,
for instance, `<SAMP>new csProcFire</SAMP>'.  Instead, you must now use the plugin
system to create such textures. For example:
 
<TABLE><tr><td>&nbsp;</td><td class=example><pre>csRef&#60;iPluginManager&#62; plugin_mgr(
  CS_QUERY_REGISTRY(object_reg, iPluginManager));
csRef&#60;iTextureType&#62; type(CS_QUERY_PLUGIN_CLASS (plugin_mgr,
  "crystalspace.texture.type.fire", iTextureType));
if (!type)
{
  type = CS_LOAD_PLUGIN(plugin_mgr,
    "crystalspace.texture.type.fire", iTextureType);
}
csRef&#60;iTextureFactory&#62; fireFact = type-&#62;NewFactory();
csRef&#60;iTextureWrapper&#62; tex = fireFact-&#62;Generate();
csRef&#60;iFireTexture&#62; fire = SCF_QUERY_INTERFACE(tex, iFireTexture);
</pre></td></tr></table> 
Various procedural textures may or may not implement their own custom SCF
interfaces beyond the normal interfaces implemented by all procedural
textures. In the example above, the "fire" texture implements the specialized
`<SAMP>iFireTexture</SAMP>'.
<P>

<A NAME="SEC833"></A>
<H3> Joystick Corrections </H3>
<!--docid::SEC833::-->
<P>

The implementation of `<SAMP>iJoystickDriver</SAMP>' has been fixed to treat joystick
numbers consistently. Previously, on account of buggy implementation, some
parts of the driver considered joystick numbers 0-based, while other parts
considered them 1-based.  It now uniformly treats joystick numbers as
1-based. This is consistent with button numbers for joysticks and mice, which
are also 1-based.
<A NAME="Release Notes 98"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_277.html#SEC822"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_279.html#SEC834"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_277.html#SEC822"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_277.html#SEC822"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC957"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC957">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
