<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: Release Notes 96</TITLE>

<META NAME="description" CONTENT="Crystal Space: Release Notes 96">
<META NAME="keywords" CONTENT="Crystal Space: Release Notes 96">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC888"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_280.html#SEC840"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_282.html#SEC903"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_278.html#SEC822"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_278.html#SEC822"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_287.html#SEC963"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_287.html#SEC963">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H2> C.3 Release Notes from 0.94 to 0.96 </H2>
<!--docid::SEC888::-->
<P>

This section documents the major changes between versions 0.94 and 0.96 of of
Crystal Space.
</P><P>

<A NAME="SEC889"></A>
<H3> Reference Counting Utilities </H3>
<!--docid::SEC889::-->
<P>

The new template class <CODE>csRef&#60;&#62;</CODE> automates reference count manipulation,
thus freeing programmers from the task of manipulating reference counts
manually.  When assigned, <CODE>csRef&#60;&#62;</CODE> increments the reference count of the
target object by invoking the object's <CODE>IncRef()</CODE> method.  When the
<CODE>csRef&#60;&#62;</CODE> is destroyed, or when it is re-assigned, it decrements the
object's reference count via <CODE>DecRef()</CODE>.  This frees clients from having
to invoke <CODE>IncRef()</CODE> and <CODE>DecRef()</CODE> manually, thus helping to
alleviate a potential source of resource leaks.  The companion template
<CODE>csPtr&#60;&#62;</CODE> has also been added as a micro-optimization for certain cases
when it is desirable to avoid reference count manipulation during assignment.
See the smart pointer HOWTO for additional information,
<A HREF="cs_111.html#SEC227">5.8.1 Correctly Using Smart Pointers</A>.  Also see the API documentation for
<CODE>csRef&#60;&#62;</CODE> and <CODE>csPtr&#60;&#62;</CODE>.
</P><P>

The Crystal Space API has been largely updated to return <CODE>csRef&#60;&#62;</CODE>
and <CODE>csPtr&#60;&#62;</CODE> from functions which transfer ownership of an object to the
caller of the function.  Client code which used to assign results of such
function calls to a normal pointer and invoke <CODE>IncRef()</CODE> on that pointer
should now instead simply assign the result to a <CODE>csRef&#60;&#62;</CODE>, and allow the
reference count to be managed automatically.  See the smart pointer HOWTO
for complete details.  See section <A HREF="cs_111.html#SEC227">5.8.1 Correctly Using Smart Pointers</A>.
</P><P>

<A NAME="SEC890"></A>
<H3> iPolygonMesh changes </H3>
<!--docid::SEC890::-->
<P>

The header for `<SAMP>iPolygonMesh</SAMP>' has moved from `<TT>include/ivaria</TT>'
to `<TT>include/igeom</TT>'.
</P><P>

<A NAME="SEC891"></A>
<H3> iMeshObject changes </H3>
<!--docid::SEC891::-->
<P>

The following functions have been removed:
</P><P>

<UL>
<LI>
<CODE>iMeshObject::GetShapeNumber()</CODE>
<LI>
<CODE>iMeshObject::GetObjectBoundingBox()</CODE>
<LI>
<CODE>iMeshObject::GetRadius()</CODE>
</UL>
<P>

Instead there is now a new routine called
<CODE>iMeshObject::GetObjectModel()</CODE> which will return an instance of
`<SAMP>iObjectModel</SAMP>'.  The functions can be called from that instance.
</P><P>

A similar change has taken place in the `<SAMP>iVisibilityObject</SAMP>' interface.
</P><P>

<A NAME="SEC892"></A>
<H3> XML </H3>
<!--docid::SEC892::-->
<P>

The map format has changed to XML. Use the `<TT>cs2xml</TT>' tool to
convert old maps like this (with a real path to a zip file):
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>  cs2xml data/oldlevel.zip
</pre></td></tr></table></P><P>

or (with a VFS path):
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>  cs2xml /this/mydata/sprite1
</pre></td></tr></table></P><P>

<A NAME="SEC893"></A>
<H3> csGetObject and csGetCommand </H3>
<!--docid::SEC893::-->
<P>

The old parser is gone. We switched to XML.
</P><P>

<A NAME="SEC894"></A>
<H3> Fast SCF Interfaces </H3>
<!--docid::SEC894::-->
<P>

The following macros have been removed:
</P><P>

<UL>
<LI>
<CODE>SCF_QUERY_INTERFACE_FAST</CODE>
<LI>
<CODE>CS_GET_CHILD_OBJECT_FAST</CODE>
<LI>
<CODE>CS_GET_NAMED_CHILD_OBJECT_FAST</CODE>
<LI>
<CODE>CS_GET_FIRST_NAMED_CHILD_OBJECT_FAST</CODE>
<LI>
<CODE>SCF_DECLARE_FAST_INTERFACE</CODE>
</UL>
<P>

Fast interfaces are now default. Just use the
normal query versions instead of the ones above.
</P><P>

<A NAME="SEC895"></A>
<H3> Internal SCF Changes </H3>
<!--docid::SEC895::-->
<P>

For Interfaces the <CODE>scfGetID_Interfacename</CODE> and the
<CODE>VERSION_Interfacename</CODE> have been renamed to
<CODE>Interfacename_scfGetID</CODE> and <CODE>Interfacename_VERSION</CODE> for making
namespaces working nicely with them.
</P><P>

<A NAME="SEC896"></A>
<H3> Make Targets </H3>
<!--docid::SEC896::-->
<P>

Some targets for the `<SAMP>make</SAMP>' facility (all applications, some plugins) have
changed.  In general, the name of a target is now the same as the name of the
resulting binary (without suffix).  For example, `<TT>walktest</TT>' is now built
with `<SAMP>make -k walktest</SAMP>' instead of `<SAMP>make -k walk</SAMP>'.  However, the
composite target names have not been changed.  To build `<TT>walktest</TT>' and all
required plugins, one still invokes `<SAMP>make -k walkall</SAMP>'.
</P><P>

<A NAME="SEC897"></A>
<H3> Sound Loader Changes </H3>
<!--docid::SEC897::-->
The <CODE>iLoader::LoadSound()</CODE> that returns an <CODE>iSoundWrapper</CODE>
now returns a pointer that has a reference count of one more compared
to before.
<P>

<A NAME="SEC898"></A>
<H3> iTextureManager Changes </H3>
<!--docid::SEC898::-->
<P>

The following methods have moved:
</P><P>

<UL>
<LI>
<CODE>iTextureManager::FindRGB()</CODE> => <CODE>iGraphics2D::FindRGB()</CODE>
</UL>
<P>

The following methods were eliminated:
</P><P>

<UL>
<LI>
<CODE>iTextureManager::SetPalette()</CODE>
<LI>
<CODE>iTextureManager::ResetPalette()</CODE>
<LI>
<CODE>iTextureManager::ReserveColor()</CODE>
</UL>
<P>

<A NAME="SEC899"></A>
<H3> Procedural Textures   </H3>
<!--docid::SEC899::-->
<P>

The procedural texture system has been rewritten. See the documentation for
<CODE>iGraphics3D::SetRenderTarget()</CODE> for details.
</P><P>

<A NAME="SEC900"></A>
<H3> Hardmove Change </H3>
<!--docid::SEC900::-->
<P>

The interpretation of the matrix used in the `<SAMP>hardmove</SAMP>' tag
for mesh factories (`<SAMP>meshfact</SAMP>') has been inverted so it is more
logical and also corresponds with the wah `<SAMP>hardmove</SAMP>' is interpreted
for mesh objects (`<SAMP>meshobj</SAMP>').
</P><P>

<A NAME="SEC901"></A>
<H3> Octree Removal </H3>
<!--docid::SEC901::-->
<P>

The old octree culler is now completely gone. Instead you should use
<EM>Dynavis</EM> now. If you still have an old level that uses this culler
then you can try to convert it using the `<TT>levtool</TT>' utility but this
is only a temporary measure. It is a lot better to design the level with
<EM>Dynavis</EM> in mind. To convert an old level do this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>  levtool -dynavis old_level.zip
</pre></td></tr></table></P><P>

Note that the statements `<SAMP>culler</SAMP>' and `<SAMP>vistree</SAMP>' are no longer
supported in world files. The loader will give an error if it finds them.
</P><P>

<A NAME="SEC902"></A>
<H3> Typed Vectors </H3>
<!--docid::SEC902::-->
<P>

All the macro versions of the growing arrays and vectors have been removed
and replaced with corresponding templated arrays (see section <A HREF="cs_136.html#SEC356">6.1 Utility Library (<CODE>csUtil</CODE>)</A>).  For
example, the following macros and all derivatives have been removed:
</P><P>

<UL>
<LI>
<CODE>CS_DECLARE_TYPED_VECTOR</CODE>
<LI>
<CODE>CS_DECLARE_OBJECT_VECTOR</CODE>
<LI>
<CODE>CS_DECLARE_GROWING_ARRAY</CODE>
</UL>
<A NAME="Release Notes 94"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_280.html#SEC840"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_282.html#SEC903"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_278.html#SEC822"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_278.html#SEC822"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_287.html#SEC963"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_287.html#SEC963">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
