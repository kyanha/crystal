<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Crystal Space: iCacheManager Struct Reference (Crystal Space Public API Reference)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<table border="0" cellpadding="0" cellspacing="0" width="100%" class="head">
 <tr heigth="59">
  <td class="head" width="202" valign="bottom" style="padding-left:0;"><a href="http://www.crystalspace3d.org/"><img src="csblur.png" width="236" height="59" alt="CrystalSpace" border="0"></a></td>
  <td class="head"><h2>Public API Reference</h2></td>
 </tr>
 <tr heigth="11">
  <td colspan="2" class="headshadow" valign="top" style="padding-left:0;"><img src="csblurb.png" width="236" height="11" alt="" border="0"></td>
 </tr>
</table>
<div class="content">
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>iCacheManager Struct Reference</h1><!-- doxytag: class="iCacheManager" --><!-- doxytag: inherits="iBase" -->A generic cache system.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="cache_8h-source.html">iutil/cache.h</a>&gt;</code>
<p>
Inheritance diagram for iCacheManager:<p><center><img src="structiCacheManager__inherit__graph.png" border="0" usemap="#iCacheManager__inherit__map" alt="Inheritance graph"></center>
<map name="iCacheManager__inherit__map">
<area href="classscfImplementation1.html" shape="rect" coords="8,158,397,182" alt="">
<area href="classscfImplementation1.html" shape="rect" coords="421,158,808,182" alt="">
<area href="structiBase.html" shape="rect" coords="380,9,436,33" alt="">
<area href="classcsNullCacheManager.html" shape="rect" coords="128,233,277,257" alt="">
<area href="classcsVfsCacheManager.html" shape="rect" coords="541,233,688,257" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="structiCacheManager-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiCacheManager.html#a0">CacheData</a> (const void *data, size_t size, const char *type, const char *scope, <a class="el" href="cstypes_8h.html#a13">uint32</a> id)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cache some data.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiCacheManager.html#a1">ClearCache</a> (const char *type=0, const char *scope=0, const <a class="el" href="cstypes_8h.html#a13">uint32</a> *id=0)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clear items from the cache.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiCacheManager.html#a2">Flush</a> ()=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ensure that the cached data is written on whatever medium is behind the cache.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiCacheManager.html#a3">GetCurrentScope</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get current scope or 0 if none set.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiCacheManager.html#a4">GetCurrentType</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get current type or 0 if none set.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiCacheManager.html#a5">IsReadOnly</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is the cache manager read-only?  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classcsPtr.html">csPtr</a>&lt; <a class="el" href="structiDataBuffer.html">iDataBuffer</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiCacheManager.html#a6">ReadCache</a> (const char *type, const char *scope, <a class="el" href="cstypes_8h.html#a13">uint32</a> id)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve some data from the cache.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiCacheManager.html#a8">SetCurrentScope</a> (const char *scope)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set current scope.  <a href="#a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiCacheManager.html#a9">SetCurrentType</a> (const char *type)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set current type.  <a href="#a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiCacheManager.html#a10">SetReadOnly</a> (bool ro)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Force the cache manager to be read-only.  <a href="#a10"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A generic cache system. 
<p>
A client can use this to cache data that was hard to calculate. The data is not converted in any way so it is the responsability of the client to correct platform depending issues like endianess and structure padding. <p>
Every item in a cache has a 'type', a 'scope', and a unique id. The 'type' can be something like 'lightmap', 'octree', ... The 'scope' can be something like 'myRegion_mySector', ... The 'id' is a unique ID for the cached item in the given type and scope. ~0 can be taken for the cases "no ID" or "ID unused". Avoid using '/' and '\' characters in both type and scope as this may cause conflicts with the given cache (if it caches on a file system for example). <p>
Note that both 'type' and 'scope' can be made default using <a class="el" href="structiCacheManager.html#a9">SetCurrentType()</a> and <a class="el" href="structiCacheManager.html#a8">SetCurrentScope()</a>. If those are set then you can use 0 for type and/or scope in <a class="el" href="structiCacheManager.html#a0">CacheData()</a> and <a class="el" href="structiCacheManager.html#a6">ReadCache()</a>. If you don't use 0 then the given value will override the default values.
<p>

<p>
Definition at line <a class="el" href="cache_8h-source.html#l00052">52</a> of file <a class="el" href="cache_8h-source.html">cache.h</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a0"></a><!-- doxytag: member="iCacheManager::CacheData" ref="a0" args="(const void *data, size_t size, const char *type, const char *scope, uint32 id)=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual bool iCacheManager::CacheData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>scope</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="cstypes_8h.html#a13">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Cache some data. 
<p>
Returns true if this succeeded.
<p>
Implemented in <a class="el" href="classcsNullCacheManager.html#a0">csNullCacheManager</a>, and <a class="el" href="classcsVfsCacheManager.html#a0">csVfsCacheManager</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1"></a><!-- doxytag: member="iCacheManager::ClearCache" ref="a1" args="(const char *type=0, const char *scope=0, const uint32 *id=0)=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual bool iCacheManager::ClearCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>scope</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="cstypes_8h.html#a13">uint32</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em> = <code>0</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Clear items from the cache. 
<p>
There are four ways to call this function:<ul>
<li>0, 0, 0: clear entire cache.</li><li>'type', 0, 0: clear everything of this type.</li><li>'type', 'scope', 0: clear everything of this type and scope.</li><li>'type', 'scope', id: clear the specific item.</li></ul>
<p>
Returns true if items were deleted. Returns false if item was not found or deletion is not possible.
<p>
Implemented in <a class="el" href="classcsNullCacheManager.html#a1">csNullCacheManager</a>, and <a class="el" href="classcsVfsCacheManager.html#a1">csVfsCacheManager</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2"></a><!-- doxytag: member="iCacheManager::Flush" ref="a2" args="()=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void iCacheManager::Flush           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Ensure that the cached data is written on whatever medium is behind the cache. 
<p>

<p>
Implemented in <a class="el" href="classcsNullCacheManager.html#a3">csNullCacheManager</a>, and <a class="el" href="classcsVfsCacheManager.html#a3">csVfsCacheManager</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3"></a><!-- doxytag: member="iCacheManager::GetCurrentScope" ref="a3" args="() const =0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual const char* iCacheManager::GetCurrentScope           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get current scope or 0 if none set. 
<p>

<p>
Implemented in <a class="el" href="classcsNullCacheManager.html#a4">csNullCacheManager</a>, and <a class="el" href="classcsVfsCacheManager.html#a4">csVfsCacheManager</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4"></a><!-- doxytag: member="iCacheManager::GetCurrentType" ref="a4" args="() const =0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual const char* iCacheManager::GetCurrentType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get current type or 0 if none set. 
<p>

<p>
Implemented in <a class="el" href="classcsNullCacheManager.html#a5">csNullCacheManager</a>, and <a class="el" href="classcsVfsCacheManager.html#a5">csVfsCacheManager</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5"></a><!-- doxytag: member="iCacheManager::IsReadOnly" ref="a5" args="() const =0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual bool iCacheManager::IsReadOnly           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Is the cache manager read-only? 
<p>

<p>
Implemented in <a class="el" href="classcsNullCacheManager.html#a6">csNullCacheManager</a>, and <a class="el" href="classcsVfsCacheManager.html#a6">csVfsCacheManager</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6"></a><!-- doxytag: member="iCacheManager::ReadCache" ref="a6" args="(const char *type, const char *scope, uint32 id)=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual <a class="el" href="classcsPtr.html">csPtr</a>&lt;<a class="el" href="structiDataBuffer.html">iDataBuffer</a>&gt; iCacheManager::ReadCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>scope</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="cstypes_8h.html#a13">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve some data from the cache. 
<p>
Returns 0 if the data could not be found in the cache. <dl compact><dt><b>Remarks:</b></dt><dd>Returned buffer is NOT null-terminated. <p>
Don't modify returned buffer!</dd></dl>

<p>
Implemented in <a class="el" href="classcsNullCacheManager.html#a7">csNullCacheManager</a>, and <a class="el" href="classcsVfsCacheManager.html#a7">csVfsCacheManager</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8"></a><!-- doxytag: member="iCacheManager::SetCurrentScope" ref="a8" args="(const char *scope)=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void iCacheManager::SetCurrentScope           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>scope</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set current scope. 
<p>
This will be used in <a class="el" href="structiCacheManager.html#a0">CacheData()</a> and <a class="el" href="structiCacheManager.html#a6">ReadCache()</a> when the given 'scope' there is 0.
<p>
Implemented in <a class="el" href="classcsNullCacheManager.html#a8">csNullCacheManager</a>, and <a class="el" href="classcsVfsCacheManager.html#a8">csVfsCacheManager</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9"></a><!-- doxytag: member="iCacheManager::SetCurrentType" ref="a9" args="(const char *type)=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void iCacheManager::SetCurrentType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>type</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set current type. 
<p>
This will be used in <a class="el" href="structiCacheManager.html#a0">CacheData()</a> and <a class="el" href="structiCacheManager.html#a6">ReadCache()</a> when the given 'type' there is 0.
<p>
Implemented in <a class="el" href="classcsNullCacheManager.html#a9">csNullCacheManager</a>, and <a class="el" href="classcsVfsCacheManager.html#a9">csVfsCacheManager</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a10"></a><!-- doxytag: member="iCacheManager::SetReadOnly" ref="a10" args="(bool ro)=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void iCacheManager::SetReadOnly           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ro</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Force the cache manager to be read-only. 
<p>
This will prevent updates of the cache but <a class="el" href="structiCacheManager.html#a0">CacheData()</a> will still return true to indicate success.
<p>
Implemented in <a class="el" href="classcsNullCacheManager.html#a10">csNullCacheManager</a>, and <a class="el" href="classcsVfsCacheManager.html#a10">csVfsCacheManager</a>.    </td>
  </tr>
</table>
<hr>The documentation for this struct was generated from the following file:<ul>
<li>iutil/<a class="el" href="cache_8h-source.html">cache.h</a></ul>
<hr size="1"><address><small>Generated for Crystal Space by 
<a href="http://www.doxygen.org/index.html">doxygen</a> 1.4.4 
</small></address> </div></body> </html>
