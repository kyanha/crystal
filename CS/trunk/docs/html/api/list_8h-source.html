<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>csutil/list.h Source File (Crystal Space Public API Reference)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<table border="0" cellpadding="0" cellspacing="0" width="100%" class="head">
 <tr heigth="59">
  <td class="head" width="202" valign="bottom" style="padding-left:0;"><a href="http://crystal.sourceforge.net/"><img src="csblur.png" width="236" height="59" alt="CrystalSpace" border="0"></a></td>
  <td class="head"><h2>Public API Reference</h2></td>
 </tr>
 <tr heigth="11">
  <td colspan="2" class="headshadow" valign="top" style="padding-left:0;"><img src="csblurb.png" width="236" height="11" alt="" border="0"></td>
 </tr>
</table>
<div class="content">
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>csutil/list.h</h1><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment">    Copyright (C) 2003 by Marten Svanfeldt</span>
00003 <span class="comment">    influenced by Aapl by Adrian Thurston &lt;adriant@ragel.ca&gt;</span>
00004 <span class="comment"></span>
00005 <span class="comment">    This program is free software; you can redistribute it and/or modify</span>
00006 <span class="comment">    it under the terms of the GNU General Public License as published by</span>
00007 <span class="comment">    the Free Software Foundation; either version 2 of the License, or</span>
00008 <span class="comment">    (at your option) any later version.</span>
00009 <span class="comment"></span>
00010 <span class="comment">    This program is distributed in the hope that it will be useful,</span>
00011 <span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00012 <span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00013 <span class="comment">    GNU General Public License for more details.</span>
00014 <span class="comment"></span>
00015 <span class="comment">    You should have received a copy of the GNU General Public License</span>
00016 <span class="comment">    along with this program; if not, write to the Free Software</span>
00017 <span class="comment">    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
00018 <span class="comment">*/</span>
00019 
00020 <span class="preprocessor">#ifndef __CS_UTIL_LIST_H__</span>
00021 <span class="preprocessor"></span><span class="preprocessor">#define __CS_UTIL_LIST_H__</span>
00022 <span class="preprocessor"></span>
00023 <span class="preprocessor">#include "csextern.h"</span>
00024 
00030 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00031"></a><a class="code" href="classcsList.html">00031</a> <span class="keyword">class </span><a class="code" href="classcsList.html">csList</a>
00032 {
00033 <span class="keyword">protected</span>:
<a name="l00038"></a><a class="code" href="structcsList_1_1csListElement.html">00038</a>   <span class="keyword">struct </span><a class="code" href="structcsList_1_1csListElement.html">csListElement</a>
00039   {
<a name="l00041"></a><a class="code" href="structcsList_1_1csListElement.html#a0">00041</a>     <a class="code" href="structcsList_1_1csListElement.html#a0">csListElement</a>(<span class="keyword">const</span> T&amp; d, <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* newnext,
00042                               <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* newprev)
00043       : <a class="code" href="structcsList_1_1csListElement.html#m0">next</a>(newnext), <a class="code" href="structcsList_1_1csListElement.html#m1">prev</a>(newprev), <a class="code" href="structcsList_1_1csListElement.html#m2">data</a>(d)
00044     {}
00045 
<a name="l00047"></a><a class="code" href="structcsList_1_1csListElement.html#m0">00047</a>     <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* <a class="code" href="structcsList_1_1csListElement.html#m0">next</a>;
00048 
<a name="l00050"></a><a class="code" href="structcsList_1_1csListElement.html#m1">00050</a>     <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* <a class="code" href="structcsList_1_1csListElement.html#m1">prev</a>;
00051 
<a name="l00053"></a><a class="code" href="structcsList_1_1csListElement.html#m2">00053</a>     T <a class="code" href="structcsList_1_1csListElement.html#m2">data</a>;
00054   };
00055 
00057   <span class="keywordtype">void</span> <a class="code" href="classcsList.html#b0">Delete</a> (csListElement *el);
00058 
00059 <span class="keyword">public</span>:
<a name="l00061"></a><a class="code" href="classcsList.html#a0">00061</a>   <a class="code" href="classcsList.html#a0">csList</a>()
00062     : head(0), tail(0)
00063   {}
00064 
00066   <a class="code" href="classcsList.html#a0">csList</a>(<span class="keyword">const</span> <a class="code" href="classcsList.html">csList</a> &amp;other);
00067 
<a name="l00069"></a><a class="code" href="classcsList.html#a2">00069</a>   <a class="code" href="classcsList.html#a2">~csList</a>()
00070   { <a class="code" href="classcsList.html#a9">DeleteAll</a> (); }
00071 
<a name="l00073"></a><a class="code" href="classcsList_1_1Iterator.html">00073</a>   <span class="keyword">class </span><a class="code" href="classcsList_1_1Iterator.html">Iterator</a>
00074   {
00075   <span class="keyword">public</span>:
<a name="l00077"></a><a class="code" href="classcsList_1_1Iterator.html#a0">00077</a>     <a class="code" href="classcsList_1_1Iterator.html#a0">Iterator</a>() : ptr(0)
00078     { }
<a name="l00080"></a><a class="code" href="classcsList_1_1Iterator.html#a1">00080</a>     <a class="code" href="classcsList_1_1Iterator.html#a0">Iterator</a>(<span class="keyword">const</span> <a class="code" href="classcsList_1_1Iterator.html">Iterator</a>&amp; other)
00081     { ptr = other.<a class="code" href="classcsList_1_1Iterator.html#o0">ptr</a>; }
<a name="l00083"></a><a class="code" href="classcsList_1_1Iterator.html#a2">00083</a>     <a class="code" href="classcsList_1_1Iterator.html#a0">Iterator</a>(<span class="keyword">const</span> <a class="code" href="classcsList.html">csList&lt;T&gt;</a> &amp;list, <span class="keywordtype">bool</span> reverse = <span class="keyword">false</span>)
00084     {
00085       reversed = reverse;
00086       <span class="keywordflow">if</span> (reverse) ptr = list.<a class="code" href="classcsList.html#o1">tail</a>;
00087       <span class="keywordflow">else</span> ptr = list.<a class="code" href="classcsList.html#o0">head</a>;
00088     }
<a name="l00090"></a><a class="code" href="classcsList_1_1Iterator.html#a3">00090</a>     <span class="keyword">const</span> <a class="code" href="classcsList_1_1Iterator.html">Iterator</a>&amp; <a class="code" href="classcsList_1_1Iterator.html#a3">operator= </a>(<span class="keyword">const</span> <a class="code" href="classcsList_1_1Iterator.html">Iterator</a>&amp; other)
00091     { ptr = other.<a class="code" href="classcsList_1_1Iterator.html#o0">ptr</a>; <span class="keywordflow">return</span> *<span class="keyword">this</span>; }
<a name="l00093"></a><a class="code" href="classcsList_1_1Iterator.html#a4">00093</a>     <span class="keywordtype">bool</span> <a class="code" href="classcsList_1_1Iterator.html#a4">HasCurrent</a>()<span class="keyword"> const</span>
00094 <span class="keyword">    </span>{ <span class="keywordflow">return</span> ptr != 0; }
<a name="l00096"></a><a class="code" href="classcsList_1_1Iterator.html#a5">00096</a>     <span class="keywordtype">bool</span> <a class="code" href="classcsList_1_1Iterator.html#a5">HasNext</a>()<span class="keyword"> const</span>
00097 <span class="keyword">    </span>{ <span class="keywordflow">return</span> ptr &amp;&amp; ptr-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>; }
<a name="l00099"></a><a class="code" href="classcsList_1_1Iterator.html#a6">00099</a>     <span class="keywordtype">bool</span> <a class="code" href="classcsList_1_1Iterator.html#a6">HasPrevious</a>()<span class="keyword"> const</span>
00100 <span class="keyword">    </span>{ <span class="keywordflow">return</span> ptr &amp;&amp; ptr-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a>; }
<a name="l00102"></a><a class="code" href="classcsList_1_1Iterator.html#a7">00102</a>     <span class="keywordtype">bool</span> <a class="code" href="classcsList_1_1Iterator.html#a7">IsFirst</a>()<span class="keyword"> const</span>
00103 <span class="keyword">    </span>{ <span class="keywordflow">return</span> ptr &amp;&amp; ptr-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a> == 0; }
<a name="l00105"></a><a class="code" href="classcsList_1_1Iterator.html#a8">00105</a>     <span class="keywordtype">bool</span> <a class="code" href="classcsList_1_1Iterator.html#a8">IsLast</a>()<span class="keyword"> const</span>
00106 <span class="keyword">    </span>{ <span class="keywordflow">return</span> ptr &amp;&amp; ptr-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a> == 0; }
<a name="l00108"></a><a class="code" href="classcsList_1_1Iterator.html#a9">00108</a>     <span class="keywordtype">bool</span> <a class="code" href="classcsList_1_1Iterator.html#a9">IsReverse</a>()<span class="keyword"> const</span>
00109 <span class="keyword">    </span>{ <span class="keywordflow">return</span> reversed; }
00110 
<a name="l00112"></a><a class="code" href="classcsList_1_1Iterator.html#a10">00112</a>     <a class="code" href="classcsList_1_1Iterator.html#a10">operator T*</a>()<span class="keyword"> const</span>
00113 <span class="keyword">    </span>{ <span class="keywordflow">return</span> &amp;ptr-&gt;<a class="code" href="structcsList_1_1csListElement.html#m2">data</a>; }
<a name="l00115"></a><a class="code" href="classcsList_1_1Iterator.html#a11">00115</a>     T &amp;<a class="code" href="classcsList_1_1Iterator.html#a11">operator *</a>()<span class="keyword"> const</span>
00116 <span class="keyword">    </span>{ <span class="keywordflow">return</span> ptr-&gt;<a class="code" href="structcsList_1_1csListElement.html#m2">data</a>; }
<a name="l00118"></a><a class="code" href="classcsList_1_1Iterator.html#a12">00118</a>     T *<a class="code" href="classcsList_1_1Iterator.html#a12">operator-&gt;</a>()<span class="keyword"> const</span>
00119 <span class="keyword">    </span>{ <span class="keywordflow">return</span> &amp;ptr-&gt;<a class="code" href="structcsList_1_1csListElement.html#m2">data</a>; }
00120 
<a name="l00122"></a><a class="code" href="classcsList_1_1Iterator.html#a13">00122</a>     <span class="keywordtype">void</span> <a class="code" href="classcsList_1_1Iterator.html#a13">Clear</a> ()
00123     {
00124       ptr = 0;
00125     }
<a name="l00127"></a><a class="code" href="classcsList_1_1Iterator.html#a14">00127</a>     T* <a class="code" href="classcsList_1_1Iterator.html#a14">Next</a> ()
00128     {
00129       T* rc = *<span class="keyword">this</span>;
00130       ptr = ptr-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>;
00131       <span class="keywordflow">return</span> rc;
00132     }
<a name="l00134"></a><a class="code" href="classcsList_1_1Iterator.html#a15">00134</a>     T* <a class="code" href="classcsList_1_1Iterator.html#a15">Prev</a>()
00135     {
00136       T* rc = *<span class="keyword">this</span>;
00137       ptr = ptr-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a>;
00138       <span class="keywordflow">return</span> rc;
00139     }
<a name="l00141"></a><a class="code" href="classcsList_1_1Iterator.html#a16">00141</a>     <a class="code" href="classcsList_1_1Iterator.html">Iterator</a>&amp; <a class="code" href="classcsList_1_1Iterator.html#a16">operator++</a>()
00142     {
00143       T* rc = *<span class="keyword">this</span>;
00144       ptr = ptr-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>;
00145       <span class="keywordflow">return</span> rc;
00146     }
<a name="l00148"></a><a class="code" href="classcsList_1_1Iterator.html#a17">00148</a>     <a class="code" href="classcsList_1_1Iterator.html">Iterator</a>&amp; <a class="code" href="classcsList_1_1Iterator.html#a17">operator--</a>()
00149     {
00150       T* rc = *<span class="keyword">this</span>;
00151       ptr = ptr-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a>;
00152       <span class="keywordflow">return</span> rc;
00153     }
00154   <span class="keyword">protected</span>:
00155     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classcsList.html">csList</a>&lt;T&gt;;
00156     <a class="code" href="classcsList_1_1Iterator.html#a0">Iterator</a> (csListElement* element) : ptr(element)
00157     {}
00158 
00159   <span class="keyword">private</span>:
00160     csListElement* ptr;
00161     <span class="keywordtype">bool</span> reversed;
00162   };
00163 
00165   <a class="code" href="classcsList.html">csList</a> &amp;<a class="code" href="classcsList.html#a3">operator=</a>(<span class="keyword">const</span> <a class="code" href="classcsList.html">csList</a>&amp; other);
00166 
00168   Iterator <a class="code" href="classcsList.html#a4">PushFront</a> (<span class="keyword">const</span> T &amp; item);
00169 
00171   Iterator <a class="code" href="classcsList.html#a5">PushBack</a> (<span class="keyword">const</span> T &amp; item);
00172 
00174   <span class="keywordtype">void</span> <a class="code" href="classcsList.html#a6">InsertBefore</a>(Iterator &amp;it, <span class="keyword">const</span> T &amp; item);
00175 
00177   <span class="keywordtype">void</span> <a class="code" href="classcsList.html#a7">InsertAfter</a>(Iterator &amp;it, <span class="keyword">const</span> T &amp; item);
00178 
00180   <span class="keywordtype">void</span> <a class="code" href="classcsList.html#b0">Delete</a> (Iterator &amp;it);
00181 
00183   <span class="keywordtype">void</span> <a class="code" href="classcsList.html#a9">DeleteAll</a>();
00184 
<a name="l00186"></a><a class="code" href="classcsList.html#a10">00186</a>   <span class="keyword">const</span> T&amp; <a class="code" href="classcsList.html#a10">Front</a> ()<span class="keyword"> const</span>
00187 <span class="keyword">  </span>{ <span class="keywordflow">return</span> head-&gt;<a class="code" href="structcsList_1_1csListElement.html#m2">data</a>; }
<a name="l00189"></a><a class="code" href="classcsList.html#a11">00189</a>   <span class="keyword">const</span> T&amp; <a class="code" href="classcsList.html#a11">Last</a> ()<span class="keyword"> const</span>
00190 <span class="keyword">  </span>{ <span class="keywordflow">return</span> tail-&gt;<a class="code" href="structcsList_1_1csListElement.html#m2">data</a>; }
00191 
<a name="l00193"></a><a class="code" href="classcsList.html#a12">00193</a>   <span class="keywordtype">bool</span> <a class="code" href="classcsList.html#a12">PopFront</a> ()
00194   {
00195     <span class="keywordflow">if</span> (!head)
00196       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00197     <a class="code" href="classcsList.html#b0">Delete</a> (head);
00198     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00199   }
00200 
<a name="l00202"></a><a class="code" href="classcsList.html#a13">00202</a>   <span class="keywordtype">bool</span> <a class="code" href="classcsList.html#a13">PopBack</a> ()
00203   {
00204     <span class="keywordflow">if</span> (!tail)
00205       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00206     <a class="code" href="classcsList.html#b0">Delete</a> (tail);
00207     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00208   }
00209 
00210 <span class="keyword">private</span>:
00211   <span class="keyword">friend</span> <span class="keyword">class </span>Iterator;
00212   csListElement *head, *tail;
00213 };
00214 
00216 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00217"></a><a class="code" href="classcsList.html#a1">00217</a> <span class="keyword">inline</span> <a class="code" href="classcsList.html#a0">csList&lt;T&gt;::csList</a>(<span class="keyword">const</span> <a class="code" href="classcsList.html">csList&lt;T&gt;</a> &amp;other) : head(0), tail(0)
00218 {
00219   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* e = other.head;
00220   <span class="keywordflow">while</span>( e != 0)
00221   {
00222     <a class="code" href="classcsList.html#a5">PushBack</a> (e-&gt;<a class="code" href="structcsList_1_1csListElement.html#m2">data</a>);
00223     e = e-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>;
00224   }
00225 }
00226 
00228 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00229"></a><a class="code" href="classcsList.html#a3">00229</a> <span class="keyword">inline</span> <a class="code" href="classcsList.html">csList&lt;T&gt;</a>&amp; <a class="code" href="classcsList.html#a3">csList&lt;T&gt;::operator= </a>(<span class="keyword">const</span> <a class="code" href="classcsList.html">csList&lt;T&gt;</a> &amp;other)
00230 {
00231   <a class="code" href="classcsList.html#a9">DeleteAll</a> ();
00232   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* e = other.<a class="code" href="classcsList.html#o0">head</a>;
00233   <span class="keywordflow">while</span>(e != 0)
00234   {
00235     <a class="code" href="classcsList.html#a5">PushBack</a> (e-&gt;<a class="code" href="structcsList_1_1csListElement.html#m2">data</a>);
00236     e = e-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>;
00237   }
00238   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00239 }
00240 
00242 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00243"></a><a class="code" href="classcsList.html#a9">00243</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classcsList.html#a9">csList&lt;T&gt;::DeleteAll</a> ()
00244 {
00245   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a> *cur = head, *next = 0;
00246   <span class="keywordflow">while</span>(cur != 0)
00247   {
00248     next = cur-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>;
00249     <span class="keyword">delete</span> cur;
00250     cur = next;
00251   }
00252   head = tail = 0;
00253 }
00254 
00256 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00257"></a><a class="code" href="classcsList.html#a5">00257</a> <span class="keyword">inline</span> <span class="keyword">typename</span> <a class="code" href="classcsList.html">csList&lt;T&gt;</a>::Iterator <a class="code" href="classcsList.html#a5">csList&lt;T&gt;::PushBack</a> (<span class="keyword">const</span> T&amp; item)
00258 {
00259   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* el = <span class="keyword">new</span> <a class="code" href="structcsList_1_1csListElement.html">csListElement</a> (item, 0, tail);
00260   <span class="keywordflow">if</span> (tail)
00261     tail-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a> = el;
00262   <span class="keywordflow">else</span>
00263     head = el;
00264   tail = el;
00265   <span class="keywordflow">return</span> <a class="code" href="classcsList_1_1Iterator.html">Iterator</a>(el);
00266 }
00267 
00269 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00270"></a><a class="code" href="classcsList.html#a4">00270</a> <span class="keyword">inline</span> <span class="keyword">typename</span> <a class="code" href="classcsList.html">csList&lt;T&gt;</a>::Iterator <a class="code" href="classcsList.html#a4">csList&lt;T&gt;::PushFront</a> (<span class="keyword">const</span> T&amp; item)
00271 {
00272   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* el = <span class="keyword">new</span> <a class="code" href="structcsList_1_1csListElement.html">csListElement</a> (item, head, 0);
00273   <span class="keywordflow">if</span> (head)
00274     head-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a> = el;
00275   <span class="keywordflow">else</span>
00276     tail = el;
00277   head = el;
00278   <span class="keywordflow">return</span> <a class="code" href="classcsList_1_1Iterator.html">Iterator</a> (el);
00279 }
00280 
00281 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00282"></a><a class="code" href="classcsList.html#a6">00282</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classcsList.html#a6">csList&lt;T&gt;::InsertBefore</a> (<a class="code" href="classcsList_1_1Iterator.html">Iterator</a> &amp;it, <span class="keyword">const</span> T&amp; item)
00283 {
00284   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* el = it.<a class="code" href="classcsList_1_1Iterator.html#o0">ptr</a>;
00285   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* next = el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>;
00286   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* prev = el;
00287   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* newEl = <span class="keyword">new</span> <a class="code" href="structcsList_1_1csListElement.html">csListElement</a> (item, next, prev);
00288   <span class="keywordflow">if</span> (!next) <span class="comment">// this is the last element</span>
00289     tail = newEl;
00290   <span class="keywordflow">else</span>
00291     el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a> = newEl;
00292   el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a> = newEl;
00293 }
00294 
00295 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00296"></a><a class="code" href="classcsList.html#a7">00296</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classcsList.html#a7">csList&lt;T&gt;::InsertAfter</a> (<a class="code" href="classcsList_1_1Iterator.html">Iterator</a> &amp;it, <span class="keyword">const</span> T&amp; item)
00297 {
00298   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* el = it.<a class="code" href="classcsList_1_1Iterator.html#o0">ptr</a>;
00299   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* next = el;
00300   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* prev = el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a>;
00301   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* newEl = <span class="keyword">new</span> <a class="code" href="structcsList_1_1csListElement.html">csListElement</a> (item, next, prev);
00302   <span class="keywordflow">if</span> (!prev) <span class="comment">// this is the first element</span>
00303     head = newEl;
00304   <span class="keywordflow">else</span>
00305     el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a>-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a> = newEl;
00306   el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a> = newEl;
00307 }
00308 
00309 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00310"></a><a class="code" href="classcsList.html#a8">00310</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classcsList.html#b0">csList&lt;T&gt;::Delete</a> (<a class="code" href="classcsList_1_1Iterator.html">Iterator</a> &amp;it)
00311 {
00312   <a class="code" href="structcsList_1_1csListElement.html">csListElement</a>* el = it.<a class="code" href="classcsList_1_1Iterator.html#o0">ptr</a>;
00313   <span class="keywordflow">if</span> (!el)
00314     <span class="keywordflow">return</span>;
00315 
00316   <span class="comment">// Advance the iterator so we can delete the data its using</span>
00317   <span class="keywordflow">if</span> (it.<a class="code" href="classcsList_1_1Iterator.html#a9">IsReverse</a>())
00318       --it;
00319   <span class="keywordflow">else</span>
00320       ++it;
00321 
00322   <a class="code" href="classcsList.html#b0">Delete</a>(el);
00323 }
00324 
00325 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00326"></a><a class="code" href="classcsList.html#b0">00326</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classcsList.html#b0">csList&lt;T&gt;::Delete</a> (<a class="code" href="structcsList_1_1csListElement.html">csListElement</a> *el)
00327 {
00328   CS_ASSERT(el);
00329 
00330   <span class="comment">// Fix the pointers of the 2 surrounding elements</span>
00331   <span class="keywordflow">if</span> (el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a>)
00332     el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a>-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a> = el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>;
00333   <span class="keywordflow">else</span>
00334     head = el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>;
00335 
00336   <span class="keywordflow">if</span> (el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>)
00337     el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m0">next</a>-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a> = el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a>;
00338   <span class="keywordflow">else</span>
00339     tail = el-&gt;<a class="code" href="structcsList_1_1csListElement.html#m1">prev</a>;
00340 
00341   <span class="keyword">delete</span> el;
00342 }
00343 
00344 <span class="preprocessor">#endif //__CS_UTIL_LIST_H__</span>
</pre></div><hr><address><small>Generated for Crystal Space by 
<a href="http://www.doxygen.org/index.html">doxygen</a> 1.2.18 
</small></address> </div></body> </html>
