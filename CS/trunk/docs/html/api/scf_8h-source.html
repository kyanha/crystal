<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Crystal Space: csutil/scf.h Source File (Crystal Space Public API Reference)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<table border="0" cellpadding="0" cellspacing="0" width="100%" class="head">
 <tr heigth="59">
  <td class="head" width="202" valign="bottom" style="padding-left:0;"><a href="http://www.crystalspace3d.org/"><img src="csblur.png" width="236" height="59" alt="CrystalSpace" border="0"></a></td>
  <td class="head"><h2>Public API Reference</h2></td>
 </tr>
 <tr heigth="11">
  <td colspan="2" class="headshadow" valign="top" style="padding-left:0;"><img src="csblurb.png" width="236" height="11" alt="" border="0"></td>
 </tr>
</table>
<div class="content">
<!-- Generated by Doxygen 1.4.3-20050530 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000022.html">csutil</a></div>
<h1>scf.h</h1><a href="scf_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">    Crystal Space Shared Class Facility (SCF)</span>
<a name="l00003"></a>00003 <span class="comment">    Copyright (C) 1999 by Andrew Zabolotny</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">    This library is free software; you can redistribute it and/or</span>
<a name="l00006"></a>00006 <span class="comment">    modify it under the terms of the GNU Library General Public</span>
<a name="l00007"></a>00007 <span class="comment">    License as published by the Free Software Foundation; either</span>
<a name="l00008"></a>00008 <span class="comment">    version 2 of the License, or (at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">    This library is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00013"></a>00013 <span class="comment">    Library General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment"></span>
<a name="l00015"></a>00015 <span class="comment">    You should have received a copy of the GNU Library General Public</span>
<a name="l00016"></a>00016 <span class="comment">    License along with this library; if not, write to the Free</span>
<a name="l00017"></a>00017 <span class="comment">    Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<a name="l00018"></a>00018 <span class="comment">*/</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef __CSSCF_H__</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define __CSSCF_H__</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include "csextern.h"</span>
<a name="l00024"></a>00024 
<a name="l00033"></a><a class="code" href="group__scf.html#ga0">00033</a> <span class="keyword">class </span><a class="code" href="classcsPathsList.html">csPathsList</a>;
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#include "<a class="code" href="array_8h.html">csutil/array.h</a>"</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include "<a class="code" href="ref_8h.html">csutil/ref.h</a>"</span>
<a name="l00037"></a>00037 
<a name="l00041"></a>00041 <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="group__scf.html#ga0">scfInterfaceID</a>;
<a name="l00042"></a>00042 
<a name="l00046"></a><a class="code" href="group__scf.html#ga1">00046</a> <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="group__scf.html#ga1">scfInterfaceVersion</a>;
<a name="l00047"></a>00047 
<a name="l00052"></a>00052 <span class="preprocessor">#ifdef SCF_DEBUG</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#  define SCF_TRACE(x)                                                  \</span>
<a name="l00054"></a>00054 <span class="preprocessor">   {                                                                    \</span>
<a name="l00055"></a>00055 <span class="preprocessor">     printf ("SCF [%s:%d]:\n", __FILE__, (int)__LINE__);                \</span>
<a name="l00056"></a>00056 <span class="preprocessor">     printf x; SCF_PRINT_CALL_ADDRESS                                   \</span>
<a name="l00057"></a>00057 <span class="preprocessor">   }</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00059"></a><a class="code" href="group__scf.html#ga19">00059</a> <span class="preprocessor"></span><span class="preprocessor">#  define SCF_TRACE(x)</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>
<a name="l00066"></a>00066 <span class="preprocessor">#if (__GNUC__ &gt;= 3) || ((__GNUC__ &gt;= 2) &amp;&amp; (__GNUC_MINOR__ &gt;= 8))</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span><span class="preprocessor">#  define SCF_PRINT_CALL_ADDRESS                                        \</span>
<a name="l00068"></a>00068 <span class="preprocessor">   printf ("  Called from address %p\n", __builtin_return_address (0));</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00070"></a><a class="code" href="group__scf.html#ga20">00070</a> <span class="preprocessor"></span><span class="preprocessor">#  define SCF_PRINT_CALL_ADDRESS</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00074"></a><a class="code" href="group__scf.html#ga21">00074</a> <span class="preprocessor">#define SCF_CONSTRUCT_VERSION(Major,Minor,Micro)                        \</span>
<a name="l00075"></a>00075 <span class="preprocessor">  ((Major &lt;&lt; 24) | (Minor &lt;&lt; 16) | Micro)</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span>
<a name="l00090"></a><a class="code" href="group__scf.html#ga22">00090</a> <span class="preprocessor">#define SCF_INTERFACE(Name,Major,Minor,Micro)              \</span>
<a name="l00091"></a>00091 <span class="preprocessor">  struct InterfaceTraits {                                 \</span>
<a name="l00092"></a>00092 <span class="preprocessor">    static scfInterfaceVersion GetVersion()                \</span>
<a name="l00093"></a>00093 <span class="preprocessor">    { return SCF_CONSTRUCT_VERSION(Major, Minor, Micro); } \</span>
<a name="l00094"></a>00094 <span class="preprocessor">    static char const * GetName() { return #Name; }        \</span>
<a name="l00095"></a>00095 <span class="preprocessor">  }</span>
<a name="l00096"></a>00096 <span class="preprocessor"></span>
<a name="l00102"></a><a class="code" href="structiBase.html">00102</a> <span class="keyword">struct </span><a class="code" href="structiBase.html">iBase</a>
<a name="l00103"></a>00103 {
<a name="l00104"></a>00104 <span class="comment">// Jorrit: removed the code below as it causes 'pure virtual' method</span>
<a name="l00105"></a>00105 <span class="comment">// calls to happen upon destruction.</span>
<a name="l00106"></a>00106 <span class="comment">//protected:</span>
<a name="l00109"></a>00109 <span class="comment"></span>  <span class="comment">//virtual ~iBase() {}</span>
<a name="l00110"></a>00110 <span class="keyword">public</span>:
<a name="l00111"></a>00111   SCF_INTERFACE(<a class="code" href="structiBase.html">iBase</a>, 0, 1, 0);
<a name="l00113"></a>00113   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiBase.html#a1">IncRef</a> () = 0;
<a name="l00115"></a>00115   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiBase.html#a2">DecRef</a> () = 0;
<a name="l00117"></a>00117   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="structiBase.html#a3">GetRefCount</a> () = 0;
<a name="l00119"></a>00119   <span class="keyword">virtual</span> <span class="keywordtype">void</span> *<a class="code" href="structiBase.html#a4">QueryInterface</a> (<a class="code" href="group__scf.html#ga0">scfInterfaceID</a> iInterfaceID, <span class="keywordtype">int</span> iVersion) = 0;
<a name="l00124"></a><a class="code" href="structiBase.html#e0">00124</a>   <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="structiBase.html#e0">QueryInterfaceSafe</a> (<a class="code" href="structiBase.html">iBase</a>* ibase, <a class="code" href="group__scf.html#ga0">scfInterfaceID</a> iInterfaceID,
<a name="l00125"></a>00125         <span class="keywordtype">int</span> iVersion)
<a name="l00126"></a>00126   {
<a name="l00127"></a>00127     <span class="keywordflow">if</span> (ibase == 0) <span class="keywordflow">return</span> 0;
<a name="l00128"></a>00128     <span class="keywordflow">else</span> <span class="keywordflow">return</span> ibase-&gt;<a class="code" href="structiBase.html#a4">QueryInterface</a> (iInterfaceID, iVersion);
<a name="l00129"></a>00129   }
<a name="l00131"></a>00131   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiBase.html#a5">AddRefOwner</a> (<a class="code" href="structiBase.html">iBase</a>** ref_owner) = 0;
<a name="l00133"></a>00133   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiBase.html#a6">RemoveRefOwner</a> (<a class="code" href="structiBase.html">iBase</a>** ref_owner) = 0;
<a name="l00134"></a>00134 };
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="preprocessor">#ifdef CS_REF_TRACKER</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span><span class="preprocessor"> #include &lt;typeinfo&gt;</span>
<a name="l00138"></a>00138 <span class="preprocessor"> #define CS_TYPENAME(x)             typeid(x).name()</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span> <span class="comment">/* @@@ HACK: Force an AddAlias() call for every contained interface</span>
<a name="l00140"></a>00140 <span class="comment">  * However, when iSCF::SCF == 0, don't call QI to prevent interface ID </span>
<a name="l00141"></a>00141 <span class="comment">  * resolution (which will fail).</span>
<a name="l00142"></a>00142 <span class="comment">  */</span>
<a name="l00143"></a>00143 <span class="preprocessor"> #define SCF_INIT_TRACKER_ALIASES    \</span>
<a name="l00144"></a>00144 <span class="preprocessor">  if (iSCF::SCF != 0) QueryInterface ((scfInterfaceID)-1, -1);</span>
<a name="l00145"></a>00145 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00146"></a><a class="code" href="group__scf.html#ga23">00146</a> <span class="preprocessor"></span><span class="preprocessor"> #define CS_TYPENAME(x)             0</span>
<a name="l00147"></a><a class="code" href="group__scf.html#ga24">00147</a> <span class="preprocessor"></span><span class="preprocessor"> #define SCF_INIT_TRACKER_ALIASES</span>
<a name="l00148"></a>00148 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00149"></a>00149 <span class="preprocessor"></span>
<a name="l00154"></a><a class="code" href="group__scf.html#ga25">00154</a> <span class="preprocessor">#define SCF_DECLARE_IBASE                                               \</span>
<a name="l00155"></a>00155 <span class="preprocessor">  int scfRefCount;              </span><span class="comment">/* Reference counter */</span>                 \
<a name="l00156"></a>00156   csArray&lt;iBase**&gt;* scfWeakRefOwners;                                   \
<a name="l00157"></a>00157   void scfRemoveRefOwners ();                                           \
<a name="l00158"></a>00158   SCF_DECLARE_EMBEDDED_IBASE (iBase)
<a name="l00159"></a>00159 
<a name="l00164"></a><a class="code" href="group__scf.html#ga26">00164</a> <span class="preprocessor">#define SCF_DECLARE_EMBEDDED_IBASE(OuterClass)                          \</span>
<a name="l00165"></a>00165 <span class="preprocessor">public:                                                                 \</span>
<a name="l00166"></a>00166 <span class="preprocessor">  OuterClass *scfParent;        </span><span class="comment">/* The parent object */</span>                 \
<a name="l00167"></a>00167   virtual void IncRef ();                                               \
<a name="l00168"></a>00168   virtual void DecRef ();                                               \
<a name="l00169"></a>00169   virtual int GetRefCount ();                                           \
<a name="l00170"></a>00170   virtual void AddRefOwner (iBase** ref_owner);                         \
<a name="l00171"></a>00171   virtual void RemoveRefOwner (iBase** ref_owner);                      \
<a name="l00172"></a>00172   virtual void *QueryInterface (scfInterfaceID iInterfaceID, int iVersion)
<a name="l00173"></a>00173 
<a name="l00183"></a><a class="code" href="group__scf.html#ga27">00183</a> <span class="preprocessor">#define SCF_CONSTRUCT_IBASE(Parent)                                     \</span>
<a name="l00184"></a>00184 <span class="preprocessor">  csRefTrackerAccess::TrackConstruction (this);                         \</span>
<a name="l00185"></a>00185 <span class="preprocessor">  csRefTrackerAccess::SetDescription (this, CS_TYPENAME(*this));        \</span>
<a name="l00186"></a>00186 <span class="preprocessor">  scfRefCount = 1;                                                      \</span>
<a name="l00187"></a>00187 <span class="preprocessor">  scfWeakRefOwners = 0;                                                 \</span>
<a name="l00188"></a>00188 <span class="preprocessor">  scfParent = Parent; if (scfParent) scfParent-&gt;IncRef();               \</span>
<a name="l00189"></a>00189 <span class="preprocessor">  SCF_INIT_TRACKER_ALIASES                                              </span>
<a name="l00190"></a>00190 <span class="preprocessor"></span>
<a name="l00200"></a><a class="code" href="group__scf.html#ga28">00200</a> <span class="preprocessor">#define SCF_CONSTRUCT_EMBEDDED_IBASE(Interface)                         \</span>
<a name="l00201"></a>00201 <span class="preprocessor">  Interface.scfParent = this;                                           \</span>
<a name="l00202"></a>00202 <span class="preprocessor">  csRefTrackerAccess::AddAlias (&amp;Interface, this);</span>
<a name="l00203"></a>00203 <span class="preprocessor"></span>
<a name="l00209"></a><a class="code" href="group__scf.html#ga29">00209</a> <span class="preprocessor">#define SCF_DESTRUCT_IBASE()                                            \</span>
<a name="l00210"></a>00210 <span class="preprocessor">  csRefTrackerAccess::TrackDestruction (this, scfRefCount);             \</span>
<a name="l00211"></a>00211 <span class="preprocessor">  scfRemoveRefOwners ();</span>
<a name="l00212"></a>00212 <span class="preprocessor"></span>
<a name="l00219"></a><a class="code" href="group__scf.html#ga30">00219</a> <span class="preprocessor">#define SCF_DESTRUCT_EMBEDDED_IBASE(Interface)                          \</span>
<a name="l00220"></a>00220 <span class="preprocessor">  csRefTrackerAccess::RemoveAlias (&amp;Interface, this);                   \</span>
<a name="l00221"></a>00221 <span class="preprocessor">  Interface.scfParent = 0;</span>
<a name="l00222"></a>00222 <span class="preprocessor"></span>
<a name="l00228"></a><a class="code" href="group__scf.html#ga31">00228</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_INCREF(Class)                               \</span>
<a name="l00229"></a>00229 <span class="preprocessor">void Class::IncRef ()                                                   \</span>
<a name="l00230"></a>00230 <span class="preprocessor">{                                                                       \</span>
<a name="l00231"></a>00231 <span class="preprocessor">  SCF_TRACE (("  (%s *)%p-&gt;IncRef (%d)\n", #Class, this, scfRefCount + 1));\</span>
<a name="l00232"></a>00232 <span class="preprocessor">  csRefTrackerAccess::TrackIncRef (this, scfRefCount);                  \</span>
<a name="l00233"></a>00233 <span class="preprocessor">  scfRefCount++;                                                        \</span>
<a name="l00234"></a>00234 <span class="preprocessor">}</span>
<a name="l00235"></a>00235 <span class="preprocessor"></span>
<a name="l00244"></a><a class="code" href="group__scf.html#ga32">00244</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_DECREF(Class)                               \</span>
<a name="l00245"></a>00245 <span class="preprocessor">void Class::DecRef ()                                                   \</span>
<a name="l00246"></a>00246 <span class="preprocessor">{                                                                       \</span>
<a name="l00247"></a>00247 <span class="preprocessor">  csRefTrackerAccess::TrackDecRef (this, scfRefCount);                  \</span>
<a name="l00248"></a>00248 <span class="preprocessor">  if (scfRefCount == 1)                                                 \</span>
<a name="l00249"></a>00249 <span class="preprocessor">  {                                                                     \</span>
<a name="l00250"></a>00250 <span class="preprocessor">    SCF_TRACE ((" delete (%s *)%p\n", #Class, this));                   \</span>
<a name="l00251"></a>00251 <span class="preprocessor">    scfRemoveRefOwners ();                                              \</span>
<a name="l00252"></a>00252 <span class="preprocessor">    if (scfParent)                                                      \</span>
<a name="l00253"></a>00253 <span class="preprocessor">      scfParent-&gt;DecRef ();                                             \</span>
<a name="l00254"></a>00254 <span class="preprocessor">    delete this;                                                        \</span>
<a name="l00255"></a>00255 <span class="preprocessor">    return;                                                             \</span>
<a name="l00256"></a>00256 <span class="preprocessor">  }                                                                     \</span>
<a name="l00257"></a>00257 <span class="preprocessor">  scfRefCount--;                                                        \</span>
<a name="l00258"></a>00258 <span class="preprocessor">}</span>
<a name="l00259"></a>00259 <span class="preprocessor"></span>
<a name="l00266"></a><a class="code" href="group__scf.html#ga33">00266</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_REMOVE_REF_OWNERS(Class)                    \</span>
<a name="l00267"></a>00267 <span class="preprocessor">void Class::scfRemoveRefOwners ()                                       \</span>
<a name="l00268"></a>00268 <span class="preprocessor">{                                                                       \</span>
<a name="l00269"></a>00269 <span class="preprocessor">  if (!scfWeakRefOwners) return;                                        \</span>
<a name="l00270"></a>00270 <span class="preprocessor">  for (size_t i = 0 ; i &lt; scfWeakRefOwners-&gt;Length () ; i++)            \</span>
<a name="l00271"></a>00271 <span class="preprocessor">  {                                                                     \</span>
<a name="l00272"></a>00272 <span class="preprocessor">    iBase** p = (*scfWeakRefOwners)[i];                                 \</span>
<a name="l00273"></a>00273 <span class="preprocessor">    *p = 0;                                                             \</span>
<a name="l00274"></a>00274 <span class="preprocessor">  }                                                                     \</span>
<a name="l00275"></a>00275 <span class="preprocessor">  delete scfWeakRefOwners;                                              \</span>
<a name="l00276"></a>00276 <span class="preprocessor">  scfWeakRefOwners = 0;                                                 \</span>
<a name="l00277"></a>00277 <span class="preprocessor">}</span>
<a name="l00278"></a>00278 <span class="preprocessor"></span>
<a name="l00283"></a><a class="code" href="group__scf.html#ga34">00283</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_REFOWNER(Class)                             \</span>
<a name="l00284"></a>00284 <span class="preprocessor">void Class::AddRefOwner (iBase** ref_owner)                             \</span>
<a name="l00285"></a>00285 <span class="preprocessor">{                                                                       \</span>
<a name="l00286"></a>00286 <span class="preprocessor">  if (!scfWeakRefOwners)                                                \</span>
<a name="l00287"></a>00287 <span class="preprocessor">    scfWeakRefOwners = new csArray&lt;iBase**&gt; (0, 4);                     \</span>
<a name="l00288"></a>00288 <span class="preprocessor">  scfWeakRefOwners-&gt;InsertSorted (ref_owner);                           \</span>
<a name="l00289"></a>00289 <span class="preprocessor">}                                                                       \</span>
<a name="l00290"></a>00290 <span class="preprocessor">void Class::RemoveRefOwner (iBase** ref_owner)                          \</span>
<a name="l00291"></a>00291 <span class="preprocessor">{                                                                       \</span>
<a name="l00292"></a>00292 <span class="preprocessor">  if (!scfWeakRefOwners)                                                \</span>
<a name="l00293"></a>00293 <span class="preprocessor">    return;                                                             \</span>
<a name="l00294"></a>00294 <span class="preprocessor">  size_t index = scfWeakRefOwners-&gt;FindSortedKey (                      \</span>
<a name="l00295"></a>00295 <span class="preprocessor">    csArrayCmp&lt;iBase**, iBase**&gt; (ref_owner));                          \</span>
<a name="l00296"></a>00296 <span class="preprocessor">  if (index != csArrayItemNotFound) scfWeakRefOwners-&gt;DeleteIndex (     \</span>
<a name="l00297"></a>00297 <span class="preprocessor">    index);                                                             \</span>
<a name="l00298"></a>00298 <span class="preprocessor">}</span>
<a name="l00299"></a>00299 <span class="preprocessor"></span>
<a name="l00304"></a><a class="code" href="group__scf.html#ga35">00304</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_GETREFCOUNT(Class)                          \</span>
<a name="l00305"></a>00305 <span class="preprocessor">int Class::GetRefCount ()                                               \</span>
<a name="l00306"></a>00306 <span class="preprocessor">{                                                                       \</span>
<a name="l00307"></a>00307 <span class="preprocessor">  return scfRefCount;                                                   \</span>
<a name="l00308"></a>00308 <span class="preprocessor">}</span>
<a name="l00309"></a>00309 <span class="preprocessor"></span>
<a name="l00316"></a><a class="code" href="group__scf.html#ga36">00316</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_QUERY(Class)                                \</span>
<a name="l00317"></a>00317 <span class="preprocessor">void *Class::QueryInterface (scfInterfaceID iInterfaceID, int iVersion) \</span>
<a name="l00318"></a>00318 <span class="preprocessor">{                                                                       \</span>
<a name="l00319"></a>00319 <span class="preprocessor">  SCF_TRACE (("  (%s *)%p-&gt;QueryInterface (%lu, %08X)\n",               \</span>
<a name="l00320"></a>00320 <span class="preprocessor">    #Class, this, iInterfaceID, iVersion));</span>
<a name="l00321"></a>00321 <span class="preprocessor"></span>
<a name="l00328"></a><a class="code" href="group__scf.html#ga37">00328</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_QUERY_END                                   \</span>
<a name="l00329"></a>00329 <span class="preprocessor">  return scfParent ?                                                    \</span>
<a name="l00330"></a>00330 <span class="preprocessor">    scfParent-&gt;QueryInterface (iInterfaceID, iVersion) : 0;             \</span>
<a name="l00331"></a>00331 <span class="preprocessor">}</span>
<a name="l00332"></a>00332 <span class="preprocessor"></span>
<a name="l00338"></a><a class="code" href="group__scf.html#ga38">00338</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE(Class)                                      \</span>
<a name="l00339"></a>00339 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_INCREF(Class)                                     \</span>
<a name="l00340"></a>00340 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_DECREF(Class)                                     \</span>
<a name="l00341"></a>00341 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_GETREFCOUNT(Class)                                \</span>
<a name="l00342"></a>00342 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_REFOWNER(Class)                                   \</span>
<a name="l00343"></a>00343 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_REMOVE_REF_OWNERS(Class)                          \</span>
<a name="l00344"></a>00344 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_QUERY(Class)</span>
<a name="l00345"></a>00345 <span class="preprocessor"></span>
<a name="l00350"></a><a class="code" href="group__scf.html#ga39">00350</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_END                                         \</span>
<a name="l00351"></a>00351 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_QUERY_END</span>
<a name="l00352"></a>00352 <span class="preprocessor"></span>
<a name="l00359"></a><a class="code" href="group__scf.html#ga40">00359</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_INCREF(Class)                      \</span>
<a name="l00360"></a>00360 <span class="preprocessor">void Class::IncRef ()                                                   \</span>
<a name="l00361"></a>00361 <span class="preprocessor">{                                                                       \</span>
<a name="l00362"></a>00362 <span class="preprocessor">  SCF_TRACE (("  (%s *)%p-&gt;IncRef (%d)\n", #Class, this,                \</span>
<a name="l00363"></a>00363 <span class="preprocessor">    scfParent-&gt;GetRefCount () + 1));                                    \</span>
<a name="l00364"></a>00364 <span class="preprocessor">  scfParent-&gt;IncRef ();                                                 \</span>
<a name="l00365"></a>00365 <span class="preprocessor">}</span>
<a name="l00366"></a>00366 <span class="preprocessor"></span>
<a name="l00373"></a><a class="code" href="group__scf.html#ga41">00373</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_DECREF(Class)                      \</span>
<a name="l00374"></a>00374 <span class="preprocessor">void Class::DecRef ()                                                   \</span>
<a name="l00375"></a>00375 <span class="preprocessor">{                                                                       \</span>
<a name="l00376"></a>00376 <span class="preprocessor">  SCF_TRACE (("  (%s *)%p-&gt;DecRef (%d)\n", #Class, this,                \</span>
<a name="l00377"></a>00377 <span class="preprocessor">              scfParent-&gt;GetRefCount ()-1));                            \</span>
<a name="l00378"></a>00378 <span class="preprocessor">  scfParent-&gt;DecRef ();                                                 \</span>
<a name="l00379"></a>00379 <span class="preprocessor">}</span>
<a name="l00380"></a>00380 <span class="preprocessor"></span>
<a name="l00385"></a><a class="code" href="group__scf.html#ga42">00385</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_GETREFCOUNT(Class)                 \</span>
<a name="l00386"></a>00386 <span class="preprocessor">int Class::GetRefCount ()                                               \</span>
<a name="l00387"></a>00387 <span class="preprocessor">{                                                                       \</span>
<a name="l00388"></a>00388 <span class="preprocessor">  return scfParent-&gt;GetRefCount ();                                     \</span>
<a name="l00389"></a>00389 <span class="preprocessor">}</span>
<a name="l00390"></a>00390 <span class="preprocessor"></span>
<a name="l00395"></a><a class="code" href="group__scf.html#ga43">00395</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_REFOWNER(Class)                    \</span>
<a name="l00396"></a>00396 <span class="preprocessor">void Class::AddRefOwner (iBase** ref_owner)                             \</span>
<a name="l00397"></a>00397 <span class="preprocessor">{                                                                       \</span>
<a name="l00398"></a>00398 <span class="preprocessor">  scfParent-&gt;AddRefOwner (ref_owner);                                   \</span>
<a name="l00399"></a>00399 <span class="preprocessor">}                                                                       \</span>
<a name="l00400"></a>00400 <span class="preprocessor">void Class::RemoveRefOwner (iBase** ref_owner)                          \</span>
<a name="l00401"></a>00401 <span class="preprocessor">{                                                                       \</span>
<a name="l00402"></a>00402 <span class="preprocessor">  scfParent-&gt;RemoveRefOwner (ref_owner);                                \</span>
<a name="l00403"></a>00403 <span class="preprocessor">}</span>
<a name="l00404"></a>00404 <span class="preprocessor"></span>
<a name="l00411"></a><a class="code" href="group__scf.html#ga44">00411</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_QUERY(Class)                       \</span>
<a name="l00412"></a>00412 <span class="preprocessor">void *Class::QueryInterface (scfInterfaceID iInterfaceID, int iVersion) \</span>
<a name="l00413"></a>00413 <span class="preprocessor">{                                                                       \</span>
<a name="l00414"></a>00414 <span class="preprocessor">  SCF_TRACE (("  (%s *)%p-&gt;QueryInterface (%lu, %08X)\n",               \</span>
<a name="l00415"></a>00415 <span class="preprocessor">    #Class, this, iInterfaceID, iVersion));</span>
<a name="l00416"></a>00416 <span class="preprocessor"></span>
<a name="l00423"></a><a class="code" href="group__scf.html#ga45">00423</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_QUERY_END                          \</span>
<a name="l00424"></a>00424 <span class="preprocessor">  return scfParent-&gt;QueryInterface (iInterfaceID, iVersion);            \</span>
<a name="l00425"></a>00425 <span class="preprocessor">}</span>
<a name="l00426"></a>00426 <span class="preprocessor"></span>
<a name="l00433"></a><a class="code" href="group__scf.html#ga46">00433</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE(Class)                             \</span>
<a name="l00434"></a>00434 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_INCREF(Class)                            \</span>
<a name="l00435"></a>00435 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_DECREF(Class)                            \</span>
<a name="l00436"></a>00436 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_GETREFCOUNT(Class)                       \</span>
<a name="l00437"></a>00437 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_REFOWNER(Class)                          \</span>
<a name="l00438"></a>00438 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_QUERY(Class)</span>
<a name="l00439"></a>00439 <span class="preprocessor"></span>
<a name="l00444"></a><a class="code" href="group__scf.html#ga47">00444</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_END                                \</span>
<a name="l00445"></a>00445 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_QUERY_END</span>
<a name="l00446"></a>00446 <span class="preprocessor"></span>
<a name="l00453"></a><a class="code" href="group__scf.html#ga48">00453</a> <span class="preprocessor">#define SCF_IMPLEMENTS_INTERFACE(Interface)                             \</span>
<a name="l00454"></a>00454 <span class="preprocessor">  csRefTrackerAccess::AddAlias (CS_STATIC_CAST(Interface*, this), this);\</span>
<a name="l00455"></a>00455 <span class="preprocessor">  SCF_IMPLEMENTS_INTERFACE_COMMON (Interface, this)</span>
<a name="l00456"></a>00456 <span class="preprocessor"></span>
<a name="l00461"></a><a class="code" href="group__scf.html#ga49">00461</a> <span class="preprocessor">#define SCF_IMPLEMENTS_EMBEDDED_INTERFACE(Interface)                    \</span>
<a name="l00462"></a>00462 <span class="preprocessor">  SCF_IMPLEMENTS_INTERFACE_COMMON (Interface, (&amp;scf##Interface))</span>
<a name="l00463"></a>00463 <span class="preprocessor"></span>
<a name="l00467"></a><a class="code" href="group__scf.html#ga50">00467</a> <span class="preprocessor">#define SCF_IMPLEMENTS_INTERFACE_COMMON(Interface,Object)               \</span>
<a name="l00468"></a>00468 <span class="preprocessor">  if (iInterfaceID == scfInterface&lt;Interface&gt;::GetID() &amp;&amp;               \</span>
<a name="l00469"></a>00469 <span class="preprocessor">    scfCompatibleVersion (iVersion, scfInterface&lt;Interface&gt;::GetVersion())) \</span>
<a name="l00470"></a>00470 <span class="preprocessor">  {                                                                     \</span>
<a name="l00471"></a>00471 <span class="preprocessor">    (Object)-&gt;IncRef ();                                                \</span>
<a name="l00472"></a>00472 <span class="preprocessor">    return CS_STATIC_CAST(Interface*, Object);                          \</span>
<a name="l00473"></a>00473 <span class="preprocessor">  }</span>
<a name="l00474"></a>00474 <span class="preprocessor"></span>
<a name="l00485"></a><a class="code" href="group__scf.html#ga51">00485</a> <span class="preprocessor">#define SCF_DECLARE_IBASE_EXT(ParentClass)                              \</span>
<a name="l00486"></a>00486 <span class="preprocessor">  typedef ParentClass __scf_superclass;                                 \</span>
<a name="l00487"></a>00487 <span class="preprocessor">  virtual void IncRef ();                                               \</span>
<a name="l00488"></a>00488 <span class="preprocessor">  virtual void DecRef ();                                               \</span>
<a name="l00489"></a>00489 <span class="preprocessor">  virtual int GetRefCount ();                                           \</span>
<a name="l00490"></a>00490 <span class="preprocessor">  virtual void AddRefOwner (iBase** ref_owner);                         \</span>
<a name="l00491"></a>00491 <span class="preprocessor">  virtual void RemoveRefOwner (iBase** ref_owner);                      \</span>
<a name="l00492"></a>00492 <span class="preprocessor">  virtual void *QueryInterface (scfInterfaceID iInterfaceID, int iVersion)</span>
<a name="l00493"></a>00493 <span class="preprocessor"></span>
<a name="l00500"></a><a class="code" href="group__scf.html#ga52">00500</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_INCREF(Class)                           \</span>
<a name="l00501"></a>00501 <span class="preprocessor">void Class::IncRef ()                                                   \</span>
<a name="l00502"></a>00502 <span class="preprocessor">{                                                                       \</span>
<a name="l00503"></a>00503 <span class="preprocessor">  __scf_superclass::IncRef ();                                          \</span>
<a name="l00504"></a>00504 <span class="preprocessor">}</span>
<a name="l00505"></a>00505 <span class="preprocessor"></span>
<a name="l00512"></a><a class="code" href="group__scf.html#ga53">00512</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_DECREF(Class)                           \</span>
<a name="l00513"></a>00513 <span class="preprocessor">void Class::DecRef ()                                                   \</span>
<a name="l00514"></a>00514 <span class="preprocessor">{                                                                       \</span>
<a name="l00515"></a>00515 <span class="preprocessor">  __scf_superclass::DecRef ();                                          \</span>
<a name="l00516"></a>00516 <span class="preprocessor">}</span>
<a name="l00517"></a>00517 <span class="preprocessor"></span>
<a name="l00524"></a><a class="code" href="group__scf.html#ga54">00524</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_GETREFCOUNT(Class)                      \</span>
<a name="l00525"></a>00525 <span class="preprocessor">int Class::GetRefCount ()                                               \</span>
<a name="l00526"></a>00526 <span class="preprocessor">{                                                                       \</span>
<a name="l00527"></a>00527 <span class="preprocessor">  return __scf_superclass::GetRefCount ();                              \</span>
<a name="l00528"></a>00528 <span class="preprocessor">}</span>
<a name="l00529"></a>00529 <span class="preprocessor"></span>
<a name="l00534"></a><a class="code" href="group__scf.html#ga55">00534</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_REFOWNER(Class)                 \</span>
<a name="l00535"></a>00535 <span class="preprocessor">void Class::AddRefOwner (iBase** ref_owner)                             \</span>
<a name="l00536"></a>00536 <span class="preprocessor">{                                                                       \</span>
<a name="l00537"></a>00537 <span class="preprocessor">  __scf_superclass::AddRefOwner (ref_owner);                            \</span>
<a name="l00538"></a>00538 <span class="preprocessor">}                                                                       \</span>
<a name="l00539"></a>00539 <span class="preprocessor">void Class::RemoveRefOwner (iBase** ref_owner)                          \</span>
<a name="l00540"></a>00540 <span class="preprocessor">{                                                                       \</span>
<a name="l00541"></a>00541 <span class="preprocessor">  __scf_superclass::RemoveRefOwner (ref_owner);                         \</span>
<a name="l00542"></a>00542 <span class="preprocessor">}</span>
<a name="l00543"></a>00543 <span class="preprocessor"></span>
<a name="l00550"></a><a class="code" href="group__scf.html#ga56">00550</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_QUERY(Class)                            \</span>
<a name="l00551"></a>00551 <span class="preprocessor">void *Class::QueryInterface (scfInterfaceID iInterfaceID, int iVersion) \</span>
<a name="l00552"></a>00552 <span class="preprocessor">{</span>
<a name="l00553"></a>00553 <span class="preprocessor"></span>
<a name="l00560"></a><a class="code" href="group__scf.html#ga57">00560</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_QUERY_END                               \</span>
<a name="l00561"></a>00561 <span class="preprocessor">  return __scf_superclass::QueryInterface (iInterfaceID, iVersion);     \</span>
<a name="l00562"></a>00562 <span class="preprocessor">}</span>
<a name="l00563"></a>00563 <span class="preprocessor"></span>
<a name="l00568"></a><a class="code" href="group__scf.html#ga58">00568</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT(Class)                                  \</span>
<a name="l00569"></a>00569 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_INCREF(Class)                                 \</span>
<a name="l00570"></a>00570 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_DECREF(Class)                                 \</span>
<a name="l00571"></a>00571 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_GETREFCOUNT(Class)                            \</span>
<a name="l00572"></a>00572 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_REFOWNER(Class)                               \</span>
<a name="l00573"></a>00573 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_QUERY(Class)</span>
<a name="l00574"></a>00574 <span class="preprocessor"></span>
<a name="l00579"></a><a class="code" href="group__scf.html#ga59">00579</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_END                                     \</span>
<a name="l00580"></a>00580 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_QUERY_END</span>
<a name="l00581"></a>00581 <span class="preprocessor"></span>
<a name="l00597"></a>00597 <span class="preprocessor">#ifdef CS_MEMORY_TRACKER</span>
<a name="l00598"></a>00598 <span class="preprocessor"></span><span class="comment">// This special version of SCF_IMPLEMENT_FACTORY_INIT will make sure that</span>
<a name="l00599"></a>00599 <span class="comment">// the memory tracker for this plugin is implemented.</span>
<a name="l00600"></a>00600 <span class="preprocessor">#define SCF_IMPLEMENT_FACTORY_INIT(Class)                               \</span>
<a name="l00601"></a>00601 <span class="preprocessor">static inline void Class ## _scfUnitInitialize(iSCF* SCF)               \</span>
<a name="l00602"></a>00602 <span class="preprocessor">{                                                                       \</span>
<a name="l00603"></a>00603 <span class="preprocessor">  iSCF::SCF = SCF;                                                      \</span>
<a name="l00604"></a>00604 <span class="preprocessor">  extern void mtiRegisterModule (char*);                                \</span>
<a name="l00605"></a>00605 <span class="preprocessor">  mtiRegisterModule (#Class);                                           \</span>
<a name="l00606"></a>00606 <span class="preprocessor">}                                                                       \</span>
<a name="l00607"></a>00607 <span class="preprocessor">CS_EXPORTED_FUNCTION                                                    \</span>
<a name="l00608"></a>00608 <span class="preprocessor">void CS_EXPORTED_NAME(Class,_scfInitialize)(iSCF* SCF)                  \</span>
<a name="l00609"></a>00609 <span class="preprocessor">{ Class ## _scfUnitInitialize(SCF); }</span>
<a name="l00610"></a>00610 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00611"></a><a class="code" href="group__scf.html#ga60">00611</a> <span class="preprocessor"></span><span class="preprocessor">#define SCF_IMPLEMENT_FACTORY_INIT(Class)                               \</span>
<a name="l00612"></a>00612 <span class="preprocessor">static inline void Class ## _scfUnitInitialize(iSCF* SCF)               \</span>
<a name="l00613"></a>00613 <span class="preprocessor">{ iSCF::SCF = SCF; }                                                    \</span>
<a name="l00614"></a>00614 <span class="preprocessor">CS_EXPORTED_FUNCTION                                                    \</span>
<a name="l00615"></a>00615 <span class="preprocessor">void CS_EXPORTED_NAME(Class,_scfInitialize)(iSCF* SCF)                  \</span>
<a name="l00616"></a>00616 <span class="preprocessor">{ Class ## _scfUnitInitialize(SCF); }</span>
<a name="l00617"></a>00617 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00618"></a>00618 <span class="preprocessor"></span>
<a name="l00624"></a><a class="code" href="group__scf.html#ga61">00624</a> <span class="preprocessor">#define SCF_IMPLEMENT_FACTORY_FINIS(Class)                              \</span>
<a name="l00625"></a>00625 <span class="preprocessor">CS_EXPORTED_FUNCTION                                                    \</span>
<a name="l00626"></a>00626 <span class="preprocessor">void CS_EXPORTED_NAME(Class,_scfFinalize)()                             \</span>
<a name="l00627"></a>00627 <span class="preprocessor">{                                                                       \</span>
<a name="l00628"></a>00628 <span class="preprocessor">CS_STATIC_VARIABLE_CLEANUP                                              \</span>
<a name="l00629"></a>00629 <span class="preprocessor">}</span>
<a name="l00630"></a>00630 <span class="preprocessor"></span>
<a name="l00637"></a><a class="code" href="group__scf.html#ga62">00637</a> <span class="preprocessor">#define SCF_IMPLEMENT_FACTORY_CREATE(Class)                             \</span>
<a name="l00638"></a>00638 <span class="preprocessor">CS_EXPORTED_FUNCTION                                                    \</span>
<a name="l00639"></a>00639 <span class="preprocessor">void* CS_EXPORTED_NAME(Class,_Create)(iBase *iParent)                   \</span>
<a name="l00640"></a>00640 <span class="preprocessor">{                                                                       \</span>
<a name="l00641"></a>00641 <span class="preprocessor">  void *ret = new Class (iParent);                                      \</span>
<a name="l00642"></a>00642 <span class="preprocessor">  SCF_TRACE (("  %p = new %s ()\n", ret, #Class));                      \</span>
<a name="l00643"></a>00643 <span class="preprocessor">  return ret;                                                           \</span>
<a name="l00644"></a>00644 <span class="preprocessor">}</span>
<a name="l00645"></a>00645 <span class="preprocessor"></span>
<a name="l00652"></a><a class="code" href="group__scf.html#ga63">00652</a> <span class="preprocessor">#define SCF_IMPLEMENT_FACTORY(Class)                                    \</span>
<a name="l00653"></a>00653 <span class="preprocessor">  SCF_IMPLEMENT_FACTORY_INIT(Class)                                     \</span>
<a name="l00654"></a>00654 <span class="preprocessor">  SCF_IMPLEMENT_FACTORY_FINIS(Class)                                    \</span>
<a name="l00655"></a>00655 <span class="preprocessor">  SCF_IMPLEMENT_FACTORY_CREATE(Class)</span>
<a name="l00656"></a>00656 <span class="preprocessor"></span>
<a name="l00657"></a><a class="code" href="group__scf.html#ga64">00657</a> <span class="preprocessor">#define SCF_STATIC_CLASS_CONTEXT      "*static*"</span>
<a name="l00658"></a>00658 <span class="preprocessor"></span>
<a name="l00667"></a><a class="code" href="group__scf.html#ga65">00667</a> <span class="preprocessor">#define SCF_REGISTER_STATIC_CLASS(Class,Ident,Desc,Dep)                 \</span>
<a name="l00668"></a>00668 <span class="preprocessor">  CS_EXPORTED_FUNCTION void* CS_EXPORTED_NAME(Class,_Create)(iBase*);   \</span>
<a name="l00669"></a>00669 <span class="preprocessor">  class Class##_StaticInit__                                            \</span>
<a name="l00670"></a>00670 <span class="preprocessor">  {                                                                     \</span>
<a name="l00671"></a>00671 <span class="preprocessor">  public:                                                               \</span>
<a name="l00672"></a>00672 <span class="preprocessor">    Class##_StaticInit__()                                              \</span>
<a name="l00673"></a>00673 <span class="preprocessor">    {                                                                   \</span>
<a name="l00674"></a>00674 <span class="preprocessor">      scfInitialize(0);                                                 \</span>
<a name="l00675"></a>00675 <span class="preprocessor">      iSCF::SCF-&gt;RegisterClass(                                         \</span>
<a name="l00676"></a>00676 <span class="preprocessor">        CS_EXPORTED_NAME(Class,_Create), Ident, Desc, Dep,              \</span>
<a name="l00677"></a>00677 <span class="preprocessor">        SCF_STATIC_CLASS_CONTEXT);                                      \</span>
<a name="l00678"></a>00678 <span class="preprocessor">    }                                                                   \</span>
<a name="l00679"></a>00679 <span class="preprocessor">  } Class##_static_init__;</span>
<a name="l00680"></a>00680 <span class="preprocessor"></span>
<a name="l00685"></a><a class="code" href="group__scf.html#ga66">00685</a> <span class="preprocessor">#define SCF_REGISTER_STATIC_LIBRARY(Module, MetaInfo)                   \</span>
<a name="l00686"></a>00686 <span class="preprocessor">  class Module##_StaticInit                                             \</span>
<a name="l00687"></a>00687 <span class="preprocessor">  {                                                                     \</span>
<a name="l00688"></a>00688 <span class="preprocessor">  public:                                                               \</span>
<a name="l00689"></a>00689 <span class="preprocessor">    Module##_StaticInit()                                               \</span>
<a name="l00690"></a>00690 <span class="preprocessor">    {                                                                   \</span>
<a name="l00691"></a>00691 <span class="preprocessor">      scfInitialize(0);                                                 \</span>
<a name="l00692"></a>00692 <span class="preprocessor">      iSCF::SCF-&gt;RegisterClasses(MetaInfo, SCF_STATIC_CLASS_CONTEXT);   \</span>
<a name="l00693"></a>00693 <span class="preprocessor">    }                                                                   \</span>
<a name="l00694"></a>00694 <span class="preprocessor">  } Module##_static_init__;</span>
<a name="l00695"></a>00695 <span class="preprocessor"></span>
<a name="l00700"></a><a class="code" href="group__scf.html#ga67">00700</a> <span class="preprocessor">#define SCF_DEFINE_FACTORY_FUNC_REGISTRATION(Class)                     \</span>
<a name="l00701"></a>00701 <span class="preprocessor">  CS_EXPORTED_FUNCTION void* CS_EXPORTED_NAME(Class,_Create)(iBase*);   \</span>
<a name="l00702"></a>00702 <span class="preprocessor">  class Class##_StaticInit                                              \</span>
<a name="l00703"></a>00703 <span class="preprocessor">  {                                                                     \</span>
<a name="l00704"></a>00704 <span class="preprocessor">  public:                                                               \</span>
<a name="l00705"></a>00705 <span class="preprocessor">    Class##_StaticInit()                                                \</span>
<a name="l00706"></a>00706 <span class="preprocessor">    {                                                                   \</span>
<a name="l00707"></a>00707 <span class="preprocessor">      scfInitialize(0);                                                 \</span>
<a name="l00708"></a>00708 <span class="preprocessor">      iSCF::SCF-&gt;RegisterFactoryFunc(CS_EXPORTED_NAME(Class,_Create),#Class); \</span>
<a name="l00709"></a>00709 <span class="preprocessor">    }                                                                   \</span>
<a name="l00710"></a>00710 <span class="preprocessor">  };</span>
<a name="l00711"></a>00711 <span class="preprocessor"></span>
<a name="l00716"></a><a class="code" href="group__scf.html#ga68">00716</a> <span class="preprocessor">#define SCF_USE_STATIC_PLUGIN(Module)                                   \</span>
<a name="l00717"></a>00717 <span class="preprocessor">  namespace csStaticPluginInit                                          \</span>
<a name="l00718"></a>00718 <span class="preprocessor">  {                                                                     \</span>
<a name="l00719"></a>00719 <span class="preprocessor">    class Module { public: Module(); };                                 \</span>
<a name="l00720"></a>00720 <span class="preprocessor">    Module Module##_StaticInit;                                         \</span>
<a name="l00721"></a>00721 <span class="preprocessor">  }</span>
<a name="l00722"></a>00722 <span class="preprocessor"></span>
<a name="l00731"></a><a class="code" href="group__scf.html#ga69">00731</a> <span class="preprocessor">#define SCF_REGISTER_FACTORY_FUNC(Class)                                \</span>
<a name="l00732"></a>00732 <span class="preprocessor">  SCF_DEFINE_FACTORY_FUNC_REGISTRATION(Class)                           \</span>
<a name="l00733"></a>00733 <span class="preprocessor">  Class##_StaticInit Class##_static_init__;</span>
<a name="l00734"></a>00734 <span class="preprocessor"></span>
<a name="l00735"></a>00735 <span class="comment">//--------------------------------------------- Class factory interface -----//</span>
<a name="l00736"></a>00736 
<a name="l00750"></a><a class="code" href="structiFactory.html">00750</a> <span class="keyword">struct </span><a class="code" href="structiFactory.html">iFactory</a> : <span class="keyword">public</span> <a class="code" href="structiBase.html">iBase</a>
<a name="l00751"></a>00751 {
<a name="l00753"></a>00753   <span class="keyword">virtual</span> <span class="keywordtype">void</span> *<a class="code" href="structiFactory.html#a0">CreateInstance</a> () = 0;
<a name="l00755"></a>00755   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiFactory.html#a1">TryUnload</a> () = 0;
<a name="l00757"></a>00757   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiFactory.html#a2">QueryDescription</a> () = 0;
<a name="l00759"></a>00759   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiFactory.html#a3">QueryDependencies</a> () = 0;
<a name="l00761"></a>00761   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiFactory.html#a4">QueryClassID</a> () = 0;
<a name="l00763"></a>00763   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiFactory.html#a5">QueryModuleName</a> () = 0;
<a name="l00764"></a>00764 };
<a name="l00765"></a>00765 
<a name="l00766"></a>00766 <span class="comment">//----------------------------------------------- Client-side functions -----//</span>
<a name="l00767"></a>00767 
<a name="l00768"></a>00768 <span class="keyword">struct </span><a class="code" href="structiDocument.html">iDocument</a>;
<a name="l00769"></a>00769 <span class="keyword">struct </span><a class="code" href="structiStringArray.html">iStringArray</a>;
<a name="l00770"></a>00770 
<a name="l00772"></a><a class="code" href="group__scf.html#ga2">00772</a> <span class="keyword">typedef</span> <span class="keywordtype">void</span>* (*scfFactoryFunc)(<a class="code" href="structiBase.html">iBase</a>*);
<a name="l00773"></a>00773 
<a name="l00778"></a><a class="code" href="group__scf.html#ga70">00778</a> <span class="preprocessor">#define SCF_CREATE_INSTANCE(ClassID,Interface)                          \</span>
<a name="l00779"></a>00779 <span class="preprocessor">  csPtr&lt;Interface&gt; (                                                    \</span>
<a name="l00780"></a>00780 <span class="preprocessor">    (Interface *)iSCF::SCF-&gt;CreateInstance (                            \</span>
<a name="l00781"></a>00781 <span class="preprocessor">    ClassID, #Interface, scfInterface&lt;Interface&gt;::GetVersion()))</span>
<a name="l00782"></a>00782 <span class="preprocessor"></span>
<a name="l00795"></a><a class="code" href="group__scf.html#ga71">00795</a> <span class="preprocessor">#define SCF_VERSION(Name,Major,Minor,Micro)                             \</span>
<a name="l00796"></a>00796 <span class="preprocessor">struct Name;                                                            \</span>
<a name="l00797"></a>00797 <span class="preprocessor">CS_SPECIALIZE_TEMPLATE                                                  \</span>
<a name="l00798"></a>00798 <span class="preprocessor">class scfInterface&lt;Name&gt;                                                \</span>
<a name="l00799"></a>00799 <span class="preprocessor">{                                                                       \</span>
<a name="l00800"></a>00800 <span class="preprocessor">  static scfInterfaceID&amp; GetMyID()                                      \</span>
<a name="l00801"></a>00801 <span class="preprocessor">  {                                                                     \</span>
<a name="l00802"></a>00802 <span class="preprocessor">    static scfInterfaceID ID = (scfInterfaceID)-1;                      \</span>
<a name="l00803"></a>00803 <span class="preprocessor">    return ID;                                                          \</span>
<a name="l00804"></a>00804 <span class="preprocessor">  }                                                                     \</span>
<a name="l00805"></a>00805 <span class="preprocessor">  static void CleanupID()                                               \</span>
<a name="l00806"></a>00806 <span class="preprocessor">  {                                                                     \</span>
<a name="l00807"></a>00807 <span class="preprocessor">    GetMyID() = (scfInterfaceID)-1;                                     \</span>
<a name="l00808"></a>00808 <span class="preprocessor">  }                                                                     \</span>
<a name="l00809"></a>00809 <span class="preprocessor">public:                                                                 \</span>
<a name="l00810"></a>00810 <span class="preprocessor">  static int GetVersion()                                               \</span>
<a name="l00811"></a>00811 <span class="preprocessor">  {                                                                     \</span>
<a name="l00812"></a>00812 <span class="preprocessor">    return SCF_CONSTRUCT_VERSION(Major, Minor, Micro);                  \</span>
<a name="l00813"></a>00813 <span class="preprocessor">  }                                                                     \</span>
<a name="l00814"></a>00814 <span class="preprocessor">  static scfInterfaceID GetID()                                         \</span>
<a name="l00815"></a>00815 <span class="preprocessor">  {                                                                     \</span>
<a name="l00816"></a>00816 <span class="preprocessor">    scfInterfaceID&amp; ID = GetMyID();                                     \</span>
<a name="l00817"></a>00817 <span class="preprocessor">    if (ID == (scfInterfaceID)(-1))                                     \</span>
<a name="l00818"></a>00818 <span class="preprocessor">    {                                                                   \</span>
<a name="l00819"></a>00819 <span class="preprocessor">      ID = iSCF::SCF-&gt;GetInterfaceID(#Name);                            \</span>
<a name="l00820"></a>00820 <span class="preprocessor">      </span><span class="comment">/* Mild hack to reset SCF ID on CS shutdown */</span>                    \
<a name="l00821"></a>00821       csStaticVarCleanup (CleanupID);                                   \
<a name="l00822"></a>00822     }                                                                   \
<a name="l00823"></a>00823     return ID;                                                          \
<a name="l00824"></a>00824   }                                                                     \
<a name="l00825"></a>00825   static char const* GetName()                                          \
<a name="l00826"></a>00826   {                                                                     \
<a name="l00827"></a>00827     return #Name;                                                       \
<a name="l00828"></a>00828   }                                                                     \
<a name="l00829"></a>00829 }
<a name="l00830"></a>00830 
<a name="l00837"></a><a class="code" href="classscfInterface.html">00837</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classscfInterface.html">scfInterface</a>
<a name="l00838"></a>00838 {
<a name="l00839"></a>00839 <span class="keyword">public</span>:
<a name="l00844"></a><a class="code" href="classscfInterface.html#e0">00844</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classscfInterface.html#e0">GetVersion</a>()
<a name="l00845"></a>00845   {
<a name="l00846"></a>00846     <a class="code" href="cssysdef_8h.html#a39">CS_ASSERT_MSG</a>(<span class="stringliteral">"illegal invocation of non-specialized "</span>
<a name="l00847"></a>00847       <span class="stringliteral">"scfInterface&lt;&gt;::GetVersion()"</span>, 1 == 0);
<a name="l00848"></a>00848     <span class="keywordflow">return</span> 0;
<a name="l00849"></a>00849   }
<a name="l00850"></a>00850 
<a name="l00858"></a><a class="code" href="classscfInterface.html#e1">00858</a>   <span class="keyword">static</span> <a class="code" href="group__scf.html#ga0">scfInterfaceID</a> <a class="code" href="classscfInterface.html#e1">GetID</a>()
<a name="l00859"></a>00859   {
<a name="l00860"></a>00860     <a class="code" href="cssysdef_8h.html#a39">CS_ASSERT_MSG</a>(<span class="stringliteral">"illegal invocation of non-specialized "</span>
<a name="l00861"></a>00861       <span class="stringliteral">"scfInterface&lt;&gt;::GetID()"</span>, 1 == 0);
<a name="l00862"></a>00862     <span class="keywordflow">return</span> (<a class="code" href="group__scf.html#ga0">scfInterfaceID</a>)(-1);
<a name="l00863"></a>00863   }
<a name="l00864"></a>00864 
<a name="l00868"></a><a class="code" href="classscfInterface.html#e2">00868</a>   <span class="keyword">static</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classscfInterface.html#e2">GetName</a>()
<a name="l00869"></a>00869   {
<a name="l00870"></a>00870     <a class="code" href="cssysdef_8h.html#a39">CS_ASSERT_MSG</a>(<span class="stringliteral">"illegal invocation of non-specialized "</span>
<a name="l00871"></a>00871       <span class="stringliteral">"scfInterface&lt;&gt;::GetName()"</span>, 1 == 0);
<a name="l00872"></a>00872     <span class="keywordflow">return</span> 0;
<a name="l00873"></a>00873   }
<a name="l00874"></a>00874 };
<a name="l00875"></a>00875 
<a name="l00880"></a><a class="code" href="group__scf.html#ga72">00880</a> <span class="preprocessor">#define SCF_QUERY_INTERFACE(Object,Interface)                           \</span>
<a name="l00881"></a>00881 <span class="preprocessor">  csPtr&lt;Interface&gt; ((Interface *)(Object)-&gt;QueryInterface (             \</span>
<a name="l00882"></a>00882 <span class="preprocessor">  scfInterface&lt;Interface&gt;::GetID (), scfInterface&lt;Interface&gt;::GetVersion()))</span>
<a name="l00883"></a>00883 <span class="preprocessor"></span>
<a name="l00889"></a><a class="code" href="group__scf.html#ga73">00889</a> <span class="preprocessor">#define SCF_QUERY_INTERFACE_SAFE(Object,Interface)                      \</span>
<a name="l00890"></a>00890 <span class="preprocessor">  csPtr&lt;Interface&gt; ((Interface *)(iBase::QueryInterfaceSafe ((Object),  \</span>
<a name="l00891"></a>00891 <span class="preprocessor">  scfInterface&lt;Interface&gt;::GetID (), scfInterface&lt;Interface&gt;::GetVersion())))</span>
<a name="l00892"></a>00892 <span class="preprocessor"></span>
<a name="l00897"></a>00897 <span class="keyword">enum</span>
<a name="l00898"></a>00898 {
<a name="l00899"></a>00899   <a class="code" href="group__scf.html#gga101a58">SCF_VERBOSE_NONE</a>            = 0,      
<a name="l00900"></a>00900   <a class="code" href="group__scf.html#gga101a59">SCF_VERBOSE_PLUGIN_SCAN</a>     = 1 &lt;&lt; 0, 
<a name="l00901"></a>00901   <a class="code" href="group__scf.html#gga101a60">SCF_VERBOSE_PLUGIN_LOAD</a>     = 1 &lt;&lt; 1, 
<a name="l00902"></a>00902   <a class="code" href="group__scf.html#gga101a61">SCF_VERBOSE_PLUGIN_REGISTER</a> = 1 &lt;&lt; 2, 
<a name="l00903"></a>00903   <a class="code" href="group__scf.html#gga101a62">SCF_VERBOSE_CLASS_REGISTER</a>  = 1 &lt;&lt; 3, 
<a name="l00904"></a><a class="code" href="group__scf.html#gga101a63">00904</a>   <a class="code" href="group__scf.html#gga101a63">SCF_VERBOSE_ALL</a>             = ~0      
<a name="l00905"></a>00905 };
<a name="l00906"></a>00906 
<a name="l00922"></a>00922 CS_CRYSTALSPACE_EXPORT <span class="keywordtype">void</span> <a class="code" href="group__scf.html#ga3">scfInitialize</a>(<a class="code" href="classcsPathsList.html">csPathsList</a> <span class="keyword">const</span>* pluginPaths,
<a name="l00923"></a>00923   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> verbose = <a class="code" href="group__scf.html#gga101a58">SCF_VERBOSE_NONE</a>);
<a name="l00924"></a>00924 
<a name="l00929"></a>00929 CS_CRYSTALSPACE_EXPORT <span class="keywordtype">void</span> <a class="code" href="group__scf.html#ga3">scfInitialize</a>(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> argv[]);
<a name="l00930"></a>00930 
<a name="l00937"></a><a class="code" href="group__scf.html#ga5">00937</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__scf.html#ga5">scfCompatibleVersion</a> (<span class="keywordtype">int</span> iVersion, <span class="keywordtype">int</span> iItfVersion)
<a name="l00938"></a>00938 {
<a name="l00939"></a>00939   <span class="keywordflow">return</span> ((iVersion &amp; 0xff000000) == (iItfVersion &amp; 0xff000000))
<a name="l00940"></a>00940       &amp;&amp; ((iVersion &amp; 0x00ffffff) &lt;= (iItfVersion &amp; 0x00ffffff));
<a name="l00941"></a>00941 }
<a name="l00942"></a>00942 
<a name="l00943"></a>00943 <span class="preprocessor">#if defined(CS_DEBUG) || defined(CS_MEMORY_TRACKER)</span>
<a name="l00944"></a>00944 <span class="preprocessor"></span>  <span class="keyword">struct </span><a class="code" href="structiObjectRegistry.html">iObjectRegistry</a>;
<a name="l00945"></a>00945 <span class="preprocessor">#endif</span>
<a name="l00946"></a>00946 <span class="preprocessor"></span>
<a name="l00953"></a><a class="code" href="structiSCF.html">00953</a> <span class="keyword">struct </span><a class="code" href="structiSCF.html">iSCF</a> : <span class="keyword">public</span> <a class="code" href="structiBase.html">iBase</a>
<a name="l00954"></a>00954 {
<a name="l00966"></a><a class="code" href="structiSCF.html#s0">00966</a>   <span class="keyword">static</span> CS_CRYSTALSPACE_EXPORT <a class="code" href="structiSCF.html">iSCF</a>* <a class="code" href="structiSCF.html#s0">SCF</a>;
<a name="l00967"></a>00967 
<a name="l00968"></a>00968 <span class="preprocessor">#if defined(CS_DEBUG) || defined(CS_MEMORY_TRACKER)</span>
<a name="l00969"></a>00969 <span class="preprocessor"></span>  <span class="comment">// This is EXTREMELY dirty but I see no other solution for now.</span>
<a name="l00970"></a>00970   <span class="comment">// For debugging reasons I must have a global (global over the application</span>
<a name="l00971"></a>00971   <span class="comment">// and all plugins)pointer to the object registry. I have no other</span>
<a name="l00972"></a>00972   <span class="comment">// global object to tag this pointer on that except for iSCF.</span>
<a name="l00973"></a>00973   <span class="comment">// This pointer is only here in debug mode though. That ensures that it</span>
<a name="l00974"></a>00974   <span class="comment">// cannot be misused in real code.</span>
<a name="l00975"></a>00975   <span class="comment">// If you know another solution for this problem? This global pointer</span>
<a name="l00976"></a>00976   <span class="comment">// will be used by csDebuggingGraph in csutil.</span>
<a name="l00977"></a>00977   <a class="code" href="structiObjectRegistry.html">iObjectRegistry</a>* object_reg;
<a name="l00978"></a>00978 <span class="preprocessor">#endif</span>
<a name="l00979"></a>00979 <span class="preprocessor"></span>
<a name="l00983"></a>00983   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a0">RegisterClasses</a> (<a class="code" href="structiDocument.html">iDocument</a>* metadata,
<a name="l00984"></a>00984     <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l00985"></a>00985 
<a name="l00991"></a>00991   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a0">RegisterClasses</a> (<span class="keywordtype">char</span> <span class="keyword">const</span>* xml,
<a name="l00992"></a>00992     <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l00993"></a>00993 
<a name="l00997"></a>00997   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a0">RegisterClasses</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* pluginPath,
<a name="l00998"></a>00998     <a class="code" href="structiDocument.html">iDocument</a>* metadata, <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l00999"></a>00999 
<a name="l01006"></a>01006   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a3">ClassRegistered</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID) = 0;
<a name="l01007"></a>01007 
<a name="l01023"></a>01023   <span class="keyword">virtual</span> <span class="keywordtype">void</span> *<a class="code" href="structiSCF.html#a4">CreateInstance</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID,
<a name="l01024"></a>01024         <span class="keyword">const</span> <span class="keywordtype">char</span> *iInterface, <span class="keywordtype">int</span> iVersion) = 0;
<a name="l01025"></a>01025 
<a name="l01031"></a>01031   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiSCF.html#a5">GetClassDescription</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID) = 0;
<a name="l01032"></a>01032 
<a name="l01038"></a>01038   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiSCF.html#a6">GetClassDependencies</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID) = 0;
<a name="l01039"></a>01039 
<a name="l01066"></a>01066   <span class="keyword">virtual</span> <a class="code" href="classcsRef.html">csRef&lt;iDocument&gt;</a> <a class="code" href="structiSCF.html#a7">GetPluginMetadata</a> (<span class="keywordtype">char</span> <span class="keyword">const</span> *iClassID) = 0;
<a name="l01067"></a>01067 
<a name="l01074"></a>01074   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a8">UnloadUnusedModules</a> () = 0;
<a name="l01075"></a>01075 
<a name="l01086"></a>01086   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a9">RegisterClass</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID,
<a name="l01087"></a>01087         <span class="keyword">const</span> <span class="keywordtype">char</span> *iLibraryName, <span class="keyword">const</span> <span class="keywordtype">char</span> *iFactoryClass,
<a name="l01088"></a>01088         <span class="keyword">const</span> <span class="keywordtype">char</span> *Description, <span class="keyword">const</span> <span class="keywordtype">char</span> *Dependencies = 0,
<a name="l01089"></a>01089         <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l01090"></a>01090 
<a name="l01097"></a>01097   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a9">RegisterClass</a> (<a class="code" href="group__scf.html#ga2">scfFactoryFunc</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID,
<a name="l01098"></a>01098         <span class="keyword">const</span> <span class="keywordtype">char</span> *Description, <span class="keyword">const</span> <span class="keywordtype">char</span> *Dependencies = 0,
<a name="l01099"></a>01099         <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l01100"></a>01100 
<a name="l01108"></a>01108   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a11">RegisterFactoryFunc</a> (<a class="code" href="group__scf.html#ga2">scfFactoryFunc</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *FactClass) = 0;
<a name="l01109"></a>01109 
<a name="l01116"></a>01116   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a12">UnregisterClass</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID) = 0;
<a name="l01117"></a>01117 
<a name="l01122"></a>01122   <span class="keyword">virtual</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="structiSCF.html#a13">GetInterfaceName</a> (<a class="code" href="group__scf.html#ga0">scfInterfaceID</a>) <span class="keyword">const </span>= 0;
<a name="l01123"></a>01123 
<a name="l01129"></a>01129   <span class="keyword">virtual</span> <a class="code" href="group__scf.html#ga0">scfInterfaceID</a> <a class="code" href="structiSCF.html#a14">GetInterfaceID</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iInterface) = 0;
<a name="l01130"></a>01130 
<a name="l01137"></a>01137   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a15">Finish</a> () = 0;
<a name="l01138"></a>01138 
<a name="l01148"></a>01148   <span class="keyword">virtual</span> <a class="code" href="classcsRef.html">csRef&lt;iStringArray&gt;</a> <a class="code" href="structiSCF.html#a16">QueryClassList</a> (<span class="keywordtype">char</span> <span class="keyword">const</span>* pattern) = 0;
<a name="l01149"></a>01149 
<a name="l01153"></a>01153   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a17">ScanPluginsPath</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* path, <span class="keywordtype">bool</span> recursive = <span class="keyword">false</span>,
<a name="l01154"></a>01154     <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l01155"></a>01155 
<a name="l01165"></a>01165   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a18">RegisterPlugin</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* path) = 0;
<a name="l01166"></a>01166 };
<a name="l01167"></a>01167 
<a name="l01168"></a>01168 <span class="preprocessor">#include "<a class="code" href="scf__new_8h.html">scf_new.h</a>"</span>
<a name="l01169"></a>01169 
<a name="l01170"></a>01170 <a class="code" href="group__scf.html#ga71">SCF_VERSION</a> (<a class="code" href="structiFactory.html">iFactory</a>, 0, 0, 2);
<a name="l01171"></a>01171 <a class="code" href="group__scf.html#ga71">SCF_VERSION</a> (<a class="code" href="structiBase.html">iBase</a>, 0, 1, 0);
<a name="l01172"></a>01172 <a class="code" href="group__scf.html#ga71">SCF_VERSION</a> (<a class="code" href="structiSCF.html">iSCF</a>, 0, 2, 1);
<a name="l01173"></a>01173 
<a name="l01174"></a>01174 <span class="comment">// A bit hacky.</span>
<a name="l01175"></a>01175 <span class="preprocessor">#include "csutil/reftrackeraccess.h"</span>
<a name="l01176"></a>01176 
<a name="l01179"></a>01179 <span class="preprocessor">#endif // __CSSCF_H__</span>
</pre></div><hr size="1"><address><small>Generated for Crystal Space by 
<a href="http://www.doxygen.org/index.html">doxygen</a> 1.4.3-20050530 
</small></address> </div></body> </html>
