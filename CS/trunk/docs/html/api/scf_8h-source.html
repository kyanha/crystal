<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Crystal Space: csutil/scf.h Source File (Crystal Space Public API Reference)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<table border="0" cellpadding="0" cellspacing="0" width="100%" class="head">
 <tr heigth="59">
  <td class="head" width="202" valign="bottom" style="padding-left:0;"><a href="http://www.crystalspace3d.org/"><img src="csblur.png" width="236" height="59" alt="CrystalSpace" border="0"></a></td>
  <td class="head"><h2>Public API Reference</h2></td>
 </tr>
 <tr heigth="11">
  <td colspan="2" class="headshadow" valign="top" style="padding-left:0;"><img src="csblurb.png" width="236" height="11" alt="" border="0"></td>
 </tr>
</table>
<div class="content">
<!-- Generated by Doxygen 1.4.3-20050530 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000022.html">csutil</a></div>
<h1>scf.h</h1><a href="scf_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">    Crystal Space Shared Class Facility (SCF)</span>
<a name="l00003"></a>00003 <span class="comment">    Copyright (C) 1999 by Andrew Zabolotny</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">    This library is free software; you can redistribute it and/or</span>
<a name="l00006"></a>00006 <span class="comment">    modify it under the terms of the GNU Library General Public</span>
<a name="l00007"></a>00007 <span class="comment">    License as published by the Free Software Foundation; either</span>
<a name="l00008"></a>00008 <span class="comment">    version 2 of the License, or (at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">    This library is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00013"></a>00013 <span class="comment">    Library General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment"></span>
<a name="l00015"></a>00015 <span class="comment">    You should have received a copy of the GNU Library General Public</span>
<a name="l00016"></a>00016 <span class="comment">    License along with this library; if not, write to the Free</span>
<a name="l00017"></a>00017 <span class="comment">    Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<a name="l00018"></a>00018 <span class="comment">*/</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef __CSSCF_H__</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define __CSSCF_H__</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include "csextern.h"</span>
<a name="l00024"></a>00024 
<a name="l00033"></a><a class="code" href="group__scf.html#ga0">00033</a> <span class="keyword">class </span><a class="code" href="classcsPathsList.html">csPathsList</a>;
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#include "<a class="code" href="ref_8h.html">ref.h</a>"</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include "<a class="code" href="array_8h.html">array.h</a>"</span>
<a name="l00037"></a>00037 
<a name="l00041"></a>00041 <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="group__scf.html#ga0">scfInterfaceID</a>;
<a name="l00042"></a>00042 
<a name="l00047"></a>00047 <span class="preprocessor">#ifdef SCF_DEBUG</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#  define SCF_TRACE(x)                                                  \</span>
<a name="l00049"></a>00049 <span class="preprocessor">   {                                                                    \</span>
<a name="l00050"></a>00050 <span class="preprocessor">     printf ("SCF [%s:%d]:\n", __FILE__, (int)__LINE__);                \</span>
<a name="l00051"></a>00051 <span class="preprocessor">     printf x; SCF_PRINT_CALL_ADDRESS                                   \</span>
<a name="l00052"></a>00052 <span class="preprocessor">   }</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00054"></a><a class="code" href="group__scf.html#ga18">00054</a> <span class="preprocessor"></span><span class="preprocessor">#  define SCF_TRACE(x)</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00061"></a>00061 <span class="preprocessor">#if (__GNUC__ &gt;= 3) || ((__GNUC__ &gt;= 2) &amp;&amp; (__GNUC_MINOR__ &gt;= 8))</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="preprocessor">#  define SCF_PRINT_CALL_ADDRESS                                        \</span>
<a name="l00063"></a>00063 <span class="preprocessor">   printf ("  Called from address %p\n", __builtin_return_address (0));</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00065"></a><a class="code" href="group__scf.html#ga19">00065</a> <span class="preprocessor"></span><span class="preprocessor">#  define SCF_PRINT_CALL_ADDRESS</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00069"></a><a class="code" href="group__scf.html#ga20">00069</a> <span class="preprocessor">#define SCF_CONSTRUCT_VERSION(Major,Minor,Micro)                        \</span>
<a name="l00070"></a>00070 <span class="preprocessor">  ((Major &lt;&lt; 24) | (Minor &lt;&lt; 16) | Micro)</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span>
<a name="l00077"></a><a class="code" href="structiBase.html">00077</a> <span class="keyword">struct </span><a class="code" href="structiBase.html">iBase</a>
<a name="l00078"></a>00078 {
<a name="l00079"></a>00079 <span class="comment">// Jorrit: removed the code below as it causes 'pure virtual' method</span>
<a name="l00080"></a>00080 <span class="comment">// calls to happen upon destruction.</span>
<a name="l00081"></a>00081 <span class="comment">//protected:</span>
<a name="l00084"></a>00084 <span class="comment"></span>  <span class="comment">//virtual ~iBase() {}</span>
<a name="l00085"></a>00085 <span class="keyword">public</span>:
<a name="l00087"></a>00087   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiBase.html#a0">IncRef</a> () = 0;
<a name="l00089"></a>00089   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiBase.html#a1">DecRef</a> () = 0;
<a name="l00091"></a>00091   <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="structiBase.html#a2">GetRefCount</a> () = 0;
<a name="l00093"></a>00093   <span class="keyword">virtual</span> <span class="keywordtype">void</span> *<a class="code" href="structiBase.html#a3">QueryInterface</a> (<a class="code" href="group__scf.html#ga0">scfInterfaceID</a> iInterfaceID, <span class="keywordtype">int</span> iVersion) = 0;
<a name="l00098"></a><a class="code" href="structiBase.html#e0">00098</a>   <span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="structiBase.html#e0">QueryInterfaceSafe</a> (<a class="code" href="structiBase.html">iBase</a>* ibase, <a class="code" href="group__scf.html#ga0">scfInterfaceID</a> iInterfaceID,
<a name="l00099"></a>00099         <span class="keywordtype">int</span> iVersion)
<a name="l00100"></a>00100   {
<a name="l00101"></a>00101     <span class="keywordflow">if</span> (ibase == 0) <span class="keywordflow">return</span> 0;
<a name="l00102"></a>00102     <span class="keywordflow">else</span> <span class="keywordflow">return</span> ibase-&gt;<a class="code" href="structiBase.html#a3">QueryInterface</a> (iInterfaceID, iVersion);
<a name="l00103"></a>00103   }
<a name="l00105"></a>00105   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiBase.html#a4">AddRefOwner</a> (<a class="code" href="structiBase.html">iBase</a>** ref_owner) = 0;
<a name="l00107"></a>00107   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiBase.html#a5">RemoveRefOwner</a> (<a class="code" href="structiBase.html">iBase</a>** ref_owner) = 0;
<a name="l00108"></a>00108 };
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="preprocessor">#ifdef CS_REF_TRACKER</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span><span class="preprocessor"> #include &lt;typeinfo&gt;</span>
<a name="l00112"></a>00112 <span class="preprocessor"> #define CS_TYPENAME(x)             typeid(x).name()</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span> <span class="comment">/* @@@ HACK: Force an AddAlias() call for every contained interface</span>
<a name="l00114"></a>00114 <span class="comment">  * However, when iSCF::SCF == 0, don't call QI to prevent interface ID </span>
<a name="l00115"></a>00115 <span class="comment">  * resolution (which will fail).</span>
<a name="l00116"></a>00116 <span class="comment">  */</span>
<a name="l00117"></a>00117 <span class="preprocessor"> #define SCF_INIT_TRACKER_ALIASES    \</span>
<a name="l00118"></a>00118 <span class="preprocessor">  if (iSCF::SCF != 0) QueryInterface ((scfInterfaceID)-1, -1);</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00120"></a><a class="code" href="group__scf.html#ga21">00120</a> <span class="preprocessor"></span><span class="preprocessor"> #define CS_TYPENAME(x)             0</span>
<a name="l00121"></a><a class="code" href="group__scf.html#ga22">00121</a> <span class="preprocessor"></span><span class="preprocessor"> #define SCF_INIT_TRACKER_ALIASES</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00123"></a>00123 <span class="preprocessor"></span>
<a name="l00128"></a><a class="code" href="group__scf.html#ga23">00128</a> <span class="preprocessor">#define SCF_DECLARE_IBASE                                               \</span>
<a name="l00129"></a>00129 <span class="preprocessor">  int scfRefCount;              </span><span class="comment">/* Reference counter */</span>                 \
<a name="l00130"></a>00130   csArray&lt;iBase**&gt;* scfWeakRefOwners;                                   \
<a name="l00131"></a>00131   void scfRemoveRefOwners ();                                           \
<a name="l00132"></a>00132   SCF_DECLARE_EMBEDDED_IBASE (iBase)
<a name="l00133"></a>00133 
<a name="l00138"></a><a class="code" href="group__scf.html#ga24">00138</a> <span class="preprocessor">#define SCF_DECLARE_EMBEDDED_IBASE(OuterClass)                          \</span>
<a name="l00139"></a>00139 <span class="preprocessor">public:                                                                 \</span>
<a name="l00140"></a>00140 <span class="preprocessor">  OuterClass *scfParent;        </span><span class="comment">/* The parent object */</span>                 \
<a name="l00141"></a>00141   virtual void IncRef ();                                               \
<a name="l00142"></a>00142   virtual void DecRef ();                                               \
<a name="l00143"></a>00143   virtual int GetRefCount ();                                           \
<a name="l00144"></a>00144   virtual void AddRefOwner (iBase** ref_owner);                         \
<a name="l00145"></a>00145   virtual void RemoveRefOwner (iBase** ref_owner);                      \
<a name="l00146"></a>00146   virtual void *QueryInterface (scfInterfaceID iInterfaceID, int iVersion)
<a name="l00147"></a>00147 
<a name="l00157"></a><a class="code" href="group__scf.html#ga25">00157</a> <span class="preprocessor">#define SCF_CONSTRUCT_IBASE(Parent)                                     \</span>
<a name="l00158"></a>00158 <span class="preprocessor">  csRefTrackerAccess::TrackConstruction (this);                         \</span>
<a name="l00159"></a>00159 <span class="preprocessor">  csRefTrackerAccess::SetDescription (this, CS_TYPENAME(*this));        \</span>
<a name="l00160"></a>00160 <span class="preprocessor">  scfRefCount = 1;                                                      \</span>
<a name="l00161"></a>00161 <span class="preprocessor">  scfWeakRefOwners = 0;                                                 \</span>
<a name="l00162"></a>00162 <span class="preprocessor">  scfParent = Parent; if (scfParent) scfParent-&gt;IncRef();               \</span>
<a name="l00163"></a>00163 <span class="preprocessor">  SCF_INIT_TRACKER_ALIASES                                              </span>
<a name="l00164"></a>00164 <span class="preprocessor"></span>
<a name="l00174"></a><a class="code" href="group__scf.html#ga26">00174</a> <span class="preprocessor">#define SCF_CONSTRUCT_EMBEDDED_IBASE(Interface)                         \</span>
<a name="l00175"></a>00175 <span class="preprocessor">  Interface.scfParent = this;                                           \</span>
<a name="l00176"></a>00176 <span class="preprocessor">  csRefTrackerAccess::AddAlias (&amp;Interface, this);</span>
<a name="l00177"></a>00177 <span class="preprocessor"></span>
<a name="l00183"></a><a class="code" href="group__scf.html#ga27">00183</a> <span class="preprocessor">#define SCF_DESTRUCT_IBASE()                                            \</span>
<a name="l00184"></a>00184 <span class="preprocessor">  csRefTrackerAccess::TrackDestruction (this, scfRefCount);             \</span>
<a name="l00185"></a>00185 <span class="preprocessor">  scfRemoveRefOwners ();</span>
<a name="l00186"></a>00186 <span class="preprocessor"></span>
<a name="l00193"></a><a class="code" href="group__scf.html#ga28">00193</a> <span class="preprocessor">#define SCF_DESTRUCT_EMBEDDED_IBASE(Interface)                          \</span>
<a name="l00194"></a>00194 <span class="preprocessor">  csRefTrackerAccess::RemoveAlias (&amp;Interface, this);                   \</span>
<a name="l00195"></a>00195 <span class="preprocessor">  Interface.scfParent = 0;</span>
<a name="l00196"></a>00196 <span class="preprocessor"></span>
<a name="l00202"></a><a class="code" href="group__scf.html#ga29">00202</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_INCREF(Class)                               \</span>
<a name="l00203"></a>00203 <span class="preprocessor">void Class::IncRef ()                                                   \</span>
<a name="l00204"></a>00204 <span class="preprocessor">{                                                                       \</span>
<a name="l00205"></a>00205 <span class="preprocessor">  SCF_TRACE (("  (%s *)%p-&gt;IncRef (%d)\n", #Class, this, scfRefCount + 1));\</span>
<a name="l00206"></a>00206 <span class="preprocessor">  csRefTrackerAccess::TrackIncRef (this, scfRefCount);                  \</span>
<a name="l00207"></a>00207 <span class="preprocessor">  scfRefCount++;                                                        \</span>
<a name="l00208"></a>00208 <span class="preprocessor">}</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span>
<a name="l00218"></a><a class="code" href="group__scf.html#ga30">00218</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_DECREF(Class)                               \</span>
<a name="l00219"></a>00219 <span class="preprocessor">void Class::DecRef ()                                                   \</span>
<a name="l00220"></a>00220 <span class="preprocessor">{                                                                       \</span>
<a name="l00221"></a>00221 <span class="preprocessor">  csRefTrackerAccess::TrackDecRef (this, scfRefCount);                  \</span>
<a name="l00222"></a>00222 <span class="preprocessor">  if (scfRefCount == 1)                                                 \</span>
<a name="l00223"></a>00223 <span class="preprocessor">  {                                                                     \</span>
<a name="l00224"></a>00224 <span class="preprocessor">    SCF_TRACE ((" delete (%s *)%p\n", #Class, this));                   \</span>
<a name="l00225"></a>00225 <span class="preprocessor">    scfRemoveRefOwners ();                                              \</span>
<a name="l00226"></a>00226 <span class="preprocessor">    if (scfParent)                                                      \</span>
<a name="l00227"></a>00227 <span class="preprocessor">      scfParent-&gt;DecRef ();                                             \</span>
<a name="l00228"></a>00228 <span class="preprocessor">    delete this;                                                        \</span>
<a name="l00229"></a>00229 <span class="preprocessor">    return;                                                             \</span>
<a name="l00230"></a>00230 <span class="preprocessor">  }                                                                     \</span>
<a name="l00231"></a>00231 <span class="preprocessor">  scfRefCount--;                                                        \</span>
<a name="l00232"></a>00232 <span class="preprocessor">}</span>
<a name="l00233"></a>00233 <span class="preprocessor"></span>
<a name="l00240"></a><a class="code" href="group__scf.html#ga31">00240</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_REMOVE_REF_OWNERS(Class)                    \</span>
<a name="l00241"></a>00241 <span class="preprocessor">void Class::scfRemoveRefOwners ()                                       \</span>
<a name="l00242"></a>00242 <span class="preprocessor">{                                                                       \</span>
<a name="l00243"></a>00243 <span class="preprocessor">  if (!scfWeakRefOwners) return;                                        \</span>
<a name="l00244"></a>00244 <span class="preprocessor">  for (size_t i = 0 ; i &lt; scfWeakRefOwners-&gt;Length () ; i++)            \</span>
<a name="l00245"></a>00245 <span class="preprocessor">  {                                                                     \</span>
<a name="l00246"></a>00246 <span class="preprocessor">    iBase** p = (*scfWeakRefOwners)[i];                                 \</span>
<a name="l00247"></a>00247 <span class="preprocessor">    *p = 0;                                                             \</span>
<a name="l00248"></a>00248 <span class="preprocessor">  }                                                                     \</span>
<a name="l00249"></a>00249 <span class="preprocessor">  delete scfWeakRefOwners;                                              \</span>
<a name="l00250"></a>00250 <span class="preprocessor">  scfWeakRefOwners = 0;                                                 \</span>
<a name="l00251"></a>00251 <span class="preprocessor">}</span>
<a name="l00252"></a>00252 <span class="preprocessor"></span>
<a name="l00257"></a><a class="code" href="group__scf.html#ga32">00257</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_REFOWNER(Class)                             \</span>
<a name="l00258"></a>00258 <span class="preprocessor">void Class::AddRefOwner (iBase** ref_owner)                             \</span>
<a name="l00259"></a>00259 <span class="preprocessor">{                                                                       \</span>
<a name="l00260"></a>00260 <span class="preprocessor">  if (!scfWeakRefOwners)                                                \</span>
<a name="l00261"></a>00261 <span class="preprocessor">    scfWeakRefOwners = new csArray&lt;iBase**&gt; (0, 4);                     \</span>
<a name="l00262"></a>00262 <span class="preprocessor">  scfWeakRefOwners-&gt;InsertSorted (ref_owner);                           \</span>
<a name="l00263"></a>00263 <span class="preprocessor">}                                                                       \</span>
<a name="l00264"></a>00264 <span class="preprocessor">void Class::RemoveRefOwner (iBase** ref_owner)                          \</span>
<a name="l00265"></a>00265 <span class="preprocessor">{                                                                       \</span>
<a name="l00266"></a>00266 <span class="preprocessor">  if (!scfWeakRefOwners)                                                \</span>
<a name="l00267"></a>00267 <span class="preprocessor">    return;                                                             \</span>
<a name="l00268"></a>00268 <span class="preprocessor">  size_t index = scfWeakRefOwners-&gt;FindSortedKey (                      \</span>
<a name="l00269"></a>00269 <span class="preprocessor">    csArrayCmp&lt;iBase**, iBase**&gt; (ref_owner));                          \</span>
<a name="l00270"></a>00270 <span class="preprocessor">  if (index != csArrayItemNotFound) scfWeakRefOwners-&gt;DeleteIndex (     \</span>
<a name="l00271"></a>00271 <span class="preprocessor">    index);                                                             \</span>
<a name="l00272"></a>00272 <span class="preprocessor">}</span>
<a name="l00273"></a>00273 <span class="preprocessor"></span>
<a name="l00278"></a><a class="code" href="group__scf.html#ga33">00278</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_GETREFCOUNT(Class)                          \</span>
<a name="l00279"></a>00279 <span class="preprocessor">int Class::GetRefCount ()                                               \</span>
<a name="l00280"></a>00280 <span class="preprocessor">{                                                                       \</span>
<a name="l00281"></a>00281 <span class="preprocessor">  return scfRefCount;                                                   \</span>
<a name="l00282"></a>00282 <span class="preprocessor">}</span>
<a name="l00283"></a>00283 <span class="preprocessor"></span>
<a name="l00290"></a><a class="code" href="group__scf.html#ga34">00290</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_QUERY(Class)                                \</span>
<a name="l00291"></a>00291 <span class="preprocessor">void *Class::QueryInterface (scfInterfaceID iInterfaceID, int iVersion) \</span>
<a name="l00292"></a>00292 <span class="preprocessor">{                                                                       \</span>
<a name="l00293"></a>00293 <span class="preprocessor">  SCF_TRACE (("  (%s *)%p-&gt;QueryInterface (%lu, %08X)\n",               \</span>
<a name="l00294"></a>00294 <span class="preprocessor">    #Class, this, iInterfaceID, iVersion));</span>
<a name="l00295"></a>00295 <span class="preprocessor"></span>
<a name="l00302"></a><a class="code" href="group__scf.html#ga35">00302</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_QUERY_END                                   \</span>
<a name="l00303"></a>00303 <span class="preprocessor">  return scfParent ?                                                    \</span>
<a name="l00304"></a>00304 <span class="preprocessor">    scfParent-&gt;QueryInterface (iInterfaceID, iVersion) : 0;             \</span>
<a name="l00305"></a>00305 <span class="preprocessor">}</span>
<a name="l00306"></a>00306 <span class="preprocessor"></span>
<a name="l00312"></a><a class="code" href="group__scf.html#ga36">00312</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE(Class)                                      \</span>
<a name="l00313"></a>00313 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_INCREF(Class)                                     \</span>
<a name="l00314"></a>00314 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_DECREF(Class)                                     \</span>
<a name="l00315"></a>00315 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_GETREFCOUNT(Class)                                \</span>
<a name="l00316"></a>00316 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_REFOWNER(Class)                                   \</span>
<a name="l00317"></a>00317 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_REMOVE_REF_OWNERS(Class)                          \</span>
<a name="l00318"></a>00318 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_QUERY(Class)</span>
<a name="l00319"></a>00319 <span class="preprocessor"></span>
<a name="l00324"></a><a class="code" href="group__scf.html#ga37">00324</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_END                                         \</span>
<a name="l00325"></a>00325 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_QUERY_END</span>
<a name="l00326"></a>00326 <span class="preprocessor"></span>
<a name="l00333"></a><a class="code" href="group__scf.html#ga38">00333</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_INCREF(Class)                      \</span>
<a name="l00334"></a>00334 <span class="preprocessor">void Class::IncRef ()                                                   \</span>
<a name="l00335"></a>00335 <span class="preprocessor">{                                                                       \</span>
<a name="l00336"></a>00336 <span class="preprocessor">  SCF_TRACE (("  (%s *)%p-&gt;IncRef (%d)\n", #Class, this,                \</span>
<a name="l00337"></a>00337 <span class="preprocessor">    scfParent-&gt;GetRefCount () + 1));                                    \</span>
<a name="l00338"></a>00338 <span class="preprocessor">  scfParent-&gt;IncRef ();                                                 \</span>
<a name="l00339"></a>00339 <span class="preprocessor">}</span>
<a name="l00340"></a>00340 <span class="preprocessor"></span>
<a name="l00347"></a><a class="code" href="group__scf.html#ga39">00347</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_DECREF(Class)                      \</span>
<a name="l00348"></a>00348 <span class="preprocessor">void Class::DecRef ()                                                   \</span>
<a name="l00349"></a>00349 <span class="preprocessor">{                                                                       \</span>
<a name="l00350"></a>00350 <span class="preprocessor">  SCF_TRACE (("  (%s *)%p-&gt;DecRef (%d)\n", #Class, this,                \</span>
<a name="l00351"></a>00351 <span class="preprocessor">              scfParent-&gt;GetRefCount ()-1));                            \</span>
<a name="l00352"></a>00352 <span class="preprocessor">  scfParent-&gt;DecRef ();                                                 \</span>
<a name="l00353"></a>00353 <span class="preprocessor">}</span>
<a name="l00354"></a>00354 <span class="preprocessor"></span>
<a name="l00359"></a><a class="code" href="group__scf.html#ga40">00359</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_GETREFCOUNT(Class)                 \</span>
<a name="l00360"></a>00360 <span class="preprocessor">int Class::GetRefCount ()                                               \</span>
<a name="l00361"></a>00361 <span class="preprocessor">{                                                                       \</span>
<a name="l00362"></a>00362 <span class="preprocessor">  return scfParent-&gt;GetRefCount ();                                     \</span>
<a name="l00363"></a>00363 <span class="preprocessor">}</span>
<a name="l00364"></a>00364 <span class="preprocessor"></span>
<a name="l00369"></a><a class="code" href="group__scf.html#ga41">00369</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_REFOWNER(Class)                    \</span>
<a name="l00370"></a>00370 <span class="preprocessor">void Class::AddRefOwner (iBase** ref_owner)                             \</span>
<a name="l00371"></a>00371 <span class="preprocessor">{                                                                       \</span>
<a name="l00372"></a>00372 <span class="preprocessor">  scfParent-&gt;AddRefOwner (ref_owner);                                   \</span>
<a name="l00373"></a>00373 <span class="preprocessor">}                                                                       \</span>
<a name="l00374"></a>00374 <span class="preprocessor">void Class::RemoveRefOwner (iBase** ref_owner)                          \</span>
<a name="l00375"></a>00375 <span class="preprocessor">{                                                                       \</span>
<a name="l00376"></a>00376 <span class="preprocessor">  scfParent-&gt;RemoveRefOwner (ref_owner);                                \</span>
<a name="l00377"></a>00377 <span class="preprocessor">}</span>
<a name="l00378"></a>00378 <span class="preprocessor"></span>
<a name="l00385"></a><a class="code" href="group__scf.html#ga42">00385</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_QUERY(Class)                       \</span>
<a name="l00386"></a>00386 <span class="preprocessor">void *Class::QueryInterface (scfInterfaceID iInterfaceID, int iVersion) \</span>
<a name="l00387"></a>00387 <span class="preprocessor">{                                                                       \</span>
<a name="l00388"></a>00388 <span class="preprocessor">  SCF_TRACE (("  (%s *)%p-&gt;QueryInterface (%lu, %08X)\n",               \</span>
<a name="l00389"></a>00389 <span class="preprocessor">    #Class, this, iInterfaceID, iVersion));</span>
<a name="l00390"></a>00390 <span class="preprocessor"></span>
<a name="l00397"></a><a class="code" href="group__scf.html#ga43">00397</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_QUERY_END                          \</span>
<a name="l00398"></a>00398 <span class="preprocessor">  return scfParent-&gt;QueryInterface (iInterfaceID, iVersion);            \</span>
<a name="l00399"></a>00399 <span class="preprocessor">}</span>
<a name="l00400"></a>00400 <span class="preprocessor"></span>
<a name="l00407"></a><a class="code" href="group__scf.html#ga44">00407</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE(Class)                             \</span>
<a name="l00408"></a>00408 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_INCREF(Class)                            \</span>
<a name="l00409"></a>00409 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_DECREF(Class)                            \</span>
<a name="l00410"></a>00410 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_GETREFCOUNT(Class)                       \</span>
<a name="l00411"></a>00411 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_REFOWNER(Class)                          \</span>
<a name="l00412"></a>00412 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_QUERY(Class)</span>
<a name="l00413"></a>00413 <span class="preprocessor"></span>
<a name="l00418"></a><a class="code" href="group__scf.html#ga45">00418</a> <span class="preprocessor">#define SCF_IMPLEMENT_EMBEDDED_IBASE_END                                \</span>
<a name="l00419"></a>00419 <span class="preprocessor">  SCF_IMPLEMENT_EMBEDDED_IBASE_QUERY_END</span>
<a name="l00420"></a>00420 <span class="preprocessor"></span>
<a name="l00427"></a><a class="code" href="group__scf.html#ga46">00427</a> <span class="preprocessor">#define SCF_IMPLEMENTS_INTERFACE(Interface)                             \</span>
<a name="l00428"></a>00428 <span class="preprocessor">  csRefTrackerAccess::AddAlias (CS_STATIC_CAST(Interface*, this), this);\</span>
<a name="l00429"></a>00429 <span class="preprocessor">  SCF_IMPLEMENTS_INTERFACE_COMMON (Interface, this)</span>
<a name="l00430"></a>00430 <span class="preprocessor"></span>
<a name="l00435"></a><a class="code" href="group__scf.html#ga47">00435</a> <span class="preprocessor">#define SCF_IMPLEMENTS_EMBEDDED_INTERFACE(Interface)                    \</span>
<a name="l00436"></a>00436 <span class="preprocessor">  SCF_IMPLEMENTS_INTERFACE_COMMON (Interface, (&amp;scf##Interface))</span>
<a name="l00437"></a>00437 <span class="preprocessor"></span>
<a name="l00441"></a><a class="code" href="group__scf.html#ga48">00441</a> <span class="preprocessor">#define SCF_IMPLEMENTS_INTERFACE_COMMON(Interface,Object)               \</span>
<a name="l00442"></a>00442 <span class="preprocessor">  if (iInterfaceID == scfInterface&lt;Interface&gt;::GetID() &amp;&amp;               \</span>
<a name="l00443"></a>00443 <span class="preprocessor">    scfCompatibleVersion (iVersion, scfInterface&lt;Interface&gt;::GetVersion())) \</span>
<a name="l00444"></a>00444 <span class="preprocessor">  {                                                                     \</span>
<a name="l00445"></a>00445 <span class="preprocessor">    (Object)-&gt;IncRef ();                                                \</span>
<a name="l00446"></a>00446 <span class="preprocessor">    return CS_STATIC_CAST(Interface*, Object);                          \</span>
<a name="l00447"></a>00447 <span class="preprocessor">  }</span>
<a name="l00448"></a>00448 <span class="preprocessor"></span>
<a name="l00459"></a><a class="code" href="group__scf.html#ga49">00459</a> <span class="preprocessor">#define SCF_DECLARE_IBASE_EXT(ParentClass)                              \</span>
<a name="l00460"></a>00460 <span class="preprocessor">  typedef ParentClass __scf_superclass;                                 \</span>
<a name="l00461"></a>00461 <span class="preprocessor">  virtual void IncRef ();                                               \</span>
<a name="l00462"></a>00462 <span class="preprocessor">  virtual void DecRef ();                                               \</span>
<a name="l00463"></a>00463 <span class="preprocessor">  virtual int GetRefCount ();                                           \</span>
<a name="l00464"></a>00464 <span class="preprocessor">  virtual void AddRefOwner (iBase** ref_owner);                         \</span>
<a name="l00465"></a>00465 <span class="preprocessor">  virtual void RemoveRefOwner (iBase** ref_owner);                      \</span>
<a name="l00466"></a>00466 <span class="preprocessor">  virtual void *QueryInterface (scfInterfaceID iInterfaceID, int iVersion)</span>
<a name="l00467"></a>00467 <span class="preprocessor"></span>
<a name="l00474"></a><a class="code" href="group__scf.html#ga50">00474</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_INCREF(Class)                           \</span>
<a name="l00475"></a>00475 <span class="preprocessor">void Class::IncRef ()                                                   \</span>
<a name="l00476"></a>00476 <span class="preprocessor">{                                                                       \</span>
<a name="l00477"></a>00477 <span class="preprocessor">  __scf_superclass::IncRef ();                                          \</span>
<a name="l00478"></a>00478 <span class="preprocessor">}</span>
<a name="l00479"></a>00479 <span class="preprocessor"></span>
<a name="l00486"></a><a class="code" href="group__scf.html#ga51">00486</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_DECREF(Class)                           \</span>
<a name="l00487"></a>00487 <span class="preprocessor">void Class::DecRef ()                                                   \</span>
<a name="l00488"></a>00488 <span class="preprocessor">{                                                                       \</span>
<a name="l00489"></a>00489 <span class="preprocessor">  __scf_superclass::DecRef ();                                          \</span>
<a name="l00490"></a>00490 <span class="preprocessor">}</span>
<a name="l00491"></a>00491 <span class="preprocessor"></span>
<a name="l00498"></a><a class="code" href="group__scf.html#ga52">00498</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_GETREFCOUNT(Class)                      \</span>
<a name="l00499"></a>00499 <span class="preprocessor">int Class::GetRefCount ()                                               \</span>
<a name="l00500"></a>00500 <span class="preprocessor">{                                                                       \</span>
<a name="l00501"></a>00501 <span class="preprocessor">  return __scf_superclass::GetRefCount ();                              \</span>
<a name="l00502"></a>00502 <span class="preprocessor">}</span>
<a name="l00503"></a>00503 <span class="preprocessor"></span>
<a name="l00508"></a><a class="code" href="group__scf.html#ga53">00508</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_REFOWNER(Class)                 \</span>
<a name="l00509"></a>00509 <span class="preprocessor">void Class::AddRefOwner (iBase** ref_owner)                             \</span>
<a name="l00510"></a>00510 <span class="preprocessor">{                                                                       \</span>
<a name="l00511"></a>00511 <span class="preprocessor">  __scf_superclass::AddRefOwner (ref_owner);                            \</span>
<a name="l00512"></a>00512 <span class="preprocessor">}                                                                       \</span>
<a name="l00513"></a>00513 <span class="preprocessor">void Class::RemoveRefOwner (iBase** ref_owner)                          \</span>
<a name="l00514"></a>00514 <span class="preprocessor">{                                                                       \</span>
<a name="l00515"></a>00515 <span class="preprocessor">  __scf_superclass::RemoveRefOwner (ref_owner);                         \</span>
<a name="l00516"></a>00516 <span class="preprocessor">}</span>
<a name="l00517"></a>00517 <span class="preprocessor"></span>
<a name="l00524"></a><a class="code" href="group__scf.html#ga54">00524</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_QUERY(Class)                            \</span>
<a name="l00525"></a>00525 <span class="preprocessor">void *Class::QueryInterface (scfInterfaceID iInterfaceID, int iVersion) \</span>
<a name="l00526"></a>00526 <span class="preprocessor">{</span>
<a name="l00527"></a>00527 <span class="preprocessor"></span>
<a name="l00534"></a><a class="code" href="group__scf.html#ga55">00534</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_QUERY_END                               \</span>
<a name="l00535"></a>00535 <span class="preprocessor">  return __scf_superclass::QueryInterface (iInterfaceID, iVersion);     \</span>
<a name="l00536"></a>00536 <span class="preprocessor">}</span>
<a name="l00537"></a>00537 <span class="preprocessor"></span>
<a name="l00542"></a><a class="code" href="group__scf.html#ga56">00542</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT(Class)                                  \</span>
<a name="l00543"></a>00543 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_INCREF(Class)                                 \</span>
<a name="l00544"></a>00544 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_DECREF(Class)                                 \</span>
<a name="l00545"></a>00545 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_GETREFCOUNT(Class)                            \</span>
<a name="l00546"></a>00546 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_REFOWNER(Class)                               \</span>
<a name="l00547"></a>00547 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_QUERY(Class)</span>
<a name="l00548"></a>00548 <span class="preprocessor"></span>
<a name="l00553"></a><a class="code" href="group__scf.html#ga57">00553</a> <span class="preprocessor">#define SCF_IMPLEMENT_IBASE_EXT_END                                     \</span>
<a name="l00554"></a>00554 <span class="preprocessor">  SCF_IMPLEMENT_IBASE_EXT_QUERY_END</span>
<a name="l00555"></a>00555 <span class="preprocessor"></span>
<a name="l00571"></a>00571 <span class="preprocessor">#ifdef CS_MEMORY_TRACKER</span>
<a name="l00572"></a>00572 <span class="preprocessor"></span><span class="comment">// This special version of SCF_IMPLEMENT_FACTORY_INIT will make sure that</span>
<a name="l00573"></a>00573 <span class="comment">// the memory tracker for this plugin is implemented.</span>
<a name="l00574"></a>00574 <span class="preprocessor">#define SCF_IMPLEMENT_FACTORY_INIT(Class)                               \</span>
<a name="l00575"></a>00575 <span class="preprocessor">static inline void Class ## _scfUnitInitialize(iSCF* SCF)               \</span>
<a name="l00576"></a>00576 <span class="preprocessor">{                                                                       \</span>
<a name="l00577"></a>00577 <span class="preprocessor">  iSCF::SCF = SCF;                                                      \</span>
<a name="l00578"></a>00578 <span class="preprocessor">  extern void mtiRegisterModule (char*);                                \</span>
<a name="l00579"></a>00579 <span class="preprocessor">  mtiRegisterModule (#Class);                                           \</span>
<a name="l00580"></a>00580 <span class="preprocessor">}                                                                       \</span>
<a name="l00581"></a>00581 <span class="preprocessor">CS_EXPORTED_FUNCTION                                                    \</span>
<a name="l00582"></a>00582 <span class="preprocessor">void CS_EXPORTED_NAME(Class,_scfInitialize)(iSCF* SCF)                  \</span>
<a name="l00583"></a>00583 <span class="preprocessor">{ Class ## _scfUnitInitialize(SCF); }</span>
<a name="l00584"></a>00584 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00585"></a><a class="code" href="group__scf.html#ga58">00585</a> <span class="preprocessor"></span><span class="preprocessor">#define SCF_IMPLEMENT_FACTORY_INIT(Class)                               \</span>
<a name="l00586"></a>00586 <span class="preprocessor">static inline void Class ## _scfUnitInitialize(iSCF* SCF)               \</span>
<a name="l00587"></a>00587 <span class="preprocessor">{ iSCF::SCF = SCF; }                                                    \</span>
<a name="l00588"></a>00588 <span class="preprocessor">CS_EXPORTED_FUNCTION                                                    \</span>
<a name="l00589"></a>00589 <span class="preprocessor">void CS_EXPORTED_NAME(Class,_scfInitialize)(iSCF* SCF)                  \</span>
<a name="l00590"></a>00590 <span class="preprocessor">{ Class ## _scfUnitInitialize(SCF); }</span>
<a name="l00591"></a>00591 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00592"></a>00592 <span class="preprocessor"></span>
<a name="l00598"></a><a class="code" href="group__scf.html#ga59">00598</a> <span class="preprocessor">#define SCF_IMPLEMENT_FACTORY_FINIS(Class)                              \</span>
<a name="l00599"></a>00599 <span class="preprocessor">CS_EXPORTED_FUNCTION                                                    \</span>
<a name="l00600"></a>00600 <span class="preprocessor">void CS_EXPORTED_NAME(Class,_scfFinalize)()                             \</span>
<a name="l00601"></a>00601 <span class="preprocessor">{                                                                       \</span>
<a name="l00602"></a>00602 <span class="preprocessor">CS_STATIC_VARIABLE_CLEANUP                                              \</span>
<a name="l00603"></a>00603 <span class="preprocessor">}</span>
<a name="l00604"></a>00604 <span class="preprocessor"></span>
<a name="l00611"></a><a class="code" href="group__scf.html#ga60">00611</a> <span class="preprocessor">#define SCF_IMPLEMENT_FACTORY_CREATE(Class)                             \</span>
<a name="l00612"></a>00612 <span class="preprocessor">CS_EXPORTED_FUNCTION                                                    \</span>
<a name="l00613"></a>00613 <span class="preprocessor">void* CS_EXPORTED_NAME(Class,_Create)(iBase *iParent)                   \</span>
<a name="l00614"></a>00614 <span class="preprocessor">{                                                                       \</span>
<a name="l00615"></a>00615 <span class="preprocessor">  void *ret = new Class (iParent);                                      \</span>
<a name="l00616"></a>00616 <span class="preprocessor">  SCF_TRACE (("  %p = new %s ()\n", ret, #Class));                      \</span>
<a name="l00617"></a>00617 <span class="preprocessor">  return ret;                                                           \</span>
<a name="l00618"></a>00618 <span class="preprocessor">}</span>
<a name="l00619"></a>00619 <span class="preprocessor"></span>
<a name="l00626"></a><a class="code" href="group__scf.html#ga61">00626</a> <span class="preprocessor">#define SCF_IMPLEMENT_FACTORY(Class)                                    \</span>
<a name="l00627"></a>00627 <span class="preprocessor">  SCF_IMPLEMENT_FACTORY_INIT(Class)                                     \</span>
<a name="l00628"></a>00628 <span class="preprocessor">  SCF_IMPLEMENT_FACTORY_FINIS(Class)                                    \</span>
<a name="l00629"></a>00629 <span class="preprocessor">  SCF_IMPLEMENT_FACTORY_CREATE(Class)</span>
<a name="l00630"></a>00630 <span class="preprocessor"></span>
<a name="l00631"></a><a class="code" href="group__scf.html#ga62">00631</a> <span class="preprocessor">#define SCF_STATIC_CLASS_CONTEXT      "*static*"</span>
<a name="l00632"></a>00632 <span class="preprocessor"></span>
<a name="l00641"></a><a class="code" href="group__scf.html#ga63">00641</a> <span class="preprocessor">#define SCF_REGISTER_STATIC_CLASS(Class,Ident,Desc,Dep)                 \</span>
<a name="l00642"></a>00642 <span class="preprocessor">  CS_EXPORTED_FUNCTION void* CS_EXPORTED_NAME(Class,_Create)(iBase*);   \</span>
<a name="l00643"></a>00643 <span class="preprocessor">  class Class##_StaticInit__                                            \</span>
<a name="l00644"></a>00644 <span class="preprocessor">  {                                                                     \</span>
<a name="l00645"></a>00645 <span class="preprocessor">  public:                                                               \</span>
<a name="l00646"></a>00646 <span class="preprocessor">    Class##_StaticInit__()                                              \</span>
<a name="l00647"></a>00647 <span class="preprocessor">    {                                                                   \</span>
<a name="l00648"></a>00648 <span class="preprocessor">      scfInitialize(0);                                                 \</span>
<a name="l00649"></a>00649 <span class="preprocessor">      iSCF::SCF-&gt;RegisterClass(                                         \</span>
<a name="l00650"></a>00650 <span class="preprocessor">        CS_EXPORTED_NAME(Class,_Create), Ident, Desc, Dep,              \</span>
<a name="l00651"></a>00651 <span class="preprocessor">        SCF_STATIC_CLASS_CONTEXT);                                      \</span>
<a name="l00652"></a>00652 <span class="preprocessor">    }                                                                   \</span>
<a name="l00653"></a>00653 <span class="preprocessor">  } Class##_static_init__;</span>
<a name="l00654"></a>00654 <span class="preprocessor"></span>
<a name="l00659"></a><a class="code" href="group__scf.html#ga64">00659</a> <span class="preprocessor">#define SCF_REGISTER_STATIC_LIBRARY(Module, MetaInfo)                   \</span>
<a name="l00660"></a>00660 <span class="preprocessor">  class Module##_StaticInit                                             \</span>
<a name="l00661"></a>00661 <span class="preprocessor">  {                                                                     \</span>
<a name="l00662"></a>00662 <span class="preprocessor">  public:                                                               \</span>
<a name="l00663"></a>00663 <span class="preprocessor">    Module##_StaticInit()                                               \</span>
<a name="l00664"></a>00664 <span class="preprocessor">    {                                                                   \</span>
<a name="l00665"></a>00665 <span class="preprocessor">      scfInitialize(0);                                                 \</span>
<a name="l00666"></a>00666 <span class="preprocessor">      iSCF::SCF-&gt;RegisterClasses(MetaInfo, SCF_STATIC_CLASS_CONTEXT);   \</span>
<a name="l00667"></a>00667 <span class="preprocessor">    }                                                                   \</span>
<a name="l00668"></a>00668 <span class="preprocessor">  } Module##_static_init__;</span>
<a name="l00669"></a>00669 <span class="preprocessor"></span>
<a name="l00674"></a><a class="code" href="group__scf.html#ga65">00674</a> <span class="preprocessor">#define SCF_DEFINE_FACTORY_FUNC_REGISTRATION(Class)                     \</span>
<a name="l00675"></a>00675 <span class="preprocessor">  CS_EXPORTED_FUNCTION void* CS_EXPORTED_NAME(Class,_Create)(iBase*);   \</span>
<a name="l00676"></a>00676 <span class="preprocessor">  class Class##_StaticInit                                              \</span>
<a name="l00677"></a>00677 <span class="preprocessor">  {                                                                     \</span>
<a name="l00678"></a>00678 <span class="preprocessor">  public:                                                               \</span>
<a name="l00679"></a>00679 <span class="preprocessor">    Class##_StaticInit()                                                \</span>
<a name="l00680"></a>00680 <span class="preprocessor">    {                                                                   \</span>
<a name="l00681"></a>00681 <span class="preprocessor">      scfInitialize(0);                                                 \</span>
<a name="l00682"></a>00682 <span class="preprocessor">      iSCF::SCF-&gt;RegisterFactoryFunc(CS_EXPORTED_NAME(Class,_Create),#Class); \</span>
<a name="l00683"></a>00683 <span class="preprocessor">    }                                                                   \</span>
<a name="l00684"></a>00684 <span class="preprocessor">  };</span>
<a name="l00685"></a>00685 <span class="preprocessor"></span>
<a name="l00690"></a><a class="code" href="group__scf.html#ga66">00690</a> <span class="preprocessor">#define SCF_USE_STATIC_PLUGIN(Module)                                   \</span>
<a name="l00691"></a>00691 <span class="preprocessor">  namespace csStaticPluginInit                                          \</span>
<a name="l00692"></a>00692 <span class="preprocessor">  {                                                                     \</span>
<a name="l00693"></a>00693 <span class="preprocessor">    class Module { public: Module(); };                                 \</span>
<a name="l00694"></a>00694 <span class="preprocessor">    Module Module##_StaticInit;                                         \</span>
<a name="l00695"></a>00695 <span class="preprocessor">  }</span>
<a name="l00696"></a>00696 <span class="preprocessor"></span>
<a name="l00705"></a><a class="code" href="group__scf.html#ga67">00705</a> <span class="preprocessor">#define SCF_REGISTER_FACTORY_FUNC(Class)                                \</span>
<a name="l00706"></a>00706 <span class="preprocessor">  SCF_DEFINE_FACTORY_FUNC_REGISTRATION(Class)                           \</span>
<a name="l00707"></a>00707 <span class="preprocessor">  Class##_StaticInit Class##_static_init__;</span>
<a name="l00708"></a>00708 <span class="preprocessor"></span>
<a name="l00709"></a>00709 <span class="comment">//--------------------------------------------- Class factory interface -----//</span>
<a name="l00710"></a>00710 
<a name="l00724"></a><a class="code" href="structiFactory.html">00724</a> <span class="keyword">struct </span><a class="code" href="structiFactory.html">iFactory</a> : <span class="keyword">public</span> <a class="code" href="structiBase.html">iBase</a>
<a name="l00725"></a>00725 {
<a name="l00727"></a>00727   <span class="keyword">virtual</span> <span class="keywordtype">void</span> *<a class="code" href="structiFactory.html#a0">CreateInstance</a> () = 0;
<a name="l00729"></a>00729   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiFactory.html#a1">TryUnload</a> () = 0;
<a name="l00731"></a>00731   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiFactory.html#a2">QueryDescription</a> () = 0;
<a name="l00733"></a>00733   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiFactory.html#a3">QueryDependencies</a> () = 0;
<a name="l00735"></a>00735   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiFactory.html#a4">QueryClassID</a> () = 0;
<a name="l00737"></a>00737   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiFactory.html#a5">QueryModuleName</a> () = 0;
<a name="l00738"></a>00738 };
<a name="l00739"></a>00739 
<a name="l00740"></a>00740 <span class="comment">//----------------------------------------------- Client-side functions -----//</span>
<a name="l00741"></a>00741 
<a name="l00742"></a>00742 <span class="keyword">struct </span><a class="code" href="structiDocument.html">iDocument</a>;
<a name="l00743"></a>00743 <span class="keyword">struct </span><a class="code" href="structiStringArray.html">iStringArray</a>;
<a name="l00744"></a>00744 
<a name="l00746"></a><a class="code" href="group__scf.html#ga1">00746</a> <span class="keyword">typedef</span> <span class="keywordtype">void</span>* (*scfFactoryFunc)(<a class="code" href="structiBase.html">iBase</a>*);
<a name="l00747"></a>00747 
<a name="l00752"></a><a class="code" href="group__scf.html#ga68">00752</a> <span class="preprocessor">#define SCF_CREATE_INSTANCE(ClassID,Interface)                          \</span>
<a name="l00753"></a>00753 <span class="preprocessor">  csPtr&lt;Interface&gt; (                                                    \</span>
<a name="l00754"></a>00754 <span class="preprocessor">    (Interface *)iSCF::SCF-&gt;CreateInstance (                            \</span>
<a name="l00755"></a>00755 <span class="preprocessor">    ClassID, #Interface, scfInterface&lt;Interface&gt;::GetVersion()))</span>
<a name="l00756"></a>00756 <span class="preprocessor"></span>
<a name="l00769"></a><a class="code" href="group__scf.html#ga69">00769</a> <span class="preprocessor">#define SCF_VERSION(Name,Major,Minor,Micro)                             \</span>
<a name="l00770"></a>00770 <span class="preprocessor">struct Name;                                                            \</span>
<a name="l00771"></a>00771 <span class="preprocessor">CS_SPECIALIZE_TEMPLATE                                                  \</span>
<a name="l00772"></a>00772 <span class="preprocessor">class scfInterface&lt;Name&gt;                                                \</span>
<a name="l00773"></a>00773 <span class="preprocessor">{                                                                       \</span>
<a name="l00774"></a>00774 <span class="preprocessor">  static scfInterfaceID&amp; GetMyID()                                      \</span>
<a name="l00775"></a>00775 <span class="preprocessor">  {                                                                     \</span>
<a name="l00776"></a>00776 <span class="preprocessor">    static scfInterfaceID ID = (scfInterfaceID)-1;                      \</span>
<a name="l00777"></a>00777 <span class="preprocessor">    return ID;                                                          \</span>
<a name="l00778"></a>00778 <span class="preprocessor">  }                                                                     \</span>
<a name="l00779"></a>00779 <span class="preprocessor">  static void CleanupID()                                               \</span>
<a name="l00780"></a>00780 <span class="preprocessor">  {                                                                     \</span>
<a name="l00781"></a>00781 <span class="preprocessor">    GetMyID() = (scfInterfaceID)-1;                                     \</span>
<a name="l00782"></a>00782 <span class="preprocessor">  }                                                                     \</span>
<a name="l00783"></a>00783 <span class="preprocessor">public:                                                                 \</span>
<a name="l00784"></a>00784 <span class="preprocessor">  static int GetVersion()                                               \</span>
<a name="l00785"></a>00785 <span class="preprocessor">  {                                                                     \</span>
<a name="l00786"></a>00786 <span class="preprocessor">    return SCF_CONSTRUCT_VERSION(Major, Minor, Micro);                  \</span>
<a name="l00787"></a>00787 <span class="preprocessor">  }                                                                     \</span>
<a name="l00788"></a>00788 <span class="preprocessor">  static scfInterfaceID GetID()                                         \</span>
<a name="l00789"></a>00789 <span class="preprocessor">  {                                                                     \</span>
<a name="l00790"></a>00790 <span class="preprocessor">    scfInterfaceID&amp; ID = GetMyID();                                     \</span>
<a name="l00791"></a>00791 <span class="preprocessor">    if (ID == (scfInterfaceID)(-1))                                     \</span>
<a name="l00792"></a>00792 <span class="preprocessor">    {                                                                   \</span>
<a name="l00793"></a>00793 <span class="preprocessor">      ID = iSCF::SCF-&gt;GetInterfaceID(#Name);                            \</span>
<a name="l00794"></a>00794 <span class="preprocessor">      </span><span class="comment">/* Mild hack to reset SCF ID on CS shutdown */</span>                    \
<a name="l00795"></a>00795       csStaticVarCleanup (CleanupID);                                   \
<a name="l00796"></a>00796     }                                                                   \
<a name="l00797"></a>00797     return ID;                                                          \
<a name="l00798"></a>00798   }                                                                     \
<a name="l00799"></a>00799   static char const* GetName()                                          \
<a name="l00800"></a>00800   {                                                                     \
<a name="l00801"></a>00801     return #Name;                                                       \
<a name="l00802"></a>00802   }                                                                     \
<a name="l00803"></a>00803 }
<a name="l00804"></a>00804 
<a name="l00811"></a><a class="code" href="classscfInterface.html">00811</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classscfInterface.html">scfInterface</a>
<a name="l00812"></a>00812 {
<a name="l00813"></a>00813 <span class="keyword">public</span>:
<a name="l00818"></a><a class="code" href="classscfInterface.html#e0">00818</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classscfInterface.html#e0">GetVersion</a>()
<a name="l00819"></a>00819   {
<a name="l00820"></a>00820     <a class="code" href="cssysdef_8h.html#a39">CS_ASSERT_MSG</a>(<span class="stringliteral">"illegal invocation of non-specialized "</span>
<a name="l00821"></a>00821       <span class="stringliteral">"scfInterface&lt;&gt;::GetVersion()"</span>, 1 == 0);
<a name="l00822"></a>00822     <span class="keywordflow">return</span> 0;
<a name="l00823"></a>00823   }
<a name="l00824"></a>00824 
<a name="l00832"></a><a class="code" href="classscfInterface.html#e1">00832</a>   <span class="keyword">static</span> <a class="code" href="group__scf.html#ga0">scfInterfaceID</a> <a class="code" href="classscfInterface.html#e1">GetID</a>()
<a name="l00833"></a>00833   {
<a name="l00834"></a>00834     <a class="code" href="cssysdef_8h.html#a39">CS_ASSERT_MSG</a>(<span class="stringliteral">"illegal invocation of non-specialized "</span>
<a name="l00835"></a>00835       <span class="stringliteral">"scfInterface&lt;&gt;::GetID()"</span>, 1 == 0);
<a name="l00836"></a>00836     <span class="keywordflow">return</span> (<a class="code" href="group__scf.html#ga0">scfInterfaceID</a>)(-1);
<a name="l00837"></a>00837   }
<a name="l00838"></a>00838 
<a name="l00842"></a><a class="code" href="classscfInterface.html#e2">00842</a>   <span class="keyword">static</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="classscfInterface.html#e2">GetName</a>()
<a name="l00843"></a>00843   {
<a name="l00844"></a>00844     <a class="code" href="cssysdef_8h.html#a39">CS_ASSERT_MSG</a>(<span class="stringliteral">"illegal invocation of non-specialized "</span>
<a name="l00845"></a>00845       <span class="stringliteral">"scfInterface&lt;&gt;::GetName()"</span>, 1 == 0);
<a name="l00846"></a>00846     <span class="keywordflow">return</span> 0;
<a name="l00847"></a>00847   }
<a name="l00848"></a>00848 };
<a name="l00849"></a>00849 
<a name="l00854"></a><a class="code" href="group__scf.html#ga70">00854</a> <span class="preprocessor">#define SCF_QUERY_INTERFACE(Object,Interface)                           \</span>
<a name="l00855"></a>00855 <span class="preprocessor">  csPtr&lt;Interface&gt; ((Interface *)(Object)-&gt;QueryInterface (             \</span>
<a name="l00856"></a>00856 <span class="preprocessor">  scfInterface&lt;Interface&gt;::GetID (), scfInterface&lt;Interface&gt;::GetVersion()))</span>
<a name="l00857"></a>00857 <span class="preprocessor"></span>
<a name="l00863"></a><a class="code" href="group__scf.html#ga71">00863</a> <span class="preprocessor">#define SCF_QUERY_INTERFACE_SAFE(Object,Interface)                      \</span>
<a name="l00864"></a>00864 <span class="preprocessor">  csPtr&lt;Interface&gt; ((Interface *)(iBase::QueryInterfaceSafe ((Object),  \</span>
<a name="l00865"></a>00865 <span class="preprocessor">  scfInterface&lt;Interface&gt;::GetID (), scfInterface&lt;Interface&gt;::GetVersion())))</span>
<a name="l00866"></a>00866 <span class="preprocessor"></span>
<a name="l00871"></a>00871 <span class="keyword">enum</span>
<a name="l00872"></a>00872 {
<a name="l00873"></a>00873   <a class="code" href="group__scf.html#gga79a56">SCF_VERBOSE_NONE</a>            = 0,      
<a name="l00874"></a>00874   <a class="code" href="group__scf.html#gga79a57">SCF_VERBOSE_PLUGIN_SCAN</a>     = 1 &lt;&lt; 0, 
<a name="l00875"></a>00875   <a class="code" href="group__scf.html#gga79a58">SCF_VERBOSE_PLUGIN_LOAD</a>     = 1 &lt;&lt; 1, 
<a name="l00876"></a>00876   <a class="code" href="group__scf.html#gga79a59">SCF_VERBOSE_PLUGIN_REGISTER</a> = 1 &lt;&lt; 2, 
<a name="l00877"></a>00877   <a class="code" href="group__scf.html#gga79a60">SCF_VERBOSE_CLASS_REGISTER</a>  = 1 &lt;&lt; 3, 
<a name="l00878"></a><a class="code" href="group__scf.html#gga79a61">00878</a>   <a class="code" href="group__scf.html#gga79a61">SCF_VERBOSE_ALL</a>             = ~0      
<a name="l00879"></a>00879 };
<a name="l00880"></a>00880 
<a name="l00896"></a>00896 CS_CRYSTALSPACE_EXPORT <span class="keywordtype">void</span> <a class="code" href="group__scf.html#ga2">scfInitialize</a>(<a class="code" href="classcsPathsList.html">csPathsList</a> <span class="keyword">const</span>* pluginPaths,
<a name="l00897"></a>00897   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> verbose = <a class="code" href="group__scf.html#gga79a56">SCF_VERBOSE_NONE</a>);
<a name="l00898"></a>00898 
<a name="l00903"></a>00903 CS_CRYSTALSPACE_EXPORT <span class="keywordtype">void</span> <a class="code" href="group__scf.html#ga2">scfInitialize</a>(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> argv[]);
<a name="l00904"></a>00904 
<a name="l00911"></a><a class="code" href="group__scf.html#ga4">00911</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__scf.html#ga4">scfCompatibleVersion</a> (<span class="keywordtype">int</span> iVersion, <span class="keywordtype">int</span> iItfVersion)
<a name="l00912"></a>00912 {
<a name="l00913"></a>00913   <span class="keywordflow">return</span> ((iVersion &amp; 0xff000000) == (iItfVersion &amp; 0xff000000))
<a name="l00914"></a>00914       &amp;&amp; ((iVersion &amp; 0x00ffffff) &lt;= (iItfVersion &amp; 0x00ffffff));
<a name="l00915"></a>00915 }
<a name="l00916"></a>00916 
<a name="l00917"></a>00917 <span class="preprocessor">#if defined(CS_DEBUG) || defined(CS_MEMORY_TRACKER)</span>
<a name="l00918"></a>00918 <span class="preprocessor"></span>  <span class="keyword">struct </span><a class="code" href="structiObjectRegistry.html">iObjectRegistry</a>;
<a name="l00919"></a>00919 <span class="preprocessor">#endif</span>
<a name="l00920"></a>00920 <span class="preprocessor"></span>
<a name="l00927"></a><a class="code" href="structiSCF.html">00927</a> <span class="keyword">struct </span><a class="code" href="structiSCF.html">iSCF</a> : <span class="keyword">public</span> <a class="code" href="structiBase.html">iBase</a>
<a name="l00928"></a>00928 {
<a name="l00940"></a><a class="code" href="structiSCF.html#s0">00940</a>   <span class="keyword">static</span> CS_CRYSTALSPACE_EXPORT <a class="code" href="structiSCF.html">iSCF</a>* <a class="code" href="structiSCF.html#s0">SCF</a>;
<a name="l00941"></a>00941 
<a name="l00942"></a>00942 <span class="preprocessor">#if defined(CS_DEBUG) || defined(CS_MEMORY_TRACKER)</span>
<a name="l00943"></a>00943 <span class="preprocessor"></span>  <span class="comment">// This is EXTREMELY dirty but I see no other solution for now.</span>
<a name="l00944"></a>00944   <span class="comment">// For debugging reasons I must have a global (global over the application</span>
<a name="l00945"></a>00945   <span class="comment">// and all plugins)pointer to the object registry. I have no other</span>
<a name="l00946"></a>00946   <span class="comment">// global object to tag this pointer on that except for iSCF.</span>
<a name="l00947"></a>00947   <span class="comment">// This pointer is only here in debug mode though. That ensures that it</span>
<a name="l00948"></a>00948   <span class="comment">// cannot be misused in real code.</span>
<a name="l00949"></a>00949   <span class="comment">// If you know another solution for this problem? This global pointer</span>
<a name="l00950"></a>00950   <span class="comment">// will be used by csDebuggingGraph in csutil.</span>
<a name="l00951"></a>00951   <a class="code" href="structiObjectRegistry.html">iObjectRegistry</a>* object_reg;
<a name="l00952"></a>00952 <span class="preprocessor">#endif</span>
<a name="l00953"></a>00953 <span class="preprocessor"></span>
<a name="l00957"></a>00957   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a0">RegisterClasses</a> (<a class="code" href="structiDocument.html">iDocument</a>* metadata,
<a name="l00958"></a>00958     <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l00959"></a>00959 
<a name="l00965"></a>00965   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a0">RegisterClasses</a> (<span class="keywordtype">char</span> <span class="keyword">const</span>* xml,
<a name="l00966"></a>00966     <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l00967"></a>00967 
<a name="l00971"></a>00971   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a0">RegisterClasses</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* pluginPath,
<a name="l00972"></a>00972     <a class="code" href="structiDocument.html">iDocument</a>* metadata, <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l00973"></a>00973 
<a name="l00980"></a>00980   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a3">ClassRegistered</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID) = 0;
<a name="l00981"></a>00981 
<a name="l00997"></a>00997   <span class="keyword">virtual</span> <span class="keywordtype">void</span> *<a class="code" href="structiSCF.html#a4">CreateInstance</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID,
<a name="l00998"></a>00998         <span class="keyword">const</span> <span class="keywordtype">char</span> *iInterface, <span class="keywordtype">int</span> iVersion) = 0;
<a name="l00999"></a>00999 
<a name="l01005"></a>01005   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiSCF.html#a5">GetClassDescription</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID) = 0;
<a name="l01006"></a>01006 
<a name="l01012"></a>01012   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structiSCF.html#a6">GetClassDependencies</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID) = 0;
<a name="l01013"></a>01013 
<a name="l01040"></a>01040   <span class="keyword">virtual</span> <a class="code" href="classcsRef.html">csRef&lt;iDocument&gt;</a> <a class="code" href="structiSCF.html#a7">GetPluginMetadata</a> (<span class="keywordtype">char</span> <span class="keyword">const</span> *iClassID) = 0;
<a name="l01041"></a>01041 
<a name="l01048"></a>01048   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a8">UnloadUnusedModules</a> () = 0;
<a name="l01049"></a>01049 
<a name="l01060"></a>01060   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a9">RegisterClass</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID,
<a name="l01061"></a>01061         <span class="keyword">const</span> <span class="keywordtype">char</span> *iLibraryName, <span class="keyword">const</span> <span class="keywordtype">char</span> *iFactoryClass,
<a name="l01062"></a>01062         <span class="keyword">const</span> <span class="keywordtype">char</span> *Description, <span class="keyword">const</span> <span class="keywordtype">char</span> *Dependencies = 0,
<a name="l01063"></a>01063         <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l01064"></a>01064 
<a name="l01071"></a>01071   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a9">RegisterClass</a> (<a class="code" href="group__scf.html#ga1">scfFactoryFunc</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID,
<a name="l01072"></a>01072         <span class="keyword">const</span> <span class="keywordtype">char</span> *Description, <span class="keyword">const</span> <span class="keywordtype">char</span> *Dependencies = 0,
<a name="l01073"></a>01073         <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l01074"></a>01074 
<a name="l01082"></a>01082   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a11">RegisterFactoryFunc</a> (<a class="code" href="group__scf.html#ga1">scfFactoryFunc</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *FactClass) = 0;
<a name="l01083"></a>01083 
<a name="l01090"></a>01090   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a12">UnregisterClass</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iClassID) = 0;
<a name="l01091"></a>01091 
<a name="l01096"></a>01096   <span class="keyword">virtual</span> <span class="keywordtype">char</span> <span class="keyword">const</span>* <a class="code" href="structiSCF.html#a13">GetInterfaceName</a> (<a class="code" href="group__scf.html#ga0">scfInterfaceID</a>) <span class="keyword">const </span>= 0;
<a name="l01097"></a>01097 
<a name="l01103"></a>01103   <span class="keyword">virtual</span> <a class="code" href="group__scf.html#ga0">scfInterfaceID</a> <a class="code" href="structiSCF.html#a14">GetInterfaceID</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *iInterface) = 0;
<a name="l01104"></a>01104 
<a name="l01111"></a>01111   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a15">Finish</a> () = 0;
<a name="l01112"></a>01112 
<a name="l01122"></a>01122   <span class="keyword">virtual</span> <a class="code" href="classcsRef.html">csRef&lt;iStringArray&gt;</a> <a class="code" href="structiSCF.html#a16">QueryClassList</a> (<span class="keywordtype">char</span> <span class="keyword">const</span>* pattern) = 0;
<a name="l01123"></a>01123 
<a name="l01127"></a>01127   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structiSCF.html#a17">ScanPluginsPath</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* path, <span class="keywordtype">bool</span> recursive = <span class="keyword">false</span>,
<a name="l01128"></a>01128     <span class="keyword">const</span> <span class="keywordtype">char</span>* context = 0) = 0;
<a name="l01129"></a>01129 
<a name="l01139"></a>01139   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structiSCF.html#a18">RegisterPlugin</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* path) = 0;
<a name="l01140"></a>01140 };
<a name="l01141"></a>01141 
<a name="l01142"></a>01142 <a class="code" href="group__scf.html#ga69">SCF_VERSION</a> (<a class="code" href="structiFactory.html">iFactory</a>, 0, 0, 2);
<a name="l01143"></a>01143 <a class="code" href="group__scf.html#ga69">SCF_VERSION</a> (<a class="code" href="structiBase.html">iBase</a>, 0, 1, 0);
<a name="l01144"></a>01144 <a class="code" href="group__scf.html#ga69">SCF_VERSION</a> (<a class="code" href="structiSCF.html">iSCF</a>, 0, 2, 1);
<a name="l01145"></a>01145 
<a name="l01146"></a>01146 <span class="comment">// A bit hacky.</span>
<a name="l01147"></a>01147 <span class="preprocessor">#include "csutil/reftrackeraccess.h"</span>
<a name="l01148"></a>01148 
<a name="l01151"></a>01151 <span class="preprocessor">#endif // __CSSCF_H__</span>
</pre></div><hr size="1"><address><small>Generated for Crystal Space by 
<a href="http://www.doxygen.org/index.html">doxygen</a> 1.4.3-20050530 
</small></address> </div></body> </html>
