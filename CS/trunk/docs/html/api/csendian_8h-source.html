<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Crystal Space: csutil/csendian.h Source File (Crystal Space Public API Reference)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<table border="0" cellpadding="0" cellspacing="0" width="100%" class="head">
 <tr heigth="59">
  <td class="head" width="202" valign="bottom" style="padding-left:0;"><a href="http://www.crystalspace3d.org/"><img src="csblur.png" width="236" height="59" alt="CrystalSpace" border="0"></a></td>
  <td class="head"><h2>Public API Reference</h2></td>
 </tr>
 <tr heigth="11">
  <td colspan="2" class="headshadow" valign="top" style="padding-left:0;"><img src="csblurb.png" width="236" height="11" alt="" border="0"></td>
 </tr>
</table>
<div class="content">
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000022.html">csutil</a></div>
<h1>csendian.h</h1><a href="csendian_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">    Copyright (C) 1998 by Jorrit Tyberghein</span>
00003 <span class="comment"></span>
00004 <span class="comment">    This library is free software; you can redistribute it and/or</span>
00005 <span class="comment">    modify it under the terms of the GNU Library General Public</span>
00006 <span class="comment">    License as published by the Free Software Foundation; either</span>
00007 <span class="comment">    version 2 of the License, or (at your option) any later version.</span>
00008 <span class="comment"></span>
00009 <span class="comment">    This library is distributed in the hope that it will be useful,</span>
00010 <span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00011 <span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00012 <span class="comment">    Library General Public License for more details.</span>
00013 <span class="comment"></span>
00014 <span class="comment">    You should have received a copy of the GNU Library General Public</span>
00015 <span class="comment">    License along with this library; if not, write to the Free</span>
00016 <span class="comment">    Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
00017 <span class="comment">*/</span>
00018 
00019 <span class="preprocessor">#ifndef __CS_CSENDIAN_H__</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#define __CS_CSENDIAN_H__</span>
00021 <span class="preprocessor"></span>
00029 <span class="preprocessor">#include &lt;<a class="code" href="math_8h.html">math.h</a>&gt;</span>
00030 <span class="preprocessor">#include "<a class="code" href="cstypes_8h.html">cstypes.h</a>"</span>
00031 <span class="preprocessor">#include "<a class="code" href="csqint_8h.html">csqint.h</a>"</span>
00032 
00033 <span class="preprocessor">#define csQroundSure(x) (int ((x) + ((x &lt; 0) ? -0.5 : +0.5)))</span>
00034 <span class="preprocessor"></span>
00035 <span class="keyword">struct </span>csEndianSwap4
00036 {
00037   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> b1, b2, b3, b4;
00038 };
00039 
00040 <span class="keyword">struct </span>csEndianSwap8
00041 {
00042   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> b1, b2, b3, b4,
00043                 b5, b6, b7, b8;
00044 };
00045 
00046 <span class="preprocessor">#ifdef CS_BIG_ENDIAN</span>
00047 <span class="preprocessor"></span><span class="preprocessor">#  define csBigEndianLongLong(x) x</span>
00048 <span class="preprocessor"></span><span class="preprocessor">#  define csBigEndianLong(x)  x</span>
00049 <span class="preprocessor"></span><span class="preprocessor">#  define csBigEndianShort(x) x</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#  define csBigEndianFloat(x) x</span>
00051 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00052 <span class="preprocessor"></span>
<a name="l00054"></a><a class="code" href="group__util.html#ga26">00054</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga6">uint64</a> <a class="code" href="group__util.html#ga26">csBigEndianLongLong</a> (<a class="code" href="group__util.html#ga6">uint64</a> l)
00055 {
00056   <a class="code" href="group__util.html#ga6">uint64</a> r;
00057   csEndianSwap8 *p1 = (csEndianSwap8 *)&amp;l;
00058   csEndianSwap8 *p2 = (csEndianSwap8 *)&amp;r;
00059   p2-&gt;b1 = p1-&gt;b8;
00060   p2-&gt;b2 = p1-&gt;b7;
00061   p2-&gt;b3 = p1-&gt;b6;
00062   p2-&gt;b4 = p1-&gt;b5;
00063   p2-&gt;b5 = p1-&gt;b4;
00064   p2-&gt;b6 = p1-&gt;b3;
00065   p2-&gt;b7 = p1-&gt;b2;
00066   p2-&gt;b8 = p1-&gt;b1;
00067   <span class="keywordflow">return</span> r;
00068 }
00069 
00070 
<a name="l00072"></a><a class="code" href="group__util.html#ga27">00072</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga4">uint32</a> <a class="code" href="group__util.html#ga27">csBigEndianLong</a> (<a class="code" href="group__util.html#ga4">uint32</a> l)
00073 { <span class="keywordflow">return</span> (l &gt;&gt; 24) | ((l &gt;&gt; 8) &amp; 0xff00) | ((l &lt;&lt; 8) &amp; 0xff0000) | (l &lt;&lt; 24); }
00074 
<a name="l00076"></a><a class="code" href="group__util.html#ga28">00076</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga2">uint16</a> <a class="code" href="group__util.html#ga28">csBigEndianShort</a> (<a class="code" href="group__util.html#ga2">uint16</a> s)
00077 { <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga2">uint16</a>((s &gt;&gt; 8) | (s &lt;&lt; 8)); }
00078 
<a name="l00080"></a><a class="code" href="group__util.html#ga29">00080</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="group__util.html#ga29">csBigEndianFloat</a> (<span class="keywordtype">float</span> f)
00081 {
00082   <span class="comment">//@@WARNING: Should be removed -- use csFloatToLong instead</span>
00083   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> tmp;
00084   csEndianSwap4 *pf = (csEndianSwap4 *)&amp;f;
00085   tmp = pf-&gt;b1; pf-&gt;b1 = pf-&gt;b4; pf-&gt;b4 = tmp;
00086   tmp = pf-&gt;b2; pf-&gt;b2 = pf-&gt;b3; pf-&gt;b3 = tmp;
00087   <span class="keywordflow">return</span> f;
00088 }
00089 
00090 <span class="preprocessor">#endif // CS_BIG_ENDIAN</span>
00091 <span class="preprocessor"></span>
00092 <span class="preprocessor">#ifdef CS_LITTLE_ENDIAN</span>
00093 <span class="preprocessor"></span><span class="preprocessor">#  define csLittleEndianLongLong(x) x</span>
00094 <span class="preprocessor"></span><span class="preprocessor">#  define csLittleEndianLong(x)  x</span>
00095 <span class="preprocessor"></span><span class="preprocessor">#  define csLittleEndianShort(x) x</span>
00096 <span class="preprocessor"></span><span class="preprocessor">#  define csLittleEndianFloat(x) x</span>
00097 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00098 <span class="preprocessor"></span>
<a name="l00100"></a><a class="code" href="group__util.html#ga30">00100</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga6">uint64</a> <a class="code" href="group__util.html#ga30">csLittleEndianLongLong</a> (<a class="code" href="group__util.html#ga6">uint64</a> l)
00101 {
00102   <a class="code" href="group__util.html#ga6">uint64</a> r;
00103   csEndianSwap8 *p1 = (csEndianSwap8 *)&amp;l;
00104   csEndianSwap8 *p2 = (csEndianSwap8 *)&amp;r;
00105   p2-&gt;b1 = p1-&gt;b8;
00106   p2-&gt;b2 = p1-&gt;b7;
00107   p2-&gt;b3 = p1-&gt;b6;
00108   p2-&gt;b4 = p1-&gt;b5;
00109   p2-&gt;b5 = p1-&gt;b4;
00110   p2-&gt;b6 = p1-&gt;b3;
00111   p2-&gt;b7 = p1-&gt;b2;
00112   p2-&gt;b8 = p1-&gt;b1;
00113   <span class="keywordflow">return</span> r;
00114 }
00115 
<a name="l00117"></a><a class="code" href="group__util.html#ga31">00117</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga4">uint32</a> <a class="code" href="group__util.html#ga31">csLittleEndianLong</a> (<a class="code" href="group__util.html#ga4">uint32</a> l)
00118 { <span class="keywordflow">return</span> (l &gt;&gt; 24) | ((l &gt;&gt; 8) &amp; 0xff00) | ((l &lt;&lt; 8) &amp; 0xff0000) | (l &lt;&lt; 24); }
00119 
<a name="l00121"></a><a class="code" href="group__util.html#ga32">00121</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga2">uint16</a> <a class="code" href="group__util.html#ga32">csLittleEndianShort</a> (<a class="code" href="group__util.html#ga2">uint16</a> s)
00122 { <span class="keywordflow">return</span> (s &gt;&gt; 8) | (s &lt;&lt; 8); }
00123 
<a name="l00125"></a><a class="code" href="group__util.html#ga33">00125</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="group__util.html#ga33">csLittleEndianFloat</a> (<span class="keywordtype">float</span> f)
00126 {
00127   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> tmp;
00128   csEndianSwap4 *pf = (csEndianSwap4 *)&amp;f;
00129   tmp = pf-&gt;b1; pf-&gt;b1 = pf-&gt;b4; pf-&gt;b4 = tmp;
00130   tmp = pf-&gt;b2; pf-&gt;b2 = pf-&gt;b3; pf-&gt;b3 = tmp;
00131   <span class="keywordflow">return</span> f;
00132 }
00133 
00134 <span class="preprocessor">#endif // CS_LITTLE_ENDIAN</span>
00135 <span class="preprocessor"></span>
00136 <span class="comment">/*</span>
00137 <span class="comment">    To be able to painlessly transfer files betwen platforms, we should</span>
00138 <span class="comment">    avoid using native floating-point format. Here are a couple of routines</span>
00139 <span class="comment">    that are guaranteed to work on all platforms.</span>
00140 <span class="comment"></span>
00141 <span class="comment">    The floating point is converted to a fixed 1.7.25 bits format</span>
00142 <span class="comment">    (one bit sign, 7 bits exponent, 25 bits mantissa) and back,</span>
00143 <span class="comment">    so that we can binary store floating-point number without</span>
00144 <span class="comment">    cross-platform problems. If you wonder why 1+7+25 = 33 while we</span>
00145 <span class="comment">    only have 32 bits, we'll ommit the most significant bit of mantissa</span>
00146 <span class="comment">    since it is always 1 (we use normalized numbers). This increases the</span>
00147 <span class="comment">    precision twice.</span>
00148 <span class="comment"></span>
00149 <span class="comment">    For double, we use one bit sign, 15 bits exponent, 49 bits mantissa.</span>
00150 <span class="comment">*/</span>
00151 
<a name="l00156"></a><a class="code" href="group__util.html#ga34">00156</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga5">int32</a> <a class="code" href="group__util.html#ga34">csFloatToLong</a> (<span class="keywordtype">float</span> f)
00157 {
00158   <span class="keywordtype">int</span> exp;
00159   <a class="code" href="group__util.html#ga5">int32</a> mant = csQroundSure (frexp (f, &amp;exp) * 0x1000000);
00160   <a class="code" href="group__util.html#ga5">int32</a> sign = mant &amp; 0x80000000;
00161   <span class="keywordflow">if</span> (mant &lt; 0) mant = -mant;
00162   <span class="keywordflow">if</span> (exp &gt; 63) exp = 63; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (exp &lt; -64) exp = -64;
00163   <span class="keywordflow">return</span> sign | ((exp &amp; 0x7f) &lt;&lt; 24) | (mant &amp; 0xffffff);
00164 }
00165 
<a name="l00167"></a><a class="code" href="group__util.html#ga35">00167</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="group__util.html#ga35">csLongToFloat</a> (<a class="code" href="group__util.html#ga5">int32</a> l)
00168 {
00169   <span class="keywordtype">int</span> exp = (l &gt;&gt; 24) &amp; 0x7f;
00170   <span class="keywordflow">if</span> (exp &amp; 0x40) exp = exp | ~0x7f;
00171   <span class="keywordtype">float</span> mant = float (l &amp; 0x00ffffff) / 0x1000000;
00172   <span class="keywordflow">if</span> (l &amp; 0x80000000) mant = -mant;
00173   <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) ldexp (mant, exp);
00174 }
00175 
00176 <span class="comment">/* Implementation note: csDoubleToLongLong() and csLongLongToDouble()</span>
00177 <span class="comment"> *</span>
00178 <span class="comment"> * We avoid use of CONST_INT64() because 64-bit constants are illegal with g++</span>
00179 <span class="comment"> * under -ansi -pedantic, and we want this header to be useful to external</span>
00180 <span class="comment"> * projects which use -ansi -pedantic.  Instead, we use bit shifts, such as (1</span>
00181 <span class="comment"> * &lt;&lt; 59), and construct `mask' manually.</span>
00182 <span class="comment"> */</span>
00183 
<a name="l00185"></a><a class="code" href="group__util.html#ga36">00185</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga7">int64</a> <a class="code" href="group__util.html#ga36">csDoubleToLongLong</a> (<span class="keywordtype">double</span> d)
00186 {
00187   <span class="keywordtype">int</span> exp;
00188   <a class="code" href="group__util.html#ga7">int64</a> mant = (<a class="code" href="group__util.html#ga7">int64</a>) (frexp (d, &amp;exp) * ((<a class="code" href="group__util.html#ga7">int64</a>)1 &lt;&lt; 48));
00189   <a class="code" href="group__util.html#ga7">int64</a> sign = mant &amp; ((<a class="code" href="group__util.html#ga7">int64</a>)1 &lt;&lt; 59);
00190   <span class="keywordflow">if</span> (mant &lt; 0) mant = -mant;
00191   <span class="keywordflow">if</span> (exp &gt; 32767) exp = 32767; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (exp &lt; -32768) exp = -32768;
00192   <a class="code" href="group__util.html#ga7">int64</a> <span class="keyword">const</span> mask = ((<a class="code" href="group__util.html#ga6">uint64</a>)0xffff &lt;&lt; 32) | (<a class="code" href="group__util.html#ga6">uint64</a>)0xffffffff;
00193   <span class="keywordflow">return</span> sign | ((<a class="code" href="group__util.html#ga7">int64</a> (exp) &amp; 0x7fff) &lt;&lt; 48) | (mant &amp; mask);
00194 }
00195 
<a name="l00197"></a><a class="code" href="group__util.html#ga37">00197</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="group__util.html#ga37">csLongLongToDouble</a> (<a class="code" href="group__util.html#ga7">int64</a> i)
00198 {
00199   <span class="keywordtype">int</span> exp = (i &gt;&gt; 48) &amp; 0x7fff;
00200   <span class="keywordflow">if</span> (exp &amp; 0x4000) exp = exp | ~0x7fff;
00201   <a class="code" href="group__util.html#ga7">int64</a> <span class="keyword">const</span> mask = ((<a class="code" href="group__util.html#ga6">uint64</a>)0xffff &lt;&lt; 32) | (<a class="code" href="group__util.html#ga6">uint64</a>)0xffffffff;
00202   <span class="keywordtype">double</span> mant = double (i &amp; mask) / ((<a class="code" href="group__util.html#ga7">int64</a>)1 &lt;&lt; 48);
00203   <span class="keywordflow">if</span> (i &amp; ((<a class="code" href="group__util.html#ga7">int64</a>)1 &lt;&lt; 59)) mant = -mant;
00204   <span class="keywordflow">return</span> ldexp (mant, exp);
00205 }
00206 
00215 
<a name="l00216"></a><a class="code" href="group__util.html#ga38">00216</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">short</span> <a class="code" href="group__util.html#ga38">csFloatToShort</a> (<span class="keywordtype">float</span> f)
00217 {
00218   <span class="keywordtype">int</span> exp;
00219   <span class="keywordtype">long</span> mant = csQroundSure (frexp (f, &amp;exp) * 0x1000);
00220   <span class="keywordtype">long</span> sign = mant &amp; 0x8000;
00221   <span class="keywordflow">if</span> (mant &lt; 0) mant = -mant;
00222   <span class="keywordflow">if</span> (exp &gt; 7) mant = 0x7ff, exp = 7; <span class="keywordflow">else</span> <span class="keywordflow">if</span> (exp &lt; -8) mant = 0, exp = -8;
00223   <span class="keywordflow">return</span> short(sign | ((exp &amp; 0xf) &lt;&lt; 11) | (mant &amp; 0x7ff));
00224 }
00225 
<a name="l00227"></a><a class="code" href="group__util.html#ga39">00227</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="group__util.html#ga39">csShortToFloat</a> (<span class="keywordtype">short</span> s)
00228 {
00229   <span class="keywordtype">int</span> exp = (s &gt;&gt; 11) &amp; 0xf;
00230   <span class="keywordflow">if</span> (exp &amp; 0x8) exp = exp | ~0xf;
00231   <span class="keywordtype">float</span> mant = float ((s &amp; 0x07ff) | 0x0800) / 0x1000;
00232   <span class="keywordflow">if</span> (s &amp; 0x8000) mant = -mant;
00233   <span class="keywordflow">return</span> (<span class="keywordtype">float</span>) ldexp (mant, exp);
00234 }
00235 
00238 
<a name="l00239"></a><a class="code" href="group__util.html#ga40">00239</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga6">uint64</a> <a class="code" href="group__util.html#ga40">csConvertEndian</a> (<a class="code" href="group__util.html#ga6">uint64</a> l)
00240 { <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga30">csLittleEndianLongLong</a> (l); }
00241 
<a name="l00243"></a><a class="code" href="group__util.html#ga41">00243</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga7">int64</a> <a class="code" href="group__util.html#ga40">csConvertEndian</a> (<a class="code" href="group__util.html#ga7">int64</a> l)
00244 { <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga30">csLittleEndianLongLong</a> (l); }
00245 
<a name="l00247"></a><a class="code" href="group__util.html#ga42">00247</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga4">uint32</a> <a class="code" href="group__util.html#ga40">csConvertEndian</a> (<a class="code" href="group__util.html#ga4">uint32</a> l)
00248 { <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga31">csLittleEndianLong</a> (l); }
00249 
<a name="l00251"></a><a class="code" href="group__util.html#ga43">00251</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga5">int32</a> <a class="code" href="group__util.html#ga40">csConvertEndian</a> (<a class="code" href="group__util.html#ga5">int32</a> l)
00252 { <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga31">csLittleEndianLong</a> (l); }
00253 
<a name="l00255"></a><a class="code" href="group__util.html#ga44">00255</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga3">int16</a> <a class="code" href="group__util.html#ga40">csConvertEndian</a> (<a class="code" href="group__util.html#ga3">int16</a> s)
00256 { <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga32">csLittleEndianShort</a> (s); }
00257 
<a name="l00259"></a><a class="code" href="group__util.html#ga45">00259</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga2">uint16</a> <a class="code" href="group__util.html#ga40">csConvertEndian</a> (<a class="code" href="group__util.html#ga2">uint16</a> s)
00260 { <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga32">csLittleEndianShort</a> (s); }
00261 
<a name="l00263"></a><a class="code" href="group__util.html#ga46">00263</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="group__util.html#ga40">csConvertEndian</a> (<span class="keywordtype">float</span> f)
00264 { <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga33">csLittleEndianFloat</a> (f); }
00265 
<a name="l00267"></a><a class="code" href="group__util.html#ga47">00267</a> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga2">uint16</a> <a class="code" href="group__util.html#ga47">csGetLittleEndianShort</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *buff)
00268 {
00269 <span class="preprocessor">#ifdef CS_STRICT_ALIGNMENT</span>
00270 <span class="preprocessor"></span>  <a class="code" href="group__util.html#ga2">uint16</a> s; memcpy (&amp;s, buff, <span class="keyword">sizeof</span> (s));
00271   <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga32">csLittleEndianShort</a> (s);
00272 <span class="preprocessor">#else</span>
00273 <span class="preprocessor"></span>  <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga32">csLittleEndianShort</a> (*(<a class="code" href="group__util.html#ga2">uint16</a> *)buff);
00274 <span class="preprocessor">#endif</span>
00275 <span class="preprocessor"></span>}
00276 
<a name="l00278"></a><a class="code" href="group__util.html#ga48">00278</a> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga4">uint32</a> <a class="code" href="group__util.html#ga48">csGetLittleEndianLong</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *buff)
00279 {
00280 <span class="preprocessor">#ifdef CS_STRICT_ALIGNMENT</span>
00281 <span class="preprocessor"></span>  <a class="code" href="group__util.html#ga4">uint32</a> l; memcpy (&amp;l, buff, <span class="keyword">sizeof</span> (l));
00282   <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga31">csLittleEndianLong</a> (l);
00283 <span class="preprocessor">#else</span>
00284 <span class="preprocessor"></span>  <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga31">csLittleEndianLong</a> (*(<a class="code" href="group__util.html#ga4">uint32</a> *)buff);
00285 <span class="preprocessor">#endif</span>
00286 <span class="preprocessor"></span>}
00287 
<a name="l00289"></a><a class="code" href="group__util.html#ga49">00289</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="group__util.html#ga49">csGetLittleEndianFloat32</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *buff)
00290 { <a class="code" href="group__util.html#ga4">uint32</a> l = <a class="code" href="group__util.html#ga48">csGetLittleEndianLong</a> (buff); <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga35">csLongToFloat</a> (l); }
00291 
<a name="l00293"></a><a class="code" href="group__util.html#ga50">00293</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="group__util.html#ga50">csGetLittleEndianFloat16</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *buff)
00294 { <a class="code" href="group__util.html#ga2">uint16</a> s = <a class="code" href="group__util.html#ga47">csGetLittleEndianShort</a> (buff); <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga39">csShortToFloat</a> (s); }
00295 
<a name="l00297"></a><a class="code" href="group__util.html#ga51">00297</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__util.html#ga51">csSetLittleEndianShort</a> (<span class="keywordtype">void</span> *buff, <a class="code" href="group__util.html#ga2">uint16</a> s)
00298 {
00299 <span class="preprocessor">#ifdef CS_STRICT_ALIGNMENT</span>
00300 <span class="preprocessor"></span>  s = <a class="code" href="group__util.html#ga32">csLittleEndianShort</a> (s);
00301   memcpy (buff, &amp;s, <span class="keyword">sizeof</span> (s));
00302 <span class="preprocessor">#else</span>
00303 <span class="preprocessor"></span>  *((<a class="code" href="group__util.html#ga2">uint16</a> *)buff) = <a class="code" href="group__util.html#ga32">csLittleEndianShort</a> (s);
00304 <span class="preprocessor">#endif</span>
00305 <span class="preprocessor"></span>}
00306 
<a name="l00308"></a><a class="code" href="group__util.html#ga52">00308</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__util.html#ga52">csSetLittleEndianLong</a> (<span class="keywordtype">void</span> *buff, <a class="code" href="group__util.html#ga4">uint32</a> l)
00309 {
00310 <span class="preprocessor">#ifdef CS_STRICT_ALIGNMENT</span>
00311 <span class="preprocessor"></span>  l = <a class="code" href="group__util.html#ga31">csLittleEndianLong</a> (l);
00312   memcpy (buff, &amp;l, <span class="keyword">sizeof</span> (l));
00313 <span class="preprocessor">#else</span>
00314 <span class="preprocessor"></span>  *((<a class="code" href="group__util.html#ga4">uint32</a> *)buff) = <a class="code" href="group__util.html#ga31">csLittleEndianLong</a> (l);
00315 <span class="preprocessor">#endif</span>
00316 <span class="preprocessor"></span>}
00317 
<a name="l00319"></a><a class="code" href="group__util.html#ga53">00319</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__util.html#ga53">csSetLittleEndianFloat32</a> (<span class="keywordtype">void</span> *buff, <span class="keywordtype">float</span> f)
00320 { <a class="code" href="group__util.html#ga52">csSetLittleEndianLong</a> (buff, <a class="code" href="group__util.html#ga34">csFloatToLong</a> (f)); }
00321 
<a name="l00323"></a><a class="code" href="group__util.html#ga54">00323</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__util.html#ga54">csSetLittleEndianFloat16</a> (<span class="keywordtype">void</span> *buff, <span class="keywordtype">float</span> f)
00324 { <a class="code" href="group__util.html#ga51">csSetLittleEndianShort</a> (buff, <a class="code" href="group__util.html#ga38">csFloatToShort</a> (f)); }
00325 
00326 
<a name="l00328"></a><a class="code" href="group__util.html#ga55">00328</a> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga2">uint16</a> <a class="code" href="group__util.html#ga55">csGetBigEndianShort</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *buff)
00329 {
00330 <span class="preprocessor">#ifdef CS_STRICT_ALIGNMENT</span>
00331 <span class="preprocessor"></span>  <a class="code" href="group__util.html#ga2">uint16</a> s; memcpy (&amp;s, buff, <span class="keyword">sizeof</span> (s));
00332   <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga28">csBigEndianShort</a> (s);
00333 <span class="preprocessor">#else</span>
00334 <span class="preprocessor"></span>  <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga28">csBigEndianShort</a> (*(<a class="code" href="group__util.html#ga2">uint16</a> *)buff);
00335 <span class="preprocessor">#endif</span>
00336 <span class="preprocessor"></span>}
00337 
<a name="l00339"></a><a class="code" href="group__util.html#ga56">00339</a> <span class="keyword">inline</span> <a class="code" href="group__util.html#ga4">uint32</a> <a class="code" href="group__util.html#ga56">csGetBigEndianLong</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *buff)
00340 {
00341 <span class="preprocessor">#ifdef CS_STRICT_ALIGNMENT</span>
00342 <span class="preprocessor"></span>  <a class="code" href="group__util.html#ga4">uint32</a> l; memcpy (&amp;l, buff, <span class="keyword">sizeof</span> (l));
00343   <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga27">csBigEndianLong</a> (l);
00344 <span class="preprocessor">#else</span>
00345 <span class="preprocessor"></span>  <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga27">csBigEndianLong</a> (*(<a class="code" href="group__util.html#ga4">uint32</a> *)buff);
00346 <span class="preprocessor">#endif</span>
00347 <span class="preprocessor"></span>}
00348 
<a name="l00350"></a><a class="code" href="group__util.html#ga57">00350</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="group__util.html#ga57">csGetBigEndianFloat32</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *buff)
00351 { <a class="code" href="group__util.html#ga4">uint32</a> l = <a class="code" href="group__util.html#ga56">csGetBigEndianLong</a> (buff); <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga35">csLongToFloat</a> (l); }
00352 
<a name="l00354"></a><a class="code" href="group__util.html#ga58">00354</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="group__util.html#ga58">csGetBigEndianFloat16</a> (<span class="keyword">const</span> <span class="keywordtype">void</span> *buff)
00355 { <a class="code" href="group__util.html#ga2">uint16</a> s = <a class="code" href="group__util.html#ga55">csGetBigEndianShort</a> (buff); <span class="keywordflow">return</span> <a class="code" href="group__util.html#ga39">csShortToFloat</a> (s); }
00356 
<a name="l00358"></a><a class="code" href="group__util.html#ga59">00358</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__util.html#ga59">csSetBigEndianShort</a> (<span class="keywordtype">void</span> *buff, <a class="code" href="group__util.html#ga2">uint16</a> s)
00359 {
00360 <span class="preprocessor">#ifdef CS_STRICT_ALIGNMENT</span>
00361 <span class="preprocessor"></span>  s = <a class="code" href="group__util.html#ga28">csBigEndianShort</a> (s);
00362   memcpy (buff, &amp;s, <span class="keyword">sizeof</span> (s));
00363 <span class="preprocessor">#else</span>
00364 <span class="preprocessor"></span>  *((<a class="code" href="group__util.html#ga2">uint16</a> *)buff) = <a class="code" href="group__util.html#ga28">csBigEndianShort</a> (s);
00365 <span class="preprocessor">#endif</span>
00366 <span class="preprocessor"></span>}
00367 
<a name="l00369"></a><a class="code" href="group__util.html#ga60">00369</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__util.html#ga60">csSetBigEndianLong</a> (<span class="keywordtype">void</span> *buff, <a class="code" href="group__util.html#ga4">uint32</a> l)
00370 {
00371 <span class="preprocessor">#ifdef CS_STRICT_ALIGNMENT</span>
00372 <span class="preprocessor"></span>  l = <a class="code" href="group__util.html#ga27">csBigEndianLong</a> (l);
00373   memcpy (buff, &amp;l, <span class="keyword">sizeof</span> (l));
00374 <span class="preprocessor">#else</span>
00375 <span class="preprocessor"></span>  *((<a class="code" href="group__util.html#ga4">uint32</a> *)buff) = <a class="code" href="group__util.html#ga27">csBigEndianLong</a> (l);
00376 <span class="preprocessor">#endif</span>
00377 <span class="preprocessor"></span>}
00378 
<a name="l00380"></a><a class="code" href="group__util.html#ga61">00380</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__util.html#ga61">csSetBigEndianFloat32</a> (<span class="keywordtype">void</span> *buff, <span class="keywordtype">float</span> f)
00381 { <a class="code" href="group__util.html#ga60">csSetBigEndianLong</a> (buff, <a class="code" href="group__util.html#ga34">csFloatToLong</a> (f)); }
00382 
<a name="l00384"></a><a class="code" href="group__util.html#ga62">00384</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group__util.html#ga62">csSetBigEndianFloat16</a> (<span class="keywordtype">void</span> *buff, <span class="keywordtype">float</span> f)
00385 { <a class="code" href="group__util.html#ga59">csSetBigEndianShort</a> (buff, <a class="code" href="group__util.html#ga38">csFloatToShort</a> (f)); }
00386 
00389 <span class="preprocessor">#endif // __CS_CSENDIAN_H__</span>
</pre></div><hr size="1"><address><small>Generated for Crystal Space by 
<a href="http://www.doxygen.org/index.html">doxygen</a> 1.4.2 
</small></address> </div></body> </html>
