<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title> TemplatecsBlockAllocator&lt; T &gt; class Reference (Crystal Space Public API Reference)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<table border="0" cellpadding="0" cellspacing="0" width="100%" class="head">
 <tr heigth="59">
  <td class="head" width="202" valign="bottom" style="padding-left:0;"><a href="http://crystal.sourceforge.net/"><img src="csblur.png" width="236" height="59" alt="CrystalSpace" border="0"></a></td>
  <td class="head"><h2>Public API Reference</h2></td>
 </tr>
 <tr heigth="11">
  <td colspan="2" class="headshadow" valign="top" style="padding-left:0;"><img src="csblurb.png" width="236" height="11" alt="" border="0"></td>
 </tr>
</table>
<div class="content">
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>csBlockAllocator&lt; T &gt; Class Template Reference</h1>This class implements a memory allocator which can efficiently allocate objects that all have the same size. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="blockallocator_8h-source.html">blockallocator.h</a>&gt;</code>
<p>
<a href="classcsBlockAllocator-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classcsBlockAllocator.html#a0">csBlockAllocator</a> (int s)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Construct a new block allocator which uses 'size' elements per block.</em> <a href="#a0"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classcsBlockAllocator.html#a1">~csBlockAllocator</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Destruct all.</em> <a href="#a1"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classcsBlockAllocator.html#a2">Compact</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Compact the block allocator so that all blocks that are completely free are removed.</em> <a href="#a2"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>T *&nbsp;</td><td valign=bottom><a class="el" href="classcsBlockAllocator.html#a3">Alloc</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Allocate a new element.</em> <a href="#a3"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classcsBlockAllocator.html#a4">Free</a> (T *el)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Deallocate an element.</em> <a href="#a4"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classcsBlockAllocator.html#a5">Dump</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>For debugging: dump contents.</em> <a href="#a5"></a><em></em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class T&gt;<br>
 class csBlockAllocator&lt; T &gt;</h3>

This class implements a memory allocator which can efficiently allocate objects that all have the same size.
<p>
It has NO memory overhead per allocation (unless the objects are smaller than 8 bytes) and is extremely fast, both for Alloc and Free. Only restriction is it can only be used for the same type of object. 
<p>
 Note that the objects are properly constructed and destructed. 
<p>
 WARNING: This class does VERY little error checking! 
<p>
 Defining the macro CS_BLOCKALLOC_DEBUG will cause freed objects to be overwritten with '0xfb' bytes. This can be useful to track use of already freed objects, as they can be more easily recognized (as some members will be likely bogus.) 
<p>

<p>
Definition at line <a class="el" href="blockallocator_8h-source.html#l00053">53</a> of file <a class="el" href="blockallocator_8h-source.html">blockallocator.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="csBlockAllocator::csBlockAllocator"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class T&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> csBlockAllocator&lt; T &gt;::csBlockAllocator </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>s</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Construct a new block allocator which uses 'size' elements per block.
<p>
Using a bigger 'size' means there is more memory 'wasted' but it makes performance faster. 
<p>
Definition at line <a class="el" href="blockallocator_8h-source.html#l00148">148</a> of file <a class="el" href="blockallocator_8h-source.html">blockallocator.h</a>.    </td>
  </tr>
</table>
<a name="a1" doxytag="csBlockAllocator::~csBlockAllocator"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class T&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> csBlockAllocator&lt; T &gt;::~csBlockAllocator </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destruct all.
<p>
Note that objects have to be freed properly before the block allocator is called, otherwise the destructors will not be called! In debug mode this destructor will also check that all objects are freed correctly. 
<p>
Definition at line <a class="el" href="blockallocator_8h-source.html#l00180">180</a> of file <a class="el" href="blockallocator_8h-source.html">blockallocator.h</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a3" doxytag="csBlockAllocator::Alloc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class T&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> T* csBlockAllocator&lt; T &gt;::Alloc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Allocate a new element.
<p>

<p>
Definition at line <a class="el" href="blockallocator_8h-source.html#l00213">213</a> of file <a class="el" href="blockallocator_8h-source.html">blockallocator.h</a>.
<p>
Referenced by <a class="el" href="bintree_8h-source.html#l00115">csTree&lt; T &gt;::csTree()</a>.    </td>
  </tr>
</table>
<a name="a2" doxytag="csBlockAllocator::Compact"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class T&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> void csBlockAllocator&lt; T &gt;::Compact </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Compact the block allocator so that all blocks that are completely free are removed.
<p>
The blocks that still contain elements are not touched. 
<p>
Definition at line <a class="el" href="blockallocator_8h-source.html#l00198">198</a> of file <a class="el" href="blockallocator_8h-source.html">blockallocator.h</a>.    </td>
  </tr>
</table>
<a name="a5" doxytag="csBlockAllocator::Dump"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class T&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> void csBlockAllocator&lt; T &gt;::Dump </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
For debugging: dump contents.
<p>

<p>
Definition at line <a class="el" href="blockallocator_8h-source.html#l00369">369</a> of file <a class="el" href="blockallocator_8h-source.html">blockallocator.h</a>.    </td>
  </tr>
</table>
<a name="a4" doxytag="csBlockAllocator::Free"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class T&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> void csBlockAllocator&lt; T &gt;::Free </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">T *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>el</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deallocate an element.
<p>
It is ok to give a 0 pointer here. 
<p>
Definition at line <a class="el" href="blockallocator_8h-source.html#l00244">244</a> of file <a class="el" href="blockallocator_8h-source.html">blockallocator.h</a>.
<p>
Referenced by <a class="el" href="bintree_8h-source.html#l00229">csTree&lt; T &gt;::Delete()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>csutil/<a class="el" href="blockallocator_8h-source.html">blockallocator.h</a></ul>
<hr><address><small>Generated for Crystal Space by 
<a href="http://www.doxygen.org/index.html">doxygen</a> 1.2.18 
</small></address> </div></body> </html>
