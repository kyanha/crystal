BUILDTOP ?= . ;
# Include config
JAMCONFIG ?= $(BUILDTOP)/Jamconfig ;
include $(JAMCONFIG) ;
if ! $(JAMCONFIG_READ)
{
  EXIT "Couldn't find config. Please configure the project." ;
}

# csutil uses zlib :-/
APPLICATION.LFLAGS += $(ZLIB.LFLAGS) ;
APPLICATION.CFLAGS += $(ZLIB.CFLAGS) ;

# Put output files into out/systemname
LOCATE.OBJECTS = $(BUILDTOP)/out/$(OSFULL[1]:L) ;
LOCATE.TARGETS = $(BUILDTOP) ;
LOCATE.DOCS = $(BUILDTOP)/out ;

# List of plugins which should be linked in when building static
STATIC.PLUGINLIST =
    ball
    ballldr
    bugplug
    crossbld
    csbmpimg
    csconin
    csfont
    csgifimg
    csjpgimg
    csparser
    cspngimg
    cssynldr
    dynavis
    effects
    emit
    emitldr
    engine
    engseq
    explo
    exploldr
    fire
    fireldr
    fountain
    fountldr
    frustvis
    genmesh
    gl3d
    glx2d
    gmeshldr
    gtreeldr
    haze
    hazeldr
    ieplex
    imgplex
    mballldr
    metaball
    metagen
    motion
    motionldr
    nullmesh
    rain
    rainldr
    rapid
    reporter
    sequence
    simpcon
    snow
    snowldr
    soft3d
    softx
    spiral
    spirldr
    spr2d
    spr2dldr
    spr3d
    spr3dldr
    starldr
    starts
    stdrep
    thing
    thingldr
    vfs
    x2d
    xext86vm
    xextshm
    xwin
    ;

# Include CS build rules
include $(TOP)/mk/jam/build.jam ;

# Common include directory
IncludeDir
    $(BUILDTOP)/include
    $(TOP)
    $(TOP)/include
    $(TOP)/apps
    $(TOP)/libs
    $(TOP)/plugins
    ;
