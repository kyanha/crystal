SubDir TOP plugins cscript cspython ;

if $(PYTHON.AVAILABLE) = "yes"
{
  local target = cs_pyth.cpp ;

  if ! [ Property build : projgen ]
  {
    target = [ FGristFiles $(target) ] ;

    if $(CMD.SWIG)
    {
      Swig $(target) [ FGristFiles cspace.py ] :
        [ FGristFiles cspace.i ] :
        python :
	-c++ -shadow :
	[ ConcatDirs $(TOP) include ] :
	[ ConcatDirs $(TOP) include ivaria ] :
	$(SEARCH_SOURCE) [ ConcatDirs $(TOP) scripts python ] ;
    }
    else
    {
      SEARCH on $(target) = $(SEARCH_SOURCE) ;
    }
  }

  Help cspython : "Crystal Script Python plug-in" ;
  Plugin cspython : $(target) cspython.h cspython.cpp pytocs.h pytocs.cpp ;
  LinkWith cspython : cstool csgfx csgeom csutil ;
  ExternalLibs cspython : PYTHON ;
  CFlags cspython : -DSWIG_GLOBAL $(COMPILER.C++FLAGS.WARNING.NO_UNUSED) ;
}
