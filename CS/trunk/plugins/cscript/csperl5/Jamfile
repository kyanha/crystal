SubDir TOP plugins cscript csperl5 ;

if $(PERL5.AVAILABLE) = "yes" && ! DISABLED
{
  if $(CMD.SWIG)
  {
    # for details and comments look at the cspython Jamfile
    local target = [ FGristFiles cswigpl5.cpp ] ;
    local sources = [ FGristFiles cspace.i ] ;

    SEARCH on $(sources) = $(TOP)/include/ivaria ;
    HDRGRIST on $(sources) = $(HDRGRIST) ;
    HDRSEARCH on $(sources) = $(SEARCH_SOURCE:E) $(SUBDIRHDRS) $(HDRS) $(STDHDRS) ;
    HDRRULE on $(sources) = HeaderRule ;
    HDRSCAN on $(sources) = $(SWIG.HDRPATTERN) ;
    SWIG.FLAGS on $(target) += -perl5 -c++ -v -shadow -I$(TOP)/include 
			       -module cspace ;
		    
    Swig $(target) : $(sources) ;
  }
  
  FILES = csperl5.cpp csperl5.h cswigpl5.cpp perlxsi_fallback.c ;
  
  Plugin csperl5
	  : $(FILES)
  ;
  LinkWith csperl5 : cstool csgeom cssys csutil ;
  ExternalLibs csperl5 : PERL5 ;
  Help csperl5 : "Crystal Script Perl5 plug-in" ;
}
