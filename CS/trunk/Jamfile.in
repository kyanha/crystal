TOP ?= "@top_srcdir@" ;
BUILDTOP ?= "@top_builddir@" ;

SubDir TOP ;

# Define our compile groups
RegisterCompileGroups sounddrivers soundloaders imageloaders netdrivers
		      drivers2d drivers3d meshes walkall openglcanvas 
		      softcanvas ;
Help sounddrivers : "sound drivers compilegroup" ;
Help soundloaders : "sound loaders compilegroup" ;
Help imageloaders : "image loaders compilegroup" ;
Help netdrivers	  : "network drivers compilegroup" ;
Help drivers2d	  : "2d canvases compilegroup" ;
Help drivers3d	  : "3d renderers compilegroup" ;
Help meshes	  : "mesh plugin and loader compilegroup" ;
Help walkall  	  : "walktest application and all required plugins" ;
Help openglcanvas : "canvases suitable for the GL renderer" ;
Help softcanvas   : "canvases suitable for the software renderer" ;

# Create some clean targets
CleanDir clean : out ;

Clean distclean : Jamconfig Jamfile
		  cache.mak config.mak Makefile
		  config.log config.status config.status.lineno
		  config.cache configure.lineno
		  include/volatile.h
		  [ Wildcard *.scf ]
		  [ Wildcard *.cex ] ;
CleanDir distclean : autom4te.cache ;
Depends distclean : clean ;

# When build directory differs from source directory, also remove `include'
# directory created by configure.
conftmpfiles = [ GLOB include : * ] ;
conftmpfiles = [ Filter $(conftmpfiles:BS) : . .. volatile.h ] ;
if ! $(conftmpfiles)
{
  CleanDir distclean : include ;
}

Clean maintainerclean : aclocal.m4 configure configure.scan ;
Depends maintainerclean : distclean ;

# Process subdirectories
SubInclude TOP data ;
SubInclude TOP libs ;
SubInclude TOP plugins ;
SubInclude TOP apps ;
SubInclude TOP docs ;
SubInclude TOP include ;
SubInclude TOP scripts ;
