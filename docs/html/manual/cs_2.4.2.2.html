<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: MSVC7</TITLE>

<META NAME="description" CONTENT="Crystal Space: MSVC7">
<META NAME="keywords" CONTENT="Crystal Space: MSVC7">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC2.4.2.2"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.2.1.html#SEC2.4.2.1"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.3.html#SEC2.4.3"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.1.html#SEC2.4.1"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.2.html#SEC2.4.2"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.3.html#SEC2.4.3"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs__1.html#SEC_1">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H4> 2.4.2.2 Microsoft Visual C++ 7 </H4>
<!--docid::SEC2.4.2.2::-->
<P>

<EM>Philip Wyett <A HREF="mailto:philipwyett@dsl.pipex.com">philipwyett@dsl.pipex.com</A>.</EM>
<EM>Last updated 3 May 2004.</EM>
</P><P>

In order to successfully compile the Crystal Space 3D Software Development Kit
(SDK), you will need a copy of <EM>Microsoft Developer Studio .NET</EM>
or the stand alone version of <EM>Microsoft Visual C++ 7</EM>.
</P><P>

<A NAME="SEC_1"></A>
<H4> Getting Extra Help  </H4>
<!--docid::SEC_1::-->
<P>

If you need help with Crystal Space and Visual C++ or just Crystal Space in
general.  You can subscribe and then post a message to the Crystal Space
mailing list.  To subscribe see the following site and fill in the form:
</P><P>

<A HREF="http://lists.sourceforge.net/lists/listinfo/crystal-main">http://lists.sourceforge.net/lists/listinfo/crystal-main</A>
</P><P>

<A NAME="SEC_2"></A>
<H4> Required/Optional External Libraries and Software  </H4>
<!--docid::SEC_2::-->
<P>

All the following libraries and Software Development Kits (SDK) unless
stated are not required.  However, if you choose not to install them, at
compile time you must follow the documented instructions of how to unload these
projects from the Crystal Space build process.
</P><P>

<A NAME="SEC_3"></A>
<H4> cs-win32libs - Required  </H4>
<!--docid::SEC_3::-->
<P>

Before you attempt to compile Crystal Space, you must download
and install the "cs-win32libs" archive.  This archive contains alot of the
third party header, pre-built libraries and dll files used by Crystal
Space, i.e. `<TT>libz-cs.dll</TT>', `<TT>libjpeg-cs.dll</TT>', `<TT>libpng-cs.dll</TT>', 
etc. See  <A HREF="cs_2.3.html#cs-win32libs">cs-win32libs</A>.
</P><P>

Once you have downloaded the cs-win32libs package, execute the binary and
follow the setup instructions.  You may want to select "VC typical" in the
"Select Components" screen. You can further adjust the selection of installed 
components depending on your actual set up (e.g. install MinGW-related 
components if you plan to also use CrystalSpace with MinGW/MSYS).
</P><P>

<A NAME="SEC_4"></A>
<H4> DirectX - Optional  </H4>
<!--docid::SEC_4::-->
<P>

In order to compile Crystal Space at its minimum i.e. the software renderer,
you must have at least some form of the DirectX Software Development Kit 
(SDK) on your system. 
</P><P>

Visual C++ 7 comes with the minimum DirectX SDK 8.1 pre-release files
in-order to build Crystal Space. 
</P><P>

The "cs-win32libs" package also come with minimum headers and libraries that 
suffice to compile the parts of Crystal Space that utilize DirectX. However, 
the version included in cs-win32libs is DirectX 7, so you may want to stick to 
the DirectX 8.1 shipped with VC++ 7.
</P><P>

You can optionally download the latest DirectX Software Development Kit 
(SDK), which can be obtained from:
</P><P>

<A HREF="http://www.msdn.microsoft.com/directx">http://www.msdn.microsoft.com/directx</A>
</P><P>

Thanks, to the miracle which is Microsoft.  If you download and install the
latest DirectX  Software Development Kit (SDK) and already have Visual
C++ installed, it will ask you if you wish to add the paths to the SDK to
Visual C++ so it can use it.  We recommend you accept when offered this option.
If it is not the latest SDK you install you will have to manually point
Visual C++ to where you installed the SDK in-order for it to be used.
This can be done from the Visual C++ file menu and selecting
<EM>Tools-&#62;Options-&#62;Directories</EM>.  You must add the paths for both the
include files and libraries and being that we wish Visual C++ to see and use
this new SDK before all possible others on your system, you must click on
and drag both paths you have entered to the top of the list.
</P><P>

<A NAME="SEC_5"></A>
<H4> Python - Optional  </H4>
<!--docid::SEC_5::-->
<P>

Crystal Space contains support for Python scripting and thus has projects
within it requires that Python be installed on your system.  Make sure you add
the Python <EM>include</EM> and <EM>libs</EM> directories to MSVC so that the
compiler can see those files.  If you wish to compile with Python support you
must install Python 2.2 or later, which can be obtained from:
</P><P>

<A HREF="http://www.python.org">http://www.python.org</A>
</P><P>

NOTE: To have parity with one of the latest versions of msvc_libs and take
full advantage of the debug elements - you should have Python 2.2.3 or 2.3.0
installed on your system. Whichever version you decide to use, make sure you
download the comparable msvc_libs.
</P><P>

<A NAME="SEC_6"></A>
<H4> Compiling Crystal Space  </H4>
<!--docid::SEC_6::-->
<P>

To compile Crystal Space, you'll have to perform the following steps.  If
anything doesn't work, see the Win32 FAQ,  <A HREF="cs_2.4.2.2.html#MSVC7 FAQ">MSVC7 FAQ</A>.
</P><P>

<OL>
<LI>
Load `<TT>CS\mk\msvc\wkstypical.sln</TT>'.
<P>

<LI>
From the file menu select <EM>Build-&#62;Build Solution</EM>.  <EM>Note</EM>: If you
want to build a debuggable version of Crystal Space, you should select the
<EM>Debug</EM> build mode; otherwise select the <EM>Release</EM> build mode.  Do
not use the special-purpose <EM>ExtensiveMemDebug</EM> build mode.
<P>

<LI>
After a while the compilation should finish.  The signal for a
successful build will be come in the form of the something similar to the
following:
<P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>Build: 1 succeeded, 0 failed, 0 skipped
</pre></td></tr></table></OL>
<P>

<A NAME="SEC_7"></A>
<H4> Running the Demonstration Applications  </H4>
<!--docid::SEC_7::-->
<P>

The first app you should try is Walktest.  This program shows many of the
features of the 3D engine.  You can run it by starting it from the windows
explorer.  It should be at `<TT>.../cs/walktest.exe</TT>'.  Don't start it from
other locations or from within Visual Studio.  It won't find the required files
if you do.
</P><P>

If you want to run a debug session, you first have to set the working
directory.  First select the project you wish to debug and setting it as the
startup project. Next open <EM>Project-&#62;Properties-&#62;Debugging</EM> and enter
the base `<TT>CS\</TT>' directory as the working directory for debug sessions
(for example, `<TT>C:\CS\</TT>').  Be sure to to this for <EM>Debug</EM> and
<EM>Release</EM> builds.
</P><P>

You can now continue with the next platform-independent step.  The remaining
Windows-specific sections are only important when you want to compile your own
application using Crystal Space.
</P><P>

<A NAME="SEC_8"></A>
<H4> Structure of the Workspace  </H4>
<!--docid::SEC_8::-->
<P>

<EM>Note</EM>: If you find bugs in the MSVC project or workspace files
coming with Crystal Space, don't send fixes for these files to the developers.
These files are generated automatically, so your fixes would be useless.
Better, send a description of the bug to the mailing list.
</P><P>

The Crystal Space workspace is divided into several projects.  They all exist
as separate project files (`<TT>*.vcproj</TT>').  The projects are collected
together by workspaces `<TT>*.sln</TT>'.  A workspace will also ensure correct
linking between the various projects.  There are several workspaces to choose
from.  Most users should choose the <EM>typical</EM> workspace, but the others
are available for the adventurous.
</P><P>

<UL>
<LI>
`<TT>wkstypical.sln</TT>' -- Builds the typical modules needed by most users of
Crystal Space.
<P>

</UL>
<P>

The workspace uses a prefix system for naming contained projects:
</P><P>

<UL>
<LI>
`<TT>app</TT>' -- Prefixes application projects.
<LI>
`<TT>lib</TT>' -- Prefixes library projects.
<LI>
`<TT>plg</TT>' -- Prefixes plugin module projects.
<LI>
`<TT>grp</TT>' -- Prefixes psuedo-groups of related projects.
</UL>
<P>

The <EM>Libraries</EM> are C++ libraries that you can link into your own
programs.  Some of these libraries are part of the core of Crystal Space.  You
can find more information about this in <A HREF="cs_6.html#SEC6">6. Facilities</A>.  Their output are
`<TT>.lib</TT>' files.
</P><P>

The <EM>Plugins</EM> are also programming libraries, but they use a special
mechanism called SCF as their interface to your program.  This separates
their interface from the internals of the library and thus allows dynamic
linking.  In fact, some of the <EM>Libraries</EM> also use SCF.  The rule
for the MSVC workspace is simple: The <EM>Plugins</EM> are projects that
build a dynamic library (`<TT>.dll</TT>').  You can find more information in the
section of this manual dealing with plug-in modules.  See section <A HREF="cs_7.html#SEC7">7. Plug-In Modules and Drivers</A>.
</P><P>

The <EM>Applications</EM> are programs using some of these libraries, so they
produce `<TT>.exe</TT>' files.
</P><P>

<A NAME="SEC_9"></A>
<H4> Compiling Your Own Program Using Crystal Space  </H4>
<!--docid::SEC_9::-->
<P>

There is a HOWTO which explains how to create an MSVC7 project file
for your own program which utilizes Crystal Space.
See section <A HREF="cs_5.8.17.html#SEC5.8.17">5.8.17 Creating an External MSVC 7 Application</A>.
</P><P>

<A NAME="SEC_10"></A>
<H4> Frequently Asked Questions (FAQ)  </H4>
<!--docid::SEC_10::-->
<A NAME="MSVC7 FAQ"></A>
<P>

This is the list of frequently asked questions for the Win32 port of Crystal
Space.  Please consult this list if you are having difficulty building or using
the project.
</P><P>

<A NAME="SEC_11"></A>
<H4> Compilation  </H4>
<!--docid::SEC_11::-->
<P>

<UL>
<LI>
Q. <EM>I get "Errors in post link" and later "file not found" errors.</EM>
<P>

A. Some problems with non-latin directory names have been reported (e.g.
Hebrew).  If your `<TT>CS</TT>' directory is under such a directory, try to move it
to a directory which name has only Latin characters in it.
</UL>
<P>

<A NAME="SEC_12"></A>
<H4> Blasting the Past  </H4>
<!--docid::SEC_12::-->
<P>

If you have previously used the long-deprecated and ancient `<TT>msvc_libs</TT>'
package, it's recommended you remove it before installing the
`<TT>cs-win32libs</TT>' package as outlined above.  Unfortunately, the
`<TT>msvc_libs</TT>' package was a simple ZIP file with no means of
uninstalling whatsoever. However, the header and library files were located in
the `<TT>include\cssys\win32</TT>' and `<TT>libs\cssys\win32\cssys</TT>' directories,
but as the <CODE>cssys</CODE> library has been merged into <CODE>csutil</CODE>, Crystal
Space's files in those directories has been relocated as well, so you can
safely remove these directories.
</P><P>

However, the `<TT>msvc_libs</TT>' package also contained a couple of DLL
files, copied to the `<TT>CS\</TT>' root directory.  To remove them, use the
following batch file that removes all DLL files contained in the different
versions of the `<TT>msvc_libs</TT>' package:
</P><P>

<A HREF="ftp://sunsite.dk/projects/crystal/support/win32/remove_msvc_libs.bat">ftp://sunsite.dk/projects/crystal/support/win32/remove_msvc_libs.bat</A>
</P><P>

<A NAME="SEC_13"></A>
<H4> Miscellaneous  </H4>
<!--docid::SEC_13::-->
<P>

<UL>
<LI>
Q. <EM>I have a problem that you haven't solved here!</EM>
<P>

A. Try sending a note to the Crystal Space mailing list and asking your
question there.  See section <A HREF="cs_1.7.html#SEC1.7">1.7 Mailing Lists</A>.  Be sure to include any pertinent
information, such as the operating system you are using, the compiler, which
version of Crystal Space, and any special configuration information.
</UL>
<A NAME="MinGW"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.2.1.html#SEC2.4.2.1"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.3.html#SEC2.4.3"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.1.html#SEC2.4.1"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.2.html#SEC2.4.2"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_2.4.3.html#SEC2.4.3"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs__1.html#SEC_1">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
