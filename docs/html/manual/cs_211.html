<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: MeshObject Spr2D</TITLE>

<META NAME="description" CONTENT="Crystal Space: MeshObject Spr2D">
<META NAME="keywords" CONTENT="Crystal Space: MeshObject Spr2D">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC564"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_210.html#SEC563"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_212.html#SEC571"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_197.html#SEC492"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_207.html#SEC552"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_227.html#SEC653"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC956">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H3> 7.7.4 Sprite2D Mesh Object </H3>
<!--docid::SEC564::-->
<P>

<EM>Written by Jorrit Tyberghein,
(<A HREF="mailto:jorrit.tyberghein@uz.kuleuven.ac.be">jorrit.tyberghein@uz.kuleuven.ac.be</A>).</EM>
</P><P>

A 2D Sprite is basically a polygon that always faces the camera.  There are
some special effects that you can do with this but it is really very simple
otherwise.
</P><P>

<A NAME="SEC565"></A>
<H4> Basic Structure  </H4>
<!--docid::SEC565::-->
<P>

The following SCF class names are used (for <CODE>CS_LOAD_PLUGIN()</CODE>):
</P><P>

<UL>
<LI>
Type plugin: `<SAMP>crystalspace.mesh.object.sprite.2d</SAMP>'
<LI>
Loader plugin: `<SAMP>crystalspace.mesh.loader.sprite.2d</SAMP>'
<LI>
Factory loader plugin: `<SAMP>crystalspace.mesh.loader.factory.sprite.2d</SAMP>'
</UL>
<P>

Objects in this plugin implement the following SCF interfaces (get with
<CODE>SCF_QUERY_INTERFACE()</CODE>):
</P><P>

<UL>
<LI>
<EM>MeshObject</EM>
<UL>
<LI>
Implements `<SAMP>iMeshObject</SAMP>'
<LI>
Implements `<SAMP>iSprite2DState</SAMP>'
<LI>
Implements `<SAMP>iParticle</SAMP>'
</UL>
<LI>
<EM>MeshObjectFactory</EM>
<UL>
<LI>
Implements `<SAMP>iMeshObjectFactory</SAMP>'
<LI>
Implements `<SAMP>iSprite2DFactoryState</SAMP>'
</UL>
<LI>
<EM>MeshObjectFactory</EM>
<UL>
<LI>
Implements `<SAMP>iMeshObjectType</SAMP>'
</UL>
</UL>
<P>

<A NAME="SEC566"></A>
<H4> Factory State Interface </H4>
<!--docid::SEC566::-->
<P>

Use the SCF interface `<SAMP>iSprite2DFactoryState</SAMP>' to access settings for
a 2D sprite factory.  The definition of this interface can be found in
`<TT>CS/include/imesh/sprite2d.h</TT>' and that is also the include file you need
to include in your applications to use this plugin.  Using this interface you
can access the material, blending mode (mixmode), and lighting settings.
</P><P>

<A NAME="SEC567"></A>
<H4> Factory Loader </H4>
<!--docid::SEC567::-->
<P>

<DL COMPACT>
<DT><CODE>&#60;lighting&#62;yes/no&#60;/lighting&#62;</CODE>
<DD>Enable/disable lighting.
<DT><CODE>&#60;material&#62;materialname&#60;/material&#62;</CODE>
<DD>Material to use for the polygon.
<DT><CODE>&#60;mixmode&#62;&#60;mode /&#62;&#60;/mixmode&#62;</CODE>
<DD>Blending mode; one of `<SAMP>add</SAMP>', `<SAMP>alpha</SAMP>', `<SAMP>copy</SAMP>', `<SAMP>keycolor</SAMP>',
`<SAMP>multiply2</SAMP>', `<SAMP>multiply</SAMP>', or `<SAMP>transparent</SAMP>'.
<DT><CODE>&#60;uvanimation name=uvanimationname&#62;&#60;frame <small>...</small>&#62; <small>...</small></CODE>
<DD>Define an uv animation, that is a sequence of frames which textures are all in
one big texture.  Thus the animation is achieved by altering the (u,v)
coordinates of the polygon defined by this sprite.
<DT><CODE>&#60;frame&#62;&#60;duration&#62;&#60;vertices <small>...</small>&#62; <small>...</small></CODE>
<DD>Defines a single frame within an uv animation by specifying its duration in
milliseconds and the u,v coordinates to use.
<UL>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#60;frame name="framename"&#62;
 &#60;duration&#62;milliseconds&#60;/duration&#62;
 &#60;v u="" v="" /&#62;
 <small>...</small> u,v coo list
&#60;/frame&#62;
</pre></td></tr></table></UL>
</DL>
<P>

<A NAME="SEC568"></A>
<H4> Object State Interface </H4>
<!--docid::SEC568::-->
<P>

`<SAMP>iSprite2DState</SAMP>' is the SCF interface that you can use to set/get
settings for a 2D sprite object.  The definition of this interface can be found
in `<TT>CS/include/imesh/sprite2d.h</TT>' and that is also the include file you
need to include in your applications to use this plugin.  Using this
interface you can access the material, blending mode (mixmode), lighting
settings, and also the vertices of the 2D polygon controlled by this plugin.
</P><P>

<A NAME="SEC569"></A>
<H4> Object Loader </H4>
<!--docid::SEC569::-->
<P>

<DL COMPACT>
<DT><CODE>&#60;factory&#62;factoryname&#60;/factory&#62;</CODE>
<DD>Name of the factory to use for creation of this instance.
<DT><CODE>&#60;mixmode&#62;&#60;mode /&#62;&#60;/mixmode&#62;</CODE>
<DD>Blending mode, one of `<SAMP>add</SAMP>', `<SAMP>alpha</SAMP>', `<SAMP>copy</SAMP>', `<SAMP>keycolor</SAMP>',
`<SAMP>multiply2</SAMP>', `<SAMP>multiply</SAMP>', or `<SAMP>transparent</SAMP>'.
<DT><CODE>&#60;material&#62;materialname&#60;/material&#62;</CODE>
<DD>Material to use for the polygon.
<DT><CODE>&#60;lighting&#62;yes/no&#60;/lighting&#62;</CODE>
<DD>Enable/disable lighting.
<DT><CODE>vertices &#60;v x="" y="" /&#62; <small>...</small></CODE>
<DD>List of 2D vertices defining the polygon.
<DT><CODE>&#60;uv u="" v="" /&#62;</CODE>
<DD>List of texture mapping UV coordinates for the polygon.
<DT><CODE>&#60;color red="" green="" blue="" /&#62;</CODE>
<DD>List of rgb colors for the polygon.
<DT><CODE>&#60;animate&#62; <small>...</small></CODE>
<DD>Select an uv animation from the list of animations declared in the template
<UL>
<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#60;animate name="animationname"&#62;
    &#60;timing&#62;milliseconds&#60;/timing&#62;
    &#60;loop&#62;yes/no&#60;/loop&#62;
&#60;/animate&#62;
</pre></td></tr></table><UL>
<LI>
timing &#62; 0 : every &#60;timing&#62; milliseconds the next frame will be shown
<LI>
timing &#60; 0 : every &#60;-timing&#62; gameloop the next frame will be shown
<LI>
timing = 0 : timing attached to the frame will be used
<LI>
loop : loop the animation or stop after last frame (and show the last frame)
</UL>
</UL>
</DL>
<P>

<A NAME="SEC570"></A>
<H4> Example 1 </H4>
<!--docid::SEC570::-->
<P>

This is how our world file looks:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>&#60;world&#62;
    &#60;textures&#62;
        &#60;texture name="blow"&#62;
            &#60;file&#62;blow.png&#60;/file&#62;
        &#60;/texture&#62;
    &#60;/textures&#62;
    &#60;materials&#62;
        &#60;material name="explosion"&#62;
            &#60;texture&#62;blow&#60;/texture&#62;
        &#60;/material&#62;
    &#60;/materials&#62;
    &#60;meshobj name="Explosion"&#62;
        &#60;plugin&#62;crystalspace.mesh.loader.factory.sprite.2d&#60;/plugin&#62;
        &#60;params&#62;
            &#60;material&#62;explosion&#60;/material&#62;
            &#60;uvanimation name="boom"&#62;
                &#60;frame name="first"&#62;
                    &#60;duration&#62;100&#60;/duration&#62;
                    &#60;v u="0" v="0" /&#62;
                    &#60;v u="0.5" v="0" /&#62;
                    &#60;v u="0.5" v="0.5" /&#62;
                    &#60;v u="0" v="0.5" /&#62;
                &#60;/frame&#62;
                &#60;frame name="second"&#62;
                    &#60;duration&#62;100&#60;/duration&#62;
                    &#60;v u="0.5" v="0" /&#62;
                    &#60;v u="1" v="0" /&#62;
                    &#60;v u="1" v="0.5" /&#62;
                    &#60;v u="0.5" v="0.5" /&#62;
                &#60;/frame&#62;
                &#60;frame name="third"&#62;
                    &#60;duration&#62;100&#60;/duration&#62;
                    &#60;v u="0" v="0.5" /&#62;
                    &#60;v u="0.5" v="0.5" /&#62;
                    &#60;v u="0.5" v="1" /&#62;
                    &#60;v u="0" v="1" /&#62;
                &#60;/frame&#62;
                &#60;frame name="fourth"&#62;
                    &#60;duration&#62;100&#60;/duration&#62;
                    &#60;v u="0.5" v="0.5" /&#62;
                    &#60;v u="1" v="0.5" /&#62;
                    &#60;v u="1" v="1" /&#62;
                    &#60;v u="0.5" v="1" /&#62;
                &#60;/frame&#62;
            &#60;/uvanimation&#62;
        &#60;/params&#62;
    &#60;/meshobj&#62;
    &#60;sector name="space"&#62;
    &#60;!-- define all the stuff in space
         <small>...</small>
         and now one of the enemies right after we met him --&#62;
        &#60;meshobj name="Kaboom"&#62;
	    &#60;plugin&#62;crystalspace.mesh.loader.sprite.2d&#60;/plugin&#62;
	    &#60;params&#62;
		&#60;v x="-1" y="1" /&#62;
    	        &#60;v x="1" y="1" /&#62;
    		&#60;v x="1" y="-1" /&#62;
	        &#60;v x="-1" y="-1" /&#62;
		&#60;uv u="0" v="0" /&#62;
		&#60;uv u="1" v="0" /&#62;
	        &#60;uv u="1" v="1" /&#62;
		&#60;uv u="0" v="1" /&#62;
	        &#60;color red="1" green="1" blue="1" /&#62;
		&#60;color red="1" green="1" blue="1" /&#62;
	        &#60;color red="1" green="1" blue="1" /&#62;
		&#60;color red="1" green="1" blue="1" /&#62;
	        &#60;lighting&#62;no&#60;/lighting&#62;
		&#60;!-- show the animation, use the timings attached to
	    	     the frames, loop --&#62;
    	    	&#60;animate name="boom"&#62;
		    &#60;timing&#62;0&#60;/timing&#62;
	    	    &#60;loop&#62;yes&#60;/loop&#62;
		&#60;/animate&#62;
	    &#60;/params&#62;
	    &#60;move&#62;
		&#60;v x="0" y="0" z="0"&#62;
	    &#60;/move&#62;
	&#60;/meshobj&#62;
    &#60;/sector&#62;
&#60;/world&#62;

</pre></td></tr></table><A NAME="MeshObject Spr3D"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_210.html#SEC563"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_212.html#SEC571"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_197.html#SEC492"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_207.html#SEC552"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_227.html#SEC653"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC956">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
