<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: VFS Configuration File</TITLE>

<META NAME="description" CONTENT="Crystal Space: VFS Configuration File">
<META NAME="keywords" CONTENT="Crystal Space: VFS Configuration File">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC395"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_160.html#SEC394"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_162.html#SEC396"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_158.html#SEC392"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_159.html#SEC393"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_162.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC961">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H3> 7.2.2 Configuration File (`<TT>vfs.cfg</TT>') </H3>
<!--docid::SEC395::-->
<P>

Keys in the `<TT>vfs.cfg</TT>' configuration file with names starting with
`<SAMP>VFS.Mount.</SAMP>' describe the layout of the <EM>virtual</EM> file system.
Imagine a clean disk drive onto which you start to create directories by making
links to existing <EM>real</EM> directories and archive (`<TT>.zip</TT>') files.  An
archive is treated exactly like a subdirectory; you even can link one "virtual
directory" to several "real" paths and archives; however if you write files
they will be written to the first directory or archive in list.
</P><P>

These keys present a list of virtual-to-real path mappings.  The local name of
a key with the `<SAMP>VFS.Mount.</SAMP>' prefix define the virtual directory, and the
values define the real paths, which can represent a list of <EM>physical</EM>
directories and ZIP archives.  The physical directory path lists should be
separated by commas (,), therefore commas cannot be used in directory names.
This should not be much of a restriction, but if it is a problem for a
particular platform, you may want to take the drastic action of changing
`<SAMP>VFS_PATH_DIVIDER</SAMP>' macro in `<TT>vfs.cpp</TT>'.
</P><P>

The `<SAMP>VFS.Mount.</SAMP>' values typically makes heavy use of variables since
most operating systems have different pathname semantics and syntax.  The
"common denominator" that VFS emulates is a Unix-like filesystem.  To
include the value of a variable in a VFS path use the
`<SAMP>$(<VAR>variable-name</VAR>)</SAMP>' construct.  In the case where
`<SAMP><VAR>variable-name</VAR></SAMP>' consists of a single letter, you can omit the
parentheses, as in <CODE>$<VAR>variable-name</VAR></CODE> (for example `<SAMP>$A</SAMP>').
</P><P>

Variables that are defined in the environment override those defined in this
file.  For example, the `<SAMP>$HOME</SAMP>' environment variable is set in all
Unixes, but is undefined in many other operating systems.  They can define
their own values for these variables in system-dependent sections, but if the
user defines the `<SAMP>$HOME</SAMP>' environment variable it will always override
the one from this file. You also can refer the variables in the following
way: `<SAMP>$(<VAR>var</VAR>:<VAR>expr</VAR>)</SAMP>' which means "use the contents of
`<SAMP><VAR>var</VAR></SAMP>' if `<SAMP><VAR>var</VAR></SAMP>' is set (usually in environment), or use
`<SAMP><VAR>expr</VAR></SAMP>' if not".  This can be used for more complex expressions,
for example:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>$(HOME:$(HOMEDIR:$(HOMEPATH:/home)))
</pre></td></tr></table></P><P>

This expression means "take the value of the `<SAMP>$HOME</SAMP>' variable; if it is
not set, use the contents of `<SAMP>$HOMEDIR</SAMP>'; if it is also not set, use
`<SAMP>$HOMEPATH</SAMP>'; and if none are set, use the literal string `<SAMP>/home</SAMP>' as
the resulting value.
</P><P>

VFS defines a pseudo-variable named `<SAMP>/</SAMP>' that contains the path
delimiter for the current operating system (i.e.  `<TT>/</TT>' for Unix and
MacOS/X, and `<TT>\</TT>' for Windows/DOS).  You reference this variable by
writing `<SAMP>$/</SAMP>' rather than using the "real-world" delimiters `<SAMP>/</SAMP>',
or `<SAMP>\</SAMP>'.
</P><P>

Here is the complete list of pseudo-variables understood by VFS:
</P><P>

<DL COMPACT>
<DT><CODE>$/</CODE>
<DD>Platform-specific path delimiter; `<TT>/</TT>' on Unix and MacOS/X; `<TT>\</TT>' on
Windows.
<P>

<DT><CODE>$@</CODE>
<DD>Crystal Space installation directory.
<P>

<DT><CODE>$*</CODE>
<DD>Application resource directory; typically the directory in which the
application executable resides but, on MacOS/X, it is the `<TT>Resources</TT>'
directory within the Cocoa application wrapper for GUI programs.
<P>

<DT><CODE>$^</CODE>
<DD>Directory where application executable resides, or the directory where Cocoa
application wrapper resides on MacOS/X.
</DL>
<P>

The following is an example VFS configuration file.
</P><P>

Assume we wrote a game with three levels; the game is located on CD-ROM
and we want to be able to release patches in the future which will replace
several files from level archives (each level is presumed to be placed in a
separate ZIP archive on either CD-ROM or cached on the hard drive).
Additionally, we will add a link to user's home directory (something somewhat
vaguely defined on non-Unix platforms) so that game can store the user's
settings into the file `<TT>~/game.profile</TT>'.
</P><P>

Note that in this example many of the options in the real `<TT>vfs.cfg</TT>' are
omitted. So you should not take this example for your game, because one of the
libraries or plug-in modules you use may require a mapping that is not listed
here. This example is only intended to understand the concept:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>;;; Virtual File System mount table
;;;
;;; $/ -- path delimiter (i.e. "/" on Unix; "\" on Windows)
;;; $@ -- installation directory of Crystal Space
;;; $* -- application resource directory
;;; $^ -- directory in which application resides
;;; The expansions of $@, $*, and $^ always have a trailing
;;; path delimiter.
;
; The following variables should be defined either in
; the environment or in system-dependent sections:
;
; $CD - The path to CD-ROM.
; $HOME - user's home directory
;
; A common error is to omit the last $/ from directories.
; This is an error since VFS will treat any path not ending
; in $/ as an archive file name and not as a physical
; directory.

; Mount points. (These are split over multiple lines in order to
; fit correctly on a printed page in the documentation.  In real
; life, the values would appear immediately after the `=' signs!)
VFS.Mount.~ = $(HOME)$/
VFS.Mount.map1 =
  $*$/patch$/map1$/, $*$/cache$/map1.zip, $(CD)$/data$/map1.zip
VFS.Mount.map2 =
  $*$/patch$/map2$/, $*$/cache$/map2.zip, $(CD)$/data$/map2.zip
VFS.Mount.map3 =
  $*$/patch$/map3$/, $*$/cache$/map3.zip, $(CD)$/data$/map3.zip

; Platform aliases.  Aliases are always read first; VFS
; entries specific to each platform override those defined
; in the platform alias section.  For example, if your
; current platform is MacOS/X, VFS will look for the value
; of a variable first in the environment, then in
; VFS.MacOS/X., and finally in VFS.Unix. (as specified in
; section below).

; Unix-style filesystems
VFS.Alias.Unix    = VFS.Unix
VFS.Alias.MacOS/X = VFS.Unix

; CP/M-style filesystems
VFS.Alias.Win32   = VFS.CP/M
VFS.Alias.DOS     = VFS.CP/M

; Strange key names follow:
; VFS.Unix.. means key '.' in section VFS.Unix.*
; VFS.Unix... means key '..' in section VFS.Unix.*
VFS.Unix.. = .
VFS.Unix... = ..
VFS.Unix.CDROM = /mnt/cdrom
VFS.Unix.TMP = /tmp

VFS.CP/M.. = .
VFS.CP/M... = ..
VFS.CP/M.HOME = $(HOMEDIR:$(HOMEPATH:.))
VFS.CP/M.CDROM = x:
VFS.CP/M.TMP = $(TEMP:$(TMP:$(SYSTEMROOT)$/temp))
</pre></td></tr></table><A NAME="Graphics Drivers"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_160.html#SEC394"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_162.html#SEC396"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_158.html#SEC392"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_159.html#SEC393"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_162.html#SEC396"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC961">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
