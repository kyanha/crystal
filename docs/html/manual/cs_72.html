<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HTML>
<HEAD>
<TITLE>Crystal Space: TutIntro Basic Concepts</TITLE>

<META NAME="description" CONTENT="Crystal Space: TutIntro Basic Concepts">
<META NAME="keywords" CONTENT="Crystal Space: TutIntro Basic Concepts">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY LANG="" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC160"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_71.html#SEC159"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_73.html#SEC171"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_70.html#SEC158"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_71.html#SEC159"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_75.html#SEC173"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC948">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H3> 5.1.1 Basic Crystal Space Concepts </H3>
<!--docid::SEC160::-->
<P>

In order to write a Crystal Space application there are several concepts
that you need to know about. Here we will give a quick overview of all
important things you need to know about when writing Crystal Space
applications.
</P><P>

<A NAME="SEC161"></A>
<H4> The SCF Facility </H4>
<!--docid::SEC161::-->
<P>

The SCF (see section <A HREF="cs_139.html#SEC359">6.2 Shared Class Facility (SCF)</A>) system is the core low-level memory framework
for Crystal Space. You must initialize this before doing anything else
(one way is to use <CODE>csInitializer::InitializeSCF()</CODE>).
</P><P>

<A NAME="SEC162"></A>
<H4> Reference Counting </H4>
<!--docid::SEC162::-->
<P>

Reference counting is a very important part of the Crystal Space
framework. Read the SCF (see section <A HREF="cs_139.html#SEC359">6.2 Shared Class Facility (SCF)</A>) documentation for more information
about this but keep in mind that it is very important and try to make
sure you manage references correctly in your own code. Missing a
<CODE>DecRef()</CODE> can cause big memory leaks.
</P><P>

<A NAME="SEC163"></A>
<H4> The Object Registry </H4>
<!--docid::SEC163::-->
<P>

The object registry is the central repository for all objects in
Crystal Space. Everything in Crystal Space will use the object registry
to get the pointer to the objects it is interested in. One of the first
tasks a Crystal Space application has to do is to create the object
registry. You can create an object registry using
<CODE>csInitializer::CreateObjectRegistry()</CODE> or
<CODE>csInitializer::CreateEnvironment()</CODE>.
</P><P>

<A NAME="SEC164"></A>
<H4> The Plugin Manager </H4>
<!--docid::SEC164::-->
<P>

The plugin manager is responsible for loading and unloading plugins. A
plugin is a shared library of functions that can be loaded dynamically
into a running Crystal Space application. On Unix a plugin has the `<TT>.so</TT>'
extension and on Windows the `<TT>.dll</TT>' extension is used. Almost everything
in the Crystal Space framework is itself a plugin. So the plugin manager
is an important object. You can create the plugin manager with
<CODE>csInitializer::CreatePluginManager()</CODE> or
<CODE>csInitializer::CreateEnvironment()</CODE>.
</P><P>

<A NAME="SEC165"></A>
<H4> The Event Queue </H4>
<!--docid::SEC165::-->
<P>

Crystal Space is an event-driven framework. So a Crystal Space application
will also be event driven. The event queue manages the event system and
sends events to listeners. Every module or plugin that implements
`<SAMP>iEventHandler</SAMP>' can register itself with the event queue so it gets
notified when certain events happen. You can create the event queue
with <CODE>csInitializer::CreateEventQueue()</CODE> or
<CODE>csInitializer::CreateEnvironment()</CODE>.
</P><P>

A Crystal Space application will also have to create an event handler
on its own in order to actually be able to do something. This event handler
will be responsible for actually rendering to the screen (this has to be
done in response to the <CODE>cscmdProcess</CODE> event) and also catching
keyboard/mouse input. But there is much more. To setup an event handler
for the application you can use <CODE>csInitializer::SetupEventHandler()</CODE>.
</P><P>

<A NAME="SEC166"></A>
<H4> The Virtual Clock </H4>
<!--docid::SEC166::-->
<P>

Most Crystal Space applications will be time-based. The virtual clock
supports the notion of CURRENT TIME and ELAPSED TIME. It is
called a virtual clock because it doesn't necessarily have to correspond
with real time. For example, a game can be paused. Note that a well-behaved
game should always take elapsed time (between two frames) into consideration
for calculating what could have happened in that time. This is important
especially for physics calculations and also for speed of moving objects.
You want an object moving at some speed to move with the same speed on a
system with low framerates compared to a system with high framerates.
The virtual clock can be created with
<CODE>csInitializer::CreateVirtualClock()</CODE> or
<CODE>csInitializer::CreateEnvironment()</CODE>.
</P><P>

<A NAME="SEC167"></A>
<H4> The Commandline Parser </H4>
<!--docid::SEC167::-->
<P>

The commandline parser is responsible for parsing options from
the commandline. If you properly initialize it with `<SAMP>argc</SAMP>' and
`<SAMP>argv</SAMP>' then you can use it to query options that have been given
to the commandline. Several Crystal Space plugins and modules will also
query the commandline so it is important to have this object correctly
initialized. The commandline parser can be created with
<CODE>csInitializer::CreateCommandLineParser()</CODE> or
<CODE>csInitializer::CreateEnvironment()</CODE>.
</P><P>

<A NAME="SEC168"></A>
<H4> The Configuration Manager </H4>
<!--docid::SEC168::-->
<P>

The configuration manager is responsible for reading options from configuration
files.  All configuration files are put in a global pool which is managed by
the configuration manager.  Several Crystal Space plugins and modules will
query options from the configuration manager and Crystal Space applications can
also do that if they want.
</P><P>

You can create the configuration manager with:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csInitializer::CreateConfigManager()
</pre></td></tr></table></P><P>

or
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csInitializer::CreateEnvironment()
</pre></td></tr></table></P><P>

You can setup the configuration manager with:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csInitializer::SetupConfigManager()
</pre></td></tr></table></P><P>

<A NAME="SEC169"></A>
<H4> The Input Drivers </H4>
<!--docid::SEC169::-->
<P>

There are three standard input drivers included with Crystal Space:
keyboard, mouse, and joystick. Calling:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csInitializer::CreateInputDrivers()
</pre></td></tr></table></P><P>

or
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>csInitializer::CreateEnvironment()
</pre></td></tr></table></P><P>

will create the drivers and publish them via the object registry.  These
drivers will post events to the global event queue.
</P><P>

<A NAME="SEC170"></A>
<H4> The <CODE>csInitializer</CODE> class </H4>
<!--docid::SEC170::-->
<P>

We already mentioned several of the functions above. This class (for which
the definition can be found in `<TT>include/cstool/initapp.h</TT>') is a
convenience class that can be used to help you setup everything needed to
get the application running. In the tutorial below we will use several of the
functions from `<SAMP>csInitializer</SAMP>'. This class contains only static member
functions.
</P><P>

<A NAME="TutIntro Minimum Requirements"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_71.html#SEC159"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_73.html#SEC171"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_70.html#SEC158"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_71.html#SEC159"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_75.html#SEC173"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="index.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_286.html#SEC948">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="cs_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated using
<A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>

</BODY>
</HTML>
