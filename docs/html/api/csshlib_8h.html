<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Crystal Space: csutil/csshlib.h File Reference (Crystal Space Public API Reference)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<table border="0" cellpadding="0" cellspacing="0" width="100%" class="head">
 <tr heigth="59">
  <td class="head" width="202" valign="bottom" style="padding-left:0;"><a href="http://www.crystalspace3d.org/"><img src="csblur.png" width="236" height="59" alt="CrystalSpace" border="0"></a></td>
  <td class="head"><h2>Public API Reference</h2></td>
 </tr>
 <tr heigth="11">
  <td colspan="2" class="headshadow" valign="top" style="padding-left:0;"><img src="csblurb.png" width="236" height="11" alt="" border="0"></td>
 </tr>
</table>
<div class="content">
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000024.html">csutil</a></div>
<h1>csshlib.h File Reference</h1>Crystal Space cross-platform shared library management. <a href="#_details">More...</a>
<p>
<code>#include &quot;csextern.h&quot;</code><br>
<code>#include &quot;<a class="el" href="ref_8h-source.html">csutil/ref.h</a>&quot;</code><br>
<code>#include &quot;csutil/stringarray.h&quot;</code><br>
<code>#include &quot;<a class="el" href="string_8h-source.html">iutil/string.h</a>&quot;</code><br>

<p>
<a href="csshlib_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Low-level shared library support</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a0"></a><!-- doxytag: member="csshlib.h::csLibraryHandle" ref="a0" args="" -->
typedef void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="csshlib_8h.html#a0">csLibraryHandle</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="csshlib_8h.html#a2">csGetLibrarySymbol</a> (<a class="el" href="csshlib_8h.html#a0">csLibraryHandle</a> Handle, char const *iName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a pointer to a symbol within given shared library.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="csshlib_8h.html#a6">csGetLoadLibraryVerbose</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query if failed dynamic library loads generate verbose messages.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classcsRef.html">csRef</a>&lt; <a class="el" href="structiString.html">iString</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="csshlib_8h.html#a9">csGetPluginMetadata</a> (const char *fullPath, <a class="el" href="classcsRef.html">csRef</a>&lt; <a class="el" href="structiDocument.html">iDocument</a> &gt; &amp;metadata)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrive a plugin's metadata.  <a href="#a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="csshlib_8h.html#a0">csLibraryHandle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="csshlib_8h.html#a1">csLoadLibrary</a> (char const *iName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load a shared library and return a library handle, which is used later to query and unload the library.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="csshlib_8h.html#a4">csPrintLibraryError</a> (char const *iModule)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print out the latest dynamic loader error.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classcsRef.html">csRef</a>&lt; <a class="el" href="structiStringArray.html">iStringArray</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="csshlib_8h.html#a7">csScanPluginDir</a> (const char *dir, <a class="el" href="classcsRef.html">csRef</a>&lt; <a class="el" href="structiStringArray.html">iStringArray</a> &gt; &amp;plugins, bool recursive=true)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Scan a given directory for plugins and return a list of the plugin native file names and their respective metadata.  <a href="#a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classcsRef.html">csRef</a>&lt; <a class="el" href="structiStringArray.html">iStringArray</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="csshlib_8h.html#a8">csScanPluginDirs</a> (<a class="el" href="classcsPathsList.html">csPathsList</a> *dirs, <a class="el" href="classcsRef.html">csRef</a>&lt; <a class="el" href="structiStringArray.html">iStringArray</a> &gt; &amp;plugins)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Scan some given directories for plugins.  <a href="#a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="csshlib_8h.html#a5">csSetLoadLibraryVerbose</a> (bool)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Control whether dynamic library loading messages are verbose or terse.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="csshlib_8h.html#a3">csUnloadLibrary</a> (<a class="el" href="csshlib_8h.html#a0">csLibraryHandle</a> Handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unload a shared library given its handle.  <a href="#a3"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Crystal Space cross-platform shared library management. 
<p>

<p>
Definition in file <a class="el" href="csshlib_8h-source.html">csshlib.h</a>.<hr><h2>Function Documentation</h2>
<a class="anchor" name="a2"></a><!-- doxytag: member="csshlib.h::csGetLibrarySymbol" ref="a2" args="(csLibraryHandle Handle, char const *iName)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void* csGetLibrarySymbol           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="csshlib_8h.html#a0">csLibraryHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char const *&nbsp;</td>
          <td class="mdname" nowrap> <em>iName</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return a pointer to a symbol within given shared library. 
<p>
Note that generally Crystal Space needs just one exported symbol from every shared library; the symbol is called {library}_scfInitialize. If your OS is short on features, you may implement querying of just this symbol.    </td>
  </tr>
</table>
<a class="anchor" name="a6"></a><!-- doxytag: member="csshlib.h::csGetLoadLibraryVerbose" ref="a6" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool csGetLoadLibraryVerbose           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Query if failed dynamic library loads generate verbose messages. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9"></a><!-- doxytag: member="csshlib.h::csGetPluginMetadata" ref="a9" args="(const char *fullPath, csRef&lt; iDocument &gt; &amp;metadata)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classcsRef.html">csRef</a>&lt;<a class="el" href="structiString.html">iString</a>&gt; csGetPluginMetadata           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>fullPath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classcsRef.html">csRef</a>&lt; <a class="el" href="structiDocument.html">iDocument</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>metadata</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrive a plugin's metadata. 
<p>
<dl compact><dt><b>Remarks:</b></dt><dd><code>`fullPath'</code> should be either a string returned from <a class="el" href="csshlib_8h.html#a7">csScanPluginDir()</a> or <a class="el" href="csshlib_8h.html#a8">csScanPluginDirs()</a>, or a fully qualified native path of the plugin module. The path suffix should be either .csplugin if the plugin metadata is stored in an external .csplugin file, or it should be the standard suffix of shared libraries or bundles for the platform (for example, .so for Unix; .dll for Windows). If metadata is retrieved successfully for the specified plugin module, metadata.IsValid() will return true, and the `metadata' argument will reference an <a class="el" href="structiDocument.html">iDocument</a> containing the data. If no metadata is located or an error occurrs while attempting to retrieve the metadata, metadata.IsValid() return false. If some type of reportable error or warning is encountered, it will be returned from the function as an <a class="el" href="structiString.html">iString</a>. It is possible for a warning to be issued even if metadata was successfully retrieved. Finally, if metadata.IsValid() returns false and the returned <a class="el" href="structiString.html">iString</a> is empty, then that indicates simply that the specified path does not correspond to a Crystal Space plugin module. This is a valid condition.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a1"></a><!-- doxytag: member="csshlib.h::csLoadLibrary" ref="a1" args="(char const *iName)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="csshlib_8h.html#a0">csLibraryHandle</a> csLoadLibrary           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char const *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>iName</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Load a shared library and return a library handle, which is used later to query and unload the library. 
<p>
iName is the FULL path to the library.    </td>
  </tr>
</table>
<a class="anchor" name="a4"></a><!-- doxytag: member="csshlib.h::csPrintLibraryError" ref="a4" args="(char const *iModule)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void csPrintLibraryError           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char const *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>iModule</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Print out the latest dynamic loader error. 
<p>
This is not strictly required (and on some platforms its just a empty routine) but sometimes it helps to find problems.    </td>
  </tr>
</table>
<a class="anchor" name="a7"></a><!-- doxytag: member="csshlib.h::csScanPluginDir" ref="a7" args="(const char *dir, csRef&lt; iStringArray &gt; &amp;plugins, bool recursive=true)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classcsRef.html">csRef</a>&lt;<a class="el" href="structiStringArray.html">iStringArray</a>&gt; csScanPluginDir           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>dir</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classcsRef.html">csRef</a>&lt; <a class="el" href="structiStringArray.html">iStringArray</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>plugins</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>recursive</em> = <code>true</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Scan a given directory for plugins and return a list of the plugin native file names and their respective metadata. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dir</em>&nbsp;</td><td>Directory to scan. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>plugins</em>&nbsp;</td><td>Native file names. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>recursive</em>&nbsp;</td><td>Recursively scan all subdirectories. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Remarks:</b></dt><dd>It is the responsibility of the caller to do any cleaning of <code>metadata</code> and <code>plugins</code>, if desired. <p>
<code>plugins</code> can be 0, a string vector will be created in this case. </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>If any errors occured, a vector of error descriptions.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a8"></a><!-- doxytag: member="csshlib.h::csScanPluginDirs" ref="a8" args="(csPathsList *dirs, csRef&lt; iStringArray &gt; &amp;plugins)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classcsRef.html">csRef</a>&lt;<a class="el" href="structiStringArray.html">iStringArray</a>&gt; csScanPluginDirs           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classcsPathsList.html">csPathsList</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dirs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classcsRef.html">csRef</a>&lt; <a class="el" href="structiStringArray.html">iStringArray</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>plugins</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Scan some given directories for plugins. 
<p>
Accepts the same parameters as <a class="el" href="csshlib_8h.html#a7">csScanPluginDir()</a>, with the exception of <code>dirs</code>.    </td>
  </tr>
</table>
<a class="anchor" name="a5"></a><!-- doxytag: member="csshlib.h::csSetLoadLibraryVerbose" ref="a5" args="(bool)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void csSetLoadLibraryVerbose           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Control whether dynamic library loading messages are verbose or terse. 
<p>
When verbose, and a library fails to load, <a class="el" href="csshlib_8h.html#a4">csPrintLibraryError()</a> is invoked to emit detailed diagnostic information regarding the failure. If terse, then a simple message is emitted stating that the library failed to load and instructing the user to use the -verbose command-line option for more details. Verbose messages are enabled by default for debug builds; terse messages for optimized builds.    </td>
  </tr>
</table>
<a class="anchor" name="a3"></a><!-- doxytag: member="csshlib.h::csUnloadLibrary" ref="a3" args="(csLibraryHandle Handle)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool csUnloadLibrary           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="csshlib_8h.html#a0">csLibraryHandle</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Handle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unload a shared library given its handle. 
<p>
The function returns false on error.    </td>
  </tr>
</table>
<hr size="1"><address><small>Generated for Crystal Space by 
<a href="http://www.doxygen.org/index.html">doxygen</a> 1.4.4 
</small></address> </div></body> </html>
